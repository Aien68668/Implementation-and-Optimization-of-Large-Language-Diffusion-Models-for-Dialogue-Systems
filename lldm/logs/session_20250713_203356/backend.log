=== LLaDA 后端服务日志 ===
启动时间: Sun Jul 13 20:34:01 CST 2025
日志会话: 20250713_203356
Python版本: Python 3.12.3
工作目录: /root/LLaDA-main/lldm
设备检测: CUDA可用: True
==========================

2025-07-13 20:34:04 - INFO - [server.py:97] - 初始化设备: cuda
2025-07-13 20:34:04 - INFO - [server.py:97] - 初始化设备: cuda
2025-07-13 20:34:04 - INFO - [server.py:104] - GPU总内存: 23.5GB
2025-07-13 20:34:04 - INFO - [server.py:104] - GPU总内存: 23.5GB
2025-07-13 20:34:04 - INFO - [server.py:107] - 开始加载tokenizer...
2025-07-13 20:34:04 - INFO - [server.py:107] - 开始加载tokenizer...
2025-07-13 20:34:04 - INFO - [server.py:109] - Tokenizer加载成功
2025-07-13 20:34:04 - INFO - [server.py:109] - Tokenizer加载成功
2025-07-13 20:34:04 - INFO - [server.py:111] - 开始加载模型...
2025-07-13 20:34:04 - INFO - [server.py:111] - 开始加载模型...
2025-07-13 20:34:05 - INFO - [modeling.py:991] - We will use 90% of the memory on device 0 for storing the model, and 10% for the buffer to avoid OOM. You can set `max_memory` in to a higher value to use more memory (at your own risk).
2025-07-13 20:34:05 - INFO - [modeling.py:991] - We will use 90% of the memory on device 0 for storing the model, and 10% for the buffer to avoid OOM. You can set `max_memory` in to a higher value to use more memory (at your own risk).
2025-07-13 20:34:06 - WARNING - [modeling.py:1114] - The model weights are not tied. Please use the `tie_weights` method before using the `infer_auto_device` function.
2025-07-13 20:34:06 - WARNING - [modeling.py:1114] - The model weights are not tied. Please use the `tie_weights` method before using the `infer_auto_device` function.
Loading checkpoint shards:   0%|          | 0/6 [00:00<?, ?it/s]Loading checkpoint shards:  17%|█▋        | 1/6 [00:00<00:02,  1.86it/s]Loading checkpoint shards:  33%|███▎      | 2/6 [00:01<00:02,  1.60it/s]Loading checkpoint shards:  50%|█████     | 3/6 [00:02<00:02,  1.43it/s]Loading checkpoint shards:  67%|██████▋   | 4/6 [00:02<00:01,  1.40it/s]Loading checkpoint shards:  83%|████████▎ | 5/6 [00:03<00:00,  1.36it/s]Loading checkpoint shards: 100%|██████████| 6/6 [00:04<00:00,  1.49it/s]Loading checkpoint shards: 100%|██████████| 6/6 [00:04<00:00,  1.48it/s]
2025-07-13 20:34:10 - INFO - [server.py:129] - 模型加载成功，设备: cuda
2025-07-13 20:34:10 - INFO - [server.py:129] - 模型加载成功，设备: cuda
2025-07-13 20:34:10 - INFO - [server.py:132] - GPU已分配内存: 14.9GB
2025-07-13 20:34:10 - INFO - [server.py:132] - GPU已分配内存: 14.9GB
 * Serving Flask app 'server'
 * Debug mode: off
2025-07-13 20:34:10 - INFO - [_internal.py:97] - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9000
 * Running on http://172.17.0.3:9000
2025-07-13 20:34:10 - INFO - [_internal.py:97] - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9000
 * Running on http://172.17.0.3:9000
2025-07-13 20:34:10 - INFO - [_internal.py:97] - [33mPress CTRL+C to quit[0m
2025-07-13 20:34:10 - INFO - [_internal.py:97] - [33mPress CTRL+C to quit[0m
2025-07-13 20:34:10 - INFO - [server.py:73] - 收到请求: {
  "method": "GET",
  "url": "http://localhost:9000/health",
  "remote_addr": "127.0.0.1",
  "user_agent": "curl/7.81.0",
  "timestamp": "2025-07-13T20:34:10.119189"
}
2025-07-13 20:34:10 - INFO - [server.py:73] - 收到请求: {
  "method": "GET",
  "url": "http://localhost:9000/health",
  "remote_addr": "127.0.0.1",
  "user_agent": "curl/7.81.0",
  "timestamp": "2025-07-13T20:34:10.119189"
}
2025-07-13 20:34:10 - INFO - [server.py:92] - 发送响应: {
  "status_code": 200,
  "content_length": 37,
  "content_type": "application/json",
  "timestamp": "2025-07-13T20:34:10.119635",
  "response_body": "{\"device\":\"cuda\",\"status\":\"healthy\"}\n"
}
2025-07-13 20:34:10 - INFO - [server.py:92] - 发送响应: {
  "status_code": 200,
  "content_length": 37,
  "content_type": "application/json",
  "timestamp": "2025-07-13T20:34:10.119635",
  "response_body": "{\"device\":\"cuda\",\"status\":\"healthy\"}\n"
}
2025-07-13 20:34:10 - INFO - [_internal.py:97] - 127.0.0.1 - - [13/Jul/2025 20:34:10] "GET /health HTTP/1.1" 200 -
2025-07-13 20:34:10 - INFO - [_internal.py:97] - 127.0.0.1 - - [13/Jul/2025 20:34:10] "GET /health HTTP/1.1" 200 -
2025-07-13 20:34:14 - INFO - [server.py:73] - 收到请求: {
  "method": "GET",
  "url": "http://localhost:9000/health",
  "remote_addr": "127.0.0.1",
  "user_agent": "python-requests/2.31.0",
  "timestamp": "2025-07-13T20:34:14.563456"
}
2025-07-13 20:34:14 - INFO - [server.py:73] - 收到请求: {
  "method": "GET",
  "url": "http://localhost:9000/health",
  "remote_addr": "127.0.0.1",
  "user_agent": "python-requests/2.31.0",
  "timestamp": "2025-07-13T20:34:14.563456"
}
2025-07-13 20:34:14 - INFO - [server.py:92] - 发送响应: {
  "status_code": 200,
  "content_length": 37,
  "content_type": "application/json",
  "timestamp": "2025-07-13T20:34:14.564321",
  "response_body": "{\"device\":\"cuda\",\"status\":\"healthy\"}\n"
}
2025-07-13 20:34:14 - INFO - [server.py:92] - 发送响应: {
  "status_code": 200,
  "content_length": 37,
  "content_type": "application/json",
  "timestamp": "2025-07-13T20:34:14.564321",
  "response_body": "{\"device\":\"cuda\",\"status\":\"healthy\"}\n"
}
2025-07-13 20:34:14 - INFO - [_internal.py:97] - 127.0.0.1 - - [13/Jul/2025 20:34:14] "GET /health HTTP/1.1" 200 -
2025-07-13 20:34:14 - INFO - [_internal.py:97] - 127.0.0.1 - - [13/Jul/2025 20:34:14] "GET /health HTTP/1.1" 200 -
2025-07-13 20:34:15 - INFO - [server.py:73] - 收到请求: {
  "method": "POST",
  "url": "http://localhost:9000/generate",
  "remote_addr": "127.0.0.1",
  "user_agent": "python-requests/2.31.0",
  "timestamp": "2025-07-13T20:34:15.572289",
  "json_data": {
    "messages": [
      {
        "role": "user",
        "content": "你好"
      }
    ],
    "settings": {
      "gen_length": 16,
      "steps": 8,
      "temperature": 0.0,
      "cfg_scale": 0.0
    }
  }
}
2025-07-13 20:34:15 - INFO - [server.py:73] - 收到请求: {
  "method": "POST",
  "url": "http://localhost:9000/generate",
  "remote_addr": "127.0.0.1",
  "user_agent": "python-requests/2.31.0",
  "timestamp": "2025-07-13T20:34:15.572289",
  "json_data": {
    "messages": [
      {
        "role": "user",
        "content": "你好"
      }
    ],
    "settings": {
      "gen_length": 16,
      "steps": 8,
      "temperature": 0.0,
      "cfg_scale": 0.0
    }
  }
}
2025-07-13 20:34:15 - INFO - [server.py:429] - [req_1752410055573] 收到生成请求
2025-07-13 20:34:15 - INFO - [server.py:429] - [req_1752410055573] 收到生成请求
2025-07-13 20:34:15 - INFO - [server.py:437] - [req_1752410055573] 请求数据详情:
2025-07-13 20:34:15 - INFO - [server.py:437] - [req_1752410055573] 请求数据详情:
2025-07-13 20:34:15 - INFO - [server.py:438] - [req_1752410055573] - 消息数量: 1
2025-07-13 20:34:15 - INFO - [server.py:438] - [req_1752410055573] - 消息数量: 1
2025-07-13 20:34:15 - INFO - [server.py:439] - [req_1752410055573] - 设置参数: {
  "gen_length": 16,
  "steps": 8,
  "temperature": 0.0,
  "cfg_scale": 0.0
}
2025-07-13 20:34:15 - INFO - [server.py:439] - [req_1752410055573] - 设置参数: {
  "gen_length": 16,
  "steps": 8,
  "temperature": 0.0,
  "cfg_scale": 0.0
}
2025-07-13 20:34:15 - DEBUG - [server.py:440] - [req_1752410055573] - 完整消息列表: [
  {
    "role": "user",
    "content": "你好"
  }
]
2025-07-13 20:34:15 - INFO - [server.py:451] - [req_1752410055573] 开始生成响应...
2025-07-13 20:34:15 - INFO - [server.py:451] - [req_1752410055573] 开始生成响应...
2025-07-13 20:34:15 - INFO - [server.py:201] - ============================================================
2025-07-13 20:34:15 - INFO - [server.py:201] - ============================================================
2025-07-13 20:34:15 - INFO - [server.py:202] - 开始生成响应
2025-07-13 20:34:15 - INFO - [server.py:202] - 开始生成响应
2025-07-13 20:34:15 - INFO - [server.py:203] - 输入消息数量: 1
2025-07-13 20:34:15 - INFO - [server.py:203] - 输入消息数量: 1
2025-07-13 20:34:15 - INFO - [server.py:205] - 消息 1: 角色=user, 内容长度=2
2025-07-13 20:34:15 - INFO - [server.py:205] - 消息 1: 角色=user, 内容长度=2
2025-07-13 20:34:15 - DEBUG - [server.py:206] - 消息 1 内容: 你好
2025-07-13 20:34:15 - INFO - [server.py:208] - 设置参数: {
  "gen_length": 16,
  "steps": 8,
  "temperature": 0.0,
  "cfg_scale": 0.0
}
2025-07-13 20:34:15 - INFO - [server.py:208] - 设置参数: {
  "gen_length": 16,
  "steps": 8,
  "temperature": 0.0,
  "cfg_scale": 0.0
}
2025-07-13 20:34:15 - INFO - [server.py:220] - 解析后的约束: {}
2025-07-13 20:34:15 - INFO - [server.py:220] - 解析后的约束: {}
2025-07-13 20:34:15 - INFO - [server.py:225] - 生成前GPU内存使用: 14.93GB
2025-07-13 20:34:15 - INFO - [server.py:225] - 生成前GPU内存使用: 14.93GB
2025-07-13 20:34:15 - INFO - [server.py:228] - 准备输入prompt...
2025-07-13 20:34:15 - INFO - [server.py:228] - 准备输入prompt...
2025-07-13 20:34:15 - DEBUG - [server.py:230] - 格式化后的chat输入: <|startoftext|><|start_header_id|>user<|end_header_id|>

你好<|eot_id|><|start_header_id|>assistant<|end_header_id|>


2025-07-13 20:34:15 - INFO - [server.py:234] - 输入token数量: 14
2025-07-13 20:34:15 - INFO - [server.py:234] - 输入token数量: 14
2025-07-13 20:34:15 - INFO - [server.py:241] - 序列总长度: 30, prompt长度: 14, 生成长度: 16
2025-07-13 20:34:15 - INFO - [server.py:241] - 序列总长度: 30, prompt长度: 14, 生成长度: 16
2025-07-13 20:34:15 - INFO - [server.py:250] - 应用约束数量: 0
2025-07-13 20:34:15 - INFO - [server.py:250] - 应用约束数量: 0
2025-07-13 20:34:15 - INFO - [server.py:270] - 块处理配置: 块长度=16, 块数量=1, 每块步数=8
2025-07-13 20:34:15 - INFO - [server.py:270] - 块处理配置: 块长度=16, 块数量=1, 每块步数=8
2025-07-13 20:34:15 - INFO - [server.py:274] - 处理第 1/1 块...
2025-07-13 20:34:15 - INFO - [server.py:274] - 处理第 1/1 块...
2025-07-13 20:34:16 - INFO - [server.py:381] - 生成后GPU内存使用: 15.36GB
2025-07-13 20:34:16 - INFO - [server.py:381] - 生成后GPU内存使用: 15.36GB
2025-07-13 20:34:16 - INFO - [server.py:383] - 生成完成!
2025-07-13 20:34:16 - INFO - [server.py:383] - 生成完成!
2025-07-13 20:34:16 - INFO - [server.py:384] - 响应文本长度: 17
2025-07-13 20:34:16 - INFO - [server.py:384] - 响应文本长度: 17
2025-07-13 20:34:16 - INFO - [server.py:385] - 可视化步骤数: 9
2025-07-13 20:34:16 - INFO - [server.py:385] - 可视化步骤数: 9
2025-07-13 20:34:16 - INFO - [server.py:386] - 生成耗时: 0.64秒
2025-07-13 20:34:16 - INFO - [server.py:386] - 生成耗时: 0.64秒
2025-07-13 20:34:16 - DEBUG - [server.py:387] - 生成的响应文本: 你好！有什么我可以可以帮助你的吗？
2025-07-13 20:34:16 - INFO - [server.py:388] - ============================================================
2025-07-13 20:34:16 - INFO - [server.py:388] - ============================================================
2025-07-13 20:34:16 - INFO - [server.py:460] - [req_1752410055573] 生成成功!
2025-07-13 20:34:16 - INFO - [server.py:460] - [req_1752410055573] 生成成功!
2025-07-13 20:34:16 - INFO - [server.py:461] - [req_1752410055573] 响应长度: 17
2025-07-13 20:34:16 - INFO - [server.py:461] - [req_1752410055573] 响应长度: 17
2025-07-13 20:34:16 - INFO - [server.py:462] - [req_1752410055573] 可视化步骤: 9
2025-07-13 20:34:16 - INFO - [server.py:462] - [req_1752410055573] 可视化步骤: 9
2025-07-13 20:34:16 - INFO - [server.py:463] - [req_1752410055573] 总耗时: 0.64秒
2025-07-13 20:34:16 - INFO - [server.py:463] - [req_1752410055573] 总耗时: 0.64秒
2025-07-13 20:34:16 - DEBUG - [server.py:464] - [req_1752410055573] 响应文本: 你好！有什么我可以可以帮助你的吗？
2025-07-13 20:34:16 - INFO - [server.py:92] - 发送响应: {
  "status_code": 200,
  "content_length": 3110,
  "content_type": "application/json",
  "timestamp": "2025-07-13T20:34:16.216091"
}
2025-07-13 20:34:16 - INFO - [server.py:92] - 发送响应: {
  "status_code": 200,
  "content_length": 3110,
  "content_type": "application/json",
  "timestamp": "2025-07-13T20:34:16.216091"
}
2025-07-13 20:34:16 - INFO - [_internal.py:97] - 127.0.0.1 - - [13/Jul/2025 20:34:16] "POST /generate HTTP/1.1" 200 -
2025-07-13 20:34:16 - INFO - [_internal.py:97] - 127.0.0.1 - - [13/Jul/2025 20:34:16] "POST /generate HTTP/1.1" 200 -
2025-07-13 20:34:17 - INFO - [server.py:73] - 收到请求: {
  "method": "POST",
  "url": "http://localhost:9000/generate",
  "remote_addr": "127.0.0.1",
  "user_agent": "python-requests/2.31.0",
  "timestamp": "2025-07-13T20:34:17.222349",
  "json_data": {
    "messages": [
      {
        "role": "user",
        "content": "今天天气怎么样？"
      }
    ],
    "settings": {
      "gen_length": 12,
      "steps": 6,
      "temperature": 0.0,
      "constraints": "0:今天, 2:天气, 4:很好"
    }
  }
}
2025-07-13 20:34:17 - INFO - [server.py:73] - 收到请求: {
  "method": "POST",
  "url": "http://localhost:9000/generate",
  "remote_addr": "127.0.0.1",
  "user_agent": "python-requests/2.31.0",
  "timestamp": "2025-07-13T20:34:17.222349",
  "json_data": {
    "messages": [
      {
        "role": "user",
        "content": "今天天气怎么样？"
      }
    ],
    "settings": {
      "gen_length": 12,
      "steps": 6,
      "temperature": 0.0,
      "constraints": "0:今天, 2:天气, 4:很好"
    }
  }
}
2025-07-13 20:34:17 - INFO - [server.py:429] - [req_1752410057223] 收到生成请求
2025-07-13 20:34:17 - INFO - [server.py:429] - [req_1752410057223] 收到生成请求
2025-07-13 20:34:17 - INFO - [server.py:437] - [req_1752410057223] 请求数据详情:
2025-07-13 20:34:17 - INFO - [server.py:437] - [req_1752410057223] 请求数据详情:
2025-07-13 20:34:17 - INFO - [server.py:438] - [req_1752410057223] - 消息数量: 1
2025-07-13 20:34:17 - INFO - [server.py:438] - [req_1752410057223] - 消息数量: 1
2025-07-13 20:34:17 - INFO - [server.py:439] - [req_1752410057223] - 设置参数: {
  "gen_length": 12,
  "steps": 6,
  "temperature": 0.0,
  "constraints": "0:今天, 2:天气, 4:很好"
}
2025-07-13 20:34:17 - INFO - [server.py:439] - [req_1752410057223] - 设置参数: {
  "gen_length": 12,
  "steps": 6,
  "temperature": 0.0,
  "constraints": "0:今天, 2:天气, 4:很好"
}
2025-07-13 20:34:17 - DEBUG - [server.py:440] - [req_1752410057223] - 完整消息列表: [
  {
    "role": "user",
    "content": "今天天气怎么样？"
  }
]
2025-07-13 20:34:17 - INFO - [server.py:451] - [req_1752410057223] 开始生成响应...
2025-07-13 20:34:17 - INFO - [server.py:451] - [req_1752410057223] 开始生成响应...
2025-07-13 20:34:17 - INFO - [server.py:201] - ============================================================
2025-07-13 20:34:17 - INFO - [server.py:201] - ============================================================
2025-07-13 20:34:17 - INFO - [server.py:202] - 开始生成响应
2025-07-13 20:34:17 - INFO - [server.py:202] - 开始生成响应
2025-07-13 20:34:17 - INFO - [server.py:203] - 输入消息数量: 1
2025-07-13 20:34:17 - INFO - [server.py:203] - 输入消息数量: 1
2025-07-13 20:34:17 - INFO - [server.py:205] - 消息 1: 角色=user, 内容长度=8
2025-07-13 20:34:17 - INFO - [server.py:205] - 消息 1: 角色=user, 内容长度=8
2025-07-13 20:34:17 - DEBUG - [server.py:206] - 消息 1 内容: 今天天气怎么样？
2025-07-13 20:34:17 - INFO - [server.py:208] - 设置参数: {
  "gen_length": 12,
  "steps": 6,
  "temperature": 0.0,
  "constraints": "0:今天, 2:天气, 4:很好"
}
2025-07-13 20:34:17 - INFO - [server.py:208] - 设置参数: {
  "gen_length": 12,
  "steps": 6,
  "temperature": 0.0,
  "constraints": "0:今天, 2:天气, 4:很好"
}
2025-07-13 20:34:17 - INFO - [server.py:220] - 解析后的约束: {0: '今天', 2: '天气', 4: '很好'}
2025-07-13 20:34:17 - INFO - [server.py:220] - 解析后的约束: {0: '今天', 2: '天气', 4: '很好'}
2025-07-13 20:34:17 - INFO - [server.py:225] - 生成前GPU内存使用: 14.94GB
2025-07-13 20:34:17 - INFO - [server.py:225] - 生成前GPU内存使用: 14.94GB
2025-07-13 20:34:17 - INFO - [server.py:228] - 准备输入prompt...
2025-07-13 20:34:17 - INFO - [server.py:228] - 准备输入prompt...
2025-07-13 20:34:17 - DEBUG - [server.py:230] - 格式化后的chat输入: <|startoftext|><|start_header_id|>user<|end_header_id|>

今天天气怎么样？<|eot_id|><|start_header_id|>assistant<|end_header_id|>


2025-07-13 20:34:17 - INFO - [server.py:234] - 输入token数量: 17
2025-07-13 20:34:17 - INFO - [server.py:234] - 输入token数量: 17
2025-07-13 20:34:17 - INFO - [server.py:241] - 序列总长度: 29, prompt长度: 17, 生成长度: 12
2025-07-13 20:34:17 - INFO - [server.py:241] - 序列总长度: 29, prompt长度: 17, 生成长度: 12
2025-07-13 20:34:17 - INFO - [server.py:250] - 应用约束数量: 5
2025-07-13 20:34:17 - INFO - [server.py:250] - 应用约束数量: 5
2025-07-13 20:34:17 - DEBUG - [server.py:255] - 约束位置 0 (绝对位置 17): token_id=34808
2025-07-13 20:34:17 - DEBUG - [server.py:255] - 约束位置 2 (绝对位置 19): token_id=220
2025-07-13 20:34:17 - DEBUG - [server.py:255] - 约束位置 3 (绝对位置 20): token_id=13092
2025-07-13 20:34:17 - DEBUG - [server.py:255] - 约束位置 4 (绝对位置 21): token_id=220
2025-07-13 20:34:17 - DEBUG - [server.py:255] - 约束位置 5 (绝对位置 22): token_id=9052
2025-07-13 20:34:17 - INFO - [server.py:270] - 块处理配置: 块长度=12, 块数量=1, 每块步数=6
2025-07-13 20:34:17 - INFO - [server.py:270] - 块处理配置: 块长度=12, 块数量=1, 每块步数=6
2025-07-13 20:34:17 - INFO - [server.py:274] - 处理第 1/1 块...
2025-07-13 20:34:17 - INFO - [server.py:274] - 处理第 1/1 块...
2025-07-13 20:34:17 - INFO - [server.py:381] - 生成后GPU内存使用: 15.35GB
2025-07-13 20:34:17 - INFO - [server.py:381] - 生成后GPU内存使用: 15.35GB
2025-07-13 20:34:17 - INFO - [server.py:383] - 生成完成!
2025-07-13 20:34:17 - INFO - [server.py:383] - 生成完成!
2025-07-13 20:34:17 - INFO - [server.py:384] - 响应文本长度: 22
2025-07-13 20:34:17 - INFO - [server.py:384] - 响应文本长度: 22
2025-07-13 20:34:17 - INFO - [server.py:385] - 可视化步骤数: 7
2025-07-13 20:34:17 - INFO - [server.py:385] - 可视化步骤数: 7
2025-07-13 20:34:17 - INFO - [server.py:386] - 生成耗时: 0.20秒
2025-07-13 20:34:17 - INFO - [server.py:386] - 生成耗时: 0.20秒
2025-07-13 20:34:17 - DEBUG - [server.py:387] - 生成的响应文本:  今天 的 天气 很好，阳光明媚，气温适宜。
2025-07-13 20:34:17 - INFO - [server.py:388] - ============================================================
2025-07-13 20:34:17 - INFO - [server.py:388] - ============================================================
2025-07-13 20:34:17 - INFO - [server.py:460] - [req_1752410057223] 生成成功!
2025-07-13 20:34:17 - INFO - [server.py:460] - [req_1752410057223] 生成成功!
2025-07-13 20:34:17 - INFO - [server.py:461] - [req_1752410057223] 响应长度: 22
2025-07-13 20:34:17 - INFO - [server.py:461] - [req_1752410057223] 响应长度: 22
2025-07-13 20:34:17 - INFO - [server.py:462] - [req_1752410057223] 可视化步骤: 7
2025-07-13 20:34:17 - INFO - [server.py:462] - [req_1752410057223] 可视化步骤: 7
2025-07-13 20:34:17 - INFO - [server.py:463] - [req_1752410057223] 总耗时: 0.20秒
2025-07-13 20:34:17 - INFO - [server.py:463] - [req_1752410057223] 总耗时: 0.20秒
2025-07-13 20:34:17 - DEBUG - [server.py:464] - [req_1752410057223] 响应文本:  今天 的 天气 很好，阳光明媚，气温适宜。
2025-07-13 20:34:17 - INFO - [server.py:92] - 发送响应: {
  "status_code": 200,
  "content_length": 2097,
  "content_type": "application/json",
  "timestamp": "2025-07-13T20:34:17.425747"
}
2025-07-13 20:34:17 - INFO - [server.py:92] - 发送响应: {
  "status_code": 200,
  "content_length": 2097,
  "content_type": "application/json",
  "timestamp": "2025-07-13T20:34:17.425747"
}
2025-07-13 20:34:17 - INFO - [_internal.py:97] - 127.0.0.1 - - [13/Jul/2025 20:34:17] "POST /generate HTTP/1.1" 200 -
2025-07-13 20:34:17 - INFO - [_internal.py:97] - 127.0.0.1 - - [13/Jul/2025 20:34:17] "POST /generate HTTP/1.1" 200 -
2025-07-13 20:34:24 - INFO - [server.py:73] - 收到请求: {
  "method": "GET",
  "url": "http://localhost:9000/health",
  "remote_addr": "127.0.0.1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36 Edg/138.0.0.0",
  "timestamp": "2025-07-13T20:34:24.274337"
}
2025-07-13 20:34:24 - INFO - [server.py:73] - 收到请求: {
  "method": "GET",
  "url": "http://localhost:9000/health",
  "remote_addr": "127.0.0.1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36 Edg/138.0.0.0",
  "timestamp": "2025-07-13T20:34:24.274337"
}
2025-07-13 20:34:24 - INFO - [server.py:92] - 发送响应: {
  "status_code": 200,
  "content_length": 37,
  "content_type": "application/json",
  "timestamp": "2025-07-13T20:34:24.274839",
  "response_body": "{\"device\":\"cuda\",\"status\":\"healthy\"}\n"
}
2025-07-13 20:34:24 - INFO - [server.py:92] - 发送响应: {
  "status_code": 200,
  "content_length": 37,
  "content_type": "application/json",
  "timestamp": "2025-07-13T20:34:24.274839",
  "response_body": "{\"device\":\"cuda\",\"status\":\"healthy\"}\n"
}
2025-07-13 20:34:24 - INFO - [_internal.py:97] - 127.0.0.1 - - [13/Jul/2025 20:34:24] "GET /health HTTP/1.1" 200 -
2025-07-13 20:34:24 - INFO - [_internal.py:97] - 127.0.0.1 - - [13/Jul/2025 20:34:24] "GET /health HTTP/1.1" 200 -
2025-07-13 20:34:24 - INFO - [server.py:73] - 收到请求: {
  "method": "GET",
  "url": "http://localhost:9000/health",
  "remote_addr": "127.0.0.1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36 Edg/138.0.0.0",
  "timestamp": "2025-07-13T20:34:24.741513"
}
2025-07-13 20:34:24 - INFO - [server.py:73] - 收到请求: {
  "method": "GET",
  "url": "http://localhost:9000/health",
  "remote_addr": "127.0.0.1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36 Edg/138.0.0.0",
  "timestamp": "2025-07-13T20:34:24.741513"
}
2025-07-13 20:34:24 - INFO - [server.py:92] - 发送响应: {
  "status_code": 200,
  "content_length": 37,
  "content_type": "application/json",
  "timestamp": "2025-07-13T20:34:24.742313",
  "response_body": "{\"device\":\"cuda\",\"status\":\"healthy\"}\n"
}
2025-07-13 20:34:24 - INFO - [server.py:92] - 发送响应: {
  "status_code": 200,
  "content_length": 37,
  "content_type": "application/json",
  "timestamp": "2025-07-13T20:34:24.742313",
  "response_body": "{\"device\":\"cuda\",\"status\":\"healthy\"}\n"
}
2025-07-13 20:34:24 - INFO - [_internal.py:97] - 127.0.0.1 - - [13/Jul/2025 20:34:24] "GET /health HTTP/1.1" 200 -
2025-07-13 20:34:24 - INFO - [_internal.py:97] - 127.0.0.1 - - [13/Jul/2025 20:34:24] "GET /health HTTP/1.1" 200 -
2025-07-13 20:34:29 - INFO - [server.py:73] - 收到请求: {
  "method": "OPTIONS",
  "url": "http://localhost:9000/generate",
  "remote_addr": "127.0.0.1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36 Edg/138.0.0.0",
  "timestamp": "2025-07-13T20:34:29.852706"
}
2025-07-13 20:34:29 - INFO - [server.py:73] - 收到请求: {
  "method": "OPTIONS",
  "url": "http://localhost:9000/generate",
  "remote_addr": "127.0.0.1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36 Edg/138.0.0.0",
  "timestamp": "2025-07-13T20:34:29.852706"
}
2025-07-13 20:34:29 - INFO - [server.py:92] - 发送响应: {
  "status_code": 200,
  "content_length": null,
  "content_type": "text/html; charset=utf-8",
  "timestamp": "2025-07-13T20:34:29.853198"
}
2025-07-13 20:34:29 - INFO - [server.py:92] - 发送响应: {
  "status_code": 200,
  "content_length": null,
  "content_type": "text/html; charset=utf-8",
  "timestamp": "2025-07-13T20:34:29.853198"
}
2025-07-13 20:34:29 - INFO - [_internal.py:97] - 127.0.0.1 - - [13/Jul/2025 20:34:29] "OPTIONS /generate HTTP/1.1" 200 -
2025-07-13 20:34:29 - INFO - [_internal.py:97] - 127.0.0.1 - - [13/Jul/2025 20:34:29] "OPTIONS /generate HTTP/1.1" 200 -
2025-07-13 20:34:30 - INFO - [server.py:73] - 收到请求: {
  "method": "POST",
  "url": "http://localhost:9000/generate",
  "remote_addr": "127.0.0.1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36 Edg/138.0.0.0",
  "timestamp": "2025-07-13T20:34:30.066912",
  "json_data": {
    "messages": [
      {
        "role": "user",
        "content": "你好"
      }
    ],
    "settings": {
      "temperature": 0.7,
      "top_p": 0.95,
      "gen_length": 64,
      "num_beams": 4,
      "steps": 32,
      "cfg_scale": 1,
      "constraints": ""
    }
  }
}
2025-07-13 20:34:30 - INFO - [server.py:73] - 收到请求: {
  "method": "POST",
  "url": "http://localhost:9000/generate",
  "remote_addr": "127.0.0.1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36 Edg/138.0.0.0",
  "timestamp": "2025-07-13T20:34:30.066912",
  "json_data": {
    "messages": [
      {
        "role": "user",
        "content": "你好"
      }
    ],
    "settings": {
      "temperature": 0.7,
      "top_p": 0.95,
      "gen_length": 64,
      "num_beams": 4,
      "steps": 32,
      "cfg_scale": 1,
      "constraints": ""
    }
  }
}
2025-07-13 20:34:30 - INFO - [server.py:429] - [req_1752410070067] 收到生成请求
2025-07-13 20:34:30 - INFO - [server.py:429] - [req_1752410070067] 收到生成请求
2025-07-13 20:34:30 - INFO - [server.py:437] - [req_1752410070067] 请求数据详情:
2025-07-13 20:34:30 - INFO - [server.py:437] - [req_1752410070067] 请求数据详情:
2025-07-13 20:34:30 - INFO - [server.py:438] - [req_1752410070067] - 消息数量: 1
2025-07-13 20:34:30 - INFO - [server.py:438] - [req_1752410070067] - 消息数量: 1
2025-07-13 20:34:30 - INFO - [server.py:439] - [req_1752410070067] - 设置参数: {
  "temperature": 0.7,
  "top_p": 0.95,
  "gen_length": 64,
  "num_beams": 4,
  "steps": 32,
  "cfg_scale": 1,
  "constraints": ""
}
2025-07-13 20:34:30 - INFO - [server.py:439] - [req_1752410070067] - 设置参数: {
  "temperature": 0.7,
  "top_p": 0.95,
  "gen_length": 64,
  "num_beams": 4,
  "steps": 32,
  "cfg_scale": 1,
  "constraints": ""
}
2025-07-13 20:34:30 - DEBUG - [server.py:440] - [req_1752410070067] - 完整消息列表: [
  {
    "role": "user",
    "content": "你好"
  }
]
2025-07-13 20:34:30 - INFO - [server.py:451] - [req_1752410070067] 开始生成响应...
2025-07-13 20:34:30 - INFO - [server.py:451] - [req_1752410070067] 开始生成响应...
2025-07-13 20:34:30 - INFO - [server.py:201] - ============================================================
2025-07-13 20:34:30 - INFO - [server.py:201] - ============================================================
2025-07-13 20:34:30 - INFO - [server.py:202] - 开始生成响应
2025-07-13 20:34:30 - INFO - [server.py:202] - 开始生成响应
2025-07-13 20:34:30 - INFO - [server.py:203] - 输入消息数量: 1
2025-07-13 20:34:30 - INFO - [server.py:203] - 输入消息数量: 1
2025-07-13 20:34:30 - INFO - [server.py:205] - 消息 1: 角色=user, 内容长度=2
2025-07-13 20:34:30 - INFO - [server.py:205] - 消息 1: 角色=user, 内容长度=2
2025-07-13 20:34:30 - DEBUG - [server.py:206] - 消息 1 内容: 你好
2025-07-13 20:34:30 - INFO - [server.py:208] - 设置参数: {
  "temperature": 0.7,
  "top_p": 0.95,
  "gen_length": 64,
  "num_beams": 4,
  "steps": 32,
  "cfg_scale": 1,
  "constraints": ""
}
2025-07-13 20:34:30 - INFO - [server.py:208] - 设置参数: {
  "temperature": 0.7,
  "top_p": 0.95,
  "gen_length": 64,
  "num_beams": 4,
  "steps": 32,
  "cfg_scale": 1,
  "constraints": ""
}
2025-07-13 20:34:30 - INFO - [server.py:220] - 解析后的约束: {}
2025-07-13 20:34:30 - INFO - [server.py:220] - 解析后的约束: {}
2025-07-13 20:34:30 - INFO - [server.py:225] - 生成前GPU内存使用: 14.94GB
2025-07-13 20:34:30 - INFO - [server.py:225] - 生成前GPU内存使用: 14.94GB
2025-07-13 20:34:30 - INFO - [server.py:228] - 准备输入prompt...
2025-07-13 20:34:30 - INFO - [server.py:228] - 准备输入prompt...
2025-07-13 20:34:30 - DEBUG - [server.py:230] - 格式化后的chat输入: <|startoftext|><|start_header_id|>user<|end_header_id|>

你好<|eot_id|><|start_header_id|>assistant<|end_header_id|>


2025-07-13 20:34:30 - INFO - [server.py:234] - 输入token数量: 14
2025-07-13 20:34:30 - INFO - [server.py:234] - 输入token数量: 14
2025-07-13 20:34:30 - INFO - [server.py:241] - 序列总长度: 78, prompt长度: 14, 生成长度: 64
2025-07-13 20:34:30 - INFO - [server.py:241] - 序列总长度: 78, prompt长度: 14, 生成长度: 64
2025-07-13 20:34:30 - INFO - [server.py:250] - 应用约束数量: 0
2025-07-13 20:34:30 - INFO - [server.py:250] - 应用约束数量: 0
2025-07-13 20:34:30 - INFO - [server.py:270] - 块处理配置: 块长度=32, 块数量=2, 每块步数=16
2025-07-13 20:34:30 - INFO - [server.py:270] - 块处理配置: 块长度=32, 块数量=2, 每块步数=16
2025-07-13 20:34:30 - INFO - [server.py:274] - 处理第 1/2 块...
2025-07-13 20:34:30 - INFO - [server.py:274] - 处理第 1/2 块...
2025-07-13 20:34:30 - INFO - [server.py:274] - 处理第 2/2 块...
2025-07-13 20:34:30 - INFO - [server.py:274] - 处理第 2/2 块...
2025-07-13 20:34:30 - INFO - [server.py:381] - 生成后GPU内存使用: 17.25GB
2025-07-13 20:34:30 - INFO - [server.py:381] - 生成后GPU内存使用: 17.25GB
2025-07-13 20:34:30 - INFO - [server.py:383] - 生成完成!
2025-07-13 20:34:30 - INFO - [server.py:383] - 生成完成!
2025-07-13 20:34:30 - INFO - [server.py:384] - 响应文本长度: 43
2025-07-13 20:34:30 - INFO - [server.py:384] - 响应文本长度: 43
2025-07-13 20:34:30 - INFO - [server.py:385] - 可视化步骤数: 17
2025-07-13 20:34:30 - INFO - [server.py:385] - 可视化步骤数: 17
2025-07-13 20:34:30 - INFO - [server.py:386] - 生成耗时: 0.70秒
2025-07-13 20:34:30 - INFO - [server.py:386] - 生成耗时: 0.70秒
2025-07-13 20:34:30 - DEBUG - [server.py:387] - 生成的响应文本: 兴趣爱好
* 学业
* 工作
* 旅行
* 兴趣爱好
* 编程
* 技术
* 其他话题
2025-07-13 20:34:30 - INFO - [server.py:388] - ============================================================
2025-07-13 20:34:30 - INFO - [server.py:388] - ============================================================
2025-07-13 20:34:30 - INFO - [server.py:460] - [req_1752410070067] 生成成功!
2025-07-13 20:34:30 - INFO - [server.py:460] - [req_1752410070067] 生成成功!
2025-07-13 20:34:30 - INFO - [server.py:461] - [req_1752410070067] 响应长度: 43
2025-07-13 20:34:30 - INFO - [server.py:461] - [req_1752410070067] 响应长度: 43
2025-07-13 20:34:30 - INFO - [server.py:462] - [req_1752410070067] 可视化步骤: 17
2025-07-13 20:34:30 - INFO - [server.py:462] - [req_1752410070067] 可视化步骤: 17
2025-07-13 20:34:30 - INFO - [server.py:463] - [req_1752410070067] 总耗时: 0.71秒
2025-07-13 20:34:30 - INFO - [server.py:463] - [req_1752410070067] 总耗时: 0.71秒
2025-07-13 20:34:30 - DEBUG - [server.py:464] - [req_1752410070067] 响应文本: 兴趣爱好
* 学业
* 工作
* 旅行
* 兴趣爱好
* 编程
* 技术
* 其他话题
2025-07-13 20:34:30 - INFO - [server.py:92] - 发送响应: {
  "status_code": 200,
  "content_length": 22364,
  "content_type": "application/json",
  "timestamp": "2025-07-13T20:34:30.774106"
}
2025-07-13 20:34:30 - INFO - [server.py:92] - 发送响应: {
  "status_code": 200,
  "content_length": 22364,
  "content_type": "application/json",
  "timestamp": "2025-07-13T20:34:30.774106"
}
2025-07-13 20:34:30 - INFO - [_internal.py:97] - 127.0.0.1 - - [13/Jul/2025 20:34:30] "POST /generate HTTP/1.1" 200 -
2025-07-13 20:34:30 - INFO - [_internal.py:97] - 127.0.0.1 - - [13/Jul/2025 20:34:30] "POST /generate HTTP/1.1" 200 -
2025-07-13 20:34:53 - INFO - [server.py:73] - 收到请求: {
  "method": "GET",
  "url": "http://localhost:9000/health",
  "remote_addr": "127.0.0.1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36 Edg/138.0.0.0",
  "timestamp": "2025-07-13T20:34:53.823215"
}
2025-07-13 20:34:53 - INFO - [server.py:73] - 收到请求: {
  "method": "GET",
  "url": "http://localhost:9000/health",
  "remote_addr": "127.0.0.1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36 Edg/138.0.0.0",
  "timestamp": "2025-07-13T20:34:53.823215"
}
2025-07-13 20:34:53 - INFO - [server.py:92] - 发送响应: {
  "status_code": 200,
  "content_length": 37,
  "content_type": "application/json",
  "timestamp": "2025-07-13T20:34:53.824085",
  "response_body": "{\"device\":\"cuda\",\"status\":\"healthy\"}\n"
}
2025-07-13 20:34:53 - INFO - [server.py:92] - 发送响应: {
  "status_code": 200,
  "content_length": 37,
  "content_type": "application/json",
  "timestamp": "2025-07-13T20:34:53.824085",
  "response_body": "{\"device\":\"cuda\",\"status\":\"healthy\"}\n"
}
2025-07-13 20:34:53 - INFO - [_internal.py:97] - 127.0.0.1 - - [13/Jul/2025 20:34:53] "GET /health HTTP/1.1" 200 -
2025-07-13 20:34:53 - INFO - [_internal.py:97] - 127.0.0.1 - - [13/Jul/2025 20:34:53] "GET /health HTTP/1.1" 200 -
2025-07-13 20:35:24 - INFO - [server.py:73] - 收到请求: {
  "method": "GET",
  "url": "http://localhost:9000/health",
  "remote_addr": "127.0.0.1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36 Edg/138.0.0.0",
  "timestamp": "2025-07-13T20:35:24.184834"
}
2025-07-13 20:35:24 - INFO - [server.py:73] - 收到请求: {
  "method": "GET",
  "url": "http://localhost:9000/health",
  "remote_addr": "127.0.0.1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36 Edg/138.0.0.0",
  "timestamp": "2025-07-13T20:35:24.184834"
}
2025-07-13 20:35:24 - INFO - [server.py:92] - 发送响应: {
  "status_code": 200,
  "content_length": 37,
  "content_type": "application/json",
  "timestamp": "2025-07-13T20:35:24.185654",
  "response_body": "{\"device\":\"cuda\",\"status\":\"healthy\"}\n"
}
2025-07-13 20:35:24 - INFO - [server.py:92] - 发送响应: {
  "status_code": 200,
  "content_length": 37,
  "content_type": "application/json",
  "timestamp": "2025-07-13T20:35:24.185654",
  "response_body": "{\"device\":\"cuda\",\"status\":\"healthy\"}\n"
}
2025-07-13 20:35:24 - INFO - [_internal.py:97] - 127.0.0.1 - - [13/Jul/2025 20:35:24] "GET /health HTTP/1.1" 200 -
2025-07-13 20:35:24 - INFO - [_internal.py:97] - 127.0.0.1 - - [13/Jul/2025 20:35:24] "GET /health HTTP/1.1" 200 -
2025-07-13 20:35:38 - INFO - [server.py:73] - 收到请求: {
  "method": "OPTIONS",
  "url": "http://localhost:9000/generate",
  "remote_addr": "127.0.0.1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36 Edg/138.0.0.0",
  "timestamp": "2025-07-13T20:35:38.604602"
}
2025-07-13 20:35:38 - INFO - [server.py:73] - 收到请求: {
  "method": "OPTIONS",
  "url": "http://localhost:9000/generate",
  "remote_addr": "127.0.0.1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36 Edg/138.0.0.0",
  "timestamp": "2025-07-13T20:35:38.604602"
}
2025-07-13 20:35:38 - INFO - [server.py:92] - 发送响应: {
  "status_code": 200,
  "content_length": null,
  "content_type": "text/html; charset=utf-8",
  "timestamp": "2025-07-13T20:35:38.605227"
}
2025-07-13 20:35:38 - INFO - [server.py:92] - 发送响应: {
  "status_code": 200,
  "content_length": null,
  "content_type": "text/html; charset=utf-8",
  "timestamp": "2025-07-13T20:35:38.605227"
}
2025-07-13 20:35:38 - INFO - [_internal.py:97] - 127.0.0.1 - - [13/Jul/2025 20:35:38] "OPTIONS /generate HTTP/1.1" 200 -
2025-07-13 20:35:38 - INFO - [_internal.py:97] - 127.0.0.1 - - [13/Jul/2025 20:35:38] "OPTIONS /generate HTTP/1.1" 200 -
2025-07-13 20:35:39 - INFO - [server.py:73] - 收到请求: {
  "method": "POST",
  "url": "http://localhost:9000/generate",
  "remote_addr": "127.0.0.1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36 Edg/138.0.0.0",
  "timestamp": "2025-07-13T20:35:39.069509",
  "json_data": {
    "messages": [
      {
        "role": "user",
        "content": "你好"
      },
      {
        "role": "assistant",
        "content": "兴趣爱好\n* 学业\n* 工作\n* 旅行\n* 兴趣爱好\n* 编程\n* 技术\n* 其他话题"
      },
      {
        "role": "user",
        "content": "你好"
      }
    ],
    "settings": {
      "temperature": 0,
      "top_p": 0,
      "gen_length": 64,
      "num_beams": 1,
      "steps": 32,
      "cfg_scale": 0,
      "constraints": ""
    }
  }
}
2025-07-13 20:35:39 - INFO - [server.py:73] - 收到请求: {
  "method": "POST",
  "url": "http://localhost:9000/generate",
  "remote_addr": "127.0.0.1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36 Edg/138.0.0.0",
  "timestamp": "2025-07-13T20:35:39.069509",
  "json_data": {
    "messages": [
      {
        "role": "user",
        "content": "你好"
      },
      {
        "role": "assistant",
        "content": "兴趣爱好\n* 学业\n* 工作\n* 旅行\n* 兴趣爱好\n* 编程\n* 技术\n* 其他话题"
      },
      {
        "role": "user",
        "content": "你好"
      }
    ],
    "settings": {
      "temperature": 0,
      "top_p": 0,
      "gen_length": 64,
      "num_beams": 1,
      "steps": 32,
      "cfg_scale": 0,
      "constraints": ""
    }
  }
}
2025-07-13 20:35:39 - INFO - [server.py:429] - [req_1752410139070] 收到生成请求
2025-07-13 20:35:39 - INFO - [server.py:429] - [req_1752410139070] 收到生成请求
2025-07-13 20:35:39 - INFO - [server.py:437] - [req_1752410139070] 请求数据详情:
2025-07-13 20:35:39 - INFO - [server.py:437] - [req_1752410139070] 请求数据详情:
2025-07-13 20:35:39 - INFO - [server.py:438] - [req_1752410139070] - 消息数量: 3
2025-07-13 20:35:39 - INFO - [server.py:438] - [req_1752410139070] - 消息数量: 3
2025-07-13 20:35:39 - INFO - [server.py:439] - [req_1752410139070] - 设置参数: {
  "temperature": 0,
  "top_p": 0,
  "gen_length": 64,
  "num_beams": 1,
  "steps": 32,
  "cfg_scale": 0,
  "constraints": ""
}
2025-07-13 20:35:39 - INFO - [server.py:439] - [req_1752410139070] - 设置参数: {
  "temperature": 0,
  "top_p": 0,
  "gen_length": 64,
  "num_beams": 1,
  "steps": 32,
  "cfg_scale": 0,
  "constraints": ""
}
2025-07-13 20:35:39 - DEBUG - [server.py:440] - [req_1752410139070] - 完整消息列表: [
  {
    "role": "user",
    "content": "你好"
  },
  {
    "role": "assistant",
    "content": "兴趣爱好\n* 学业\n* 工作\n* 旅行\n* 兴趣爱好\n* 编程\n* 技术\n* 其他话题"
  },
  {
    "role": "user",
    "content": "你好"
  }
]
2025-07-13 20:35:39 - INFO - [server.py:451] - [req_1752410139070] 开始生成响应...
2025-07-13 20:35:39 - INFO - [server.py:451] - [req_1752410139070] 开始生成响应...
2025-07-13 20:35:39 - INFO - [server.py:201] - ============================================================
2025-07-13 20:35:39 - INFO - [server.py:201] - ============================================================
2025-07-13 20:35:39 - INFO - [server.py:202] - 开始生成响应
2025-07-13 20:35:39 - INFO - [server.py:202] - 开始生成响应
2025-07-13 20:35:39 - INFO - [server.py:203] - 输入消息数量: 3
2025-07-13 20:35:39 - INFO - [server.py:203] - 输入消息数量: 3
2025-07-13 20:35:39 - INFO - [server.py:205] - 消息 1: 角色=user, 内容长度=2
2025-07-13 20:35:39 - INFO - [server.py:205] - 消息 1: 角色=user, 内容长度=2
2025-07-13 20:35:39 - DEBUG - [server.py:206] - 消息 1 内容: 你好
2025-07-13 20:35:39 - INFO - [server.py:205] - 消息 2: 角色=assistant, 内容长度=43
2025-07-13 20:35:39 - INFO - [server.py:205] - 消息 2: 角色=assistant, 内容长度=43
2025-07-13 20:35:39 - DEBUG - [server.py:206] - 消息 2 内容: 兴趣爱好
* 学业
* 工作
* 旅行
* 兴趣爱好
* 编程
* 技术
* 其他话题
2025-07-13 20:35:39 - INFO - [server.py:205] - 消息 3: 角色=user, 内容长度=2
2025-07-13 20:35:39 - INFO - [server.py:205] - 消息 3: 角色=user, 内容长度=2
2025-07-13 20:35:39 - DEBUG - [server.py:206] - 消息 3 内容: 你好
2025-07-13 20:35:39 - INFO - [server.py:208] - 设置参数: {
  "temperature": 0,
  "top_p": 0,
  "gen_length": 64,
  "num_beams": 1,
  "steps": 32,
  "cfg_scale": 0,
  "constraints": ""
}
2025-07-13 20:35:39 - INFO - [server.py:208] - 设置参数: {
  "temperature": 0,
  "top_p": 0,
  "gen_length": 64,
  "num_beams": 1,
  "steps": 32,
  "cfg_scale": 0,
  "constraints": ""
}
2025-07-13 20:35:39 - INFO - [server.py:220] - 解析后的约束: {}
2025-07-13 20:35:39 - INFO - [server.py:220] - 解析后的约束: {}
2025-07-13 20:35:39 - INFO - [server.py:225] - 生成前GPU内存使用: 14.94GB
2025-07-13 20:35:39 - INFO - [server.py:225] - 生成前GPU内存使用: 14.94GB
2025-07-13 20:35:39 - INFO - [server.py:228] - 准备输入prompt...
2025-07-13 20:35:39 - INFO - [server.py:228] - 准备输入prompt...
2025-07-13 20:35:39 - DEBUG - [server.py:230] - 格式化后的chat输入: <|startoftext|><|start_header_id|>user<|end_header_id|>

你好<|eot_id|><|start_header_id|>assistant<|end_header_id|>

兴趣爱好
* 学业
* 工作
* 旅行
* 兴趣爱好
* 编程
* 技术
* 其他话题<|eot_id|><|start_header_id|>user<|end_header_id|>

你好<|eot_id|><|start_header_id|>assistant<|end_header_id|>


2025-07-13 20:35:39 - INFO - [server.py:234] - 输入token数量: 55
2025-07-13 20:35:39 - INFO - [server.py:234] - 输入token数量: 55
2025-07-13 20:35:39 - INFO - [server.py:241] - 序列总长度: 119, prompt长度: 55, 生成长度: 64
2025-07-13 20:35:39 - INFO - [server.py:241] - 序列总长度: 119, prompt长度: 55, 生成长度: 64
2025-07-13 20:35:39 - INFO - [server.py:250] - 应用约束数量: 0
2025-07-13 20:35:39 - INFO - [server.py:250] - 应用约束数量: 0
2025-07-13 20:35:39 - INFO - [server.py:270] - 块处理配置: 块长度=32, 块数量=2, 每块步数=16
2025-07-13 20:35:39 - INFO - [server.py:270] - 块处理配置: 块长度=32, 块数量=2, 每块步数=16
2025-07-13 20:35:39 - INFO - [server.py:274] - 处理第 1/2 块...
2025-07-13 20:35:39 - INFO - [server.py:274] - 处理第 1/2 块...
2025-07-13 20:35:39 - INFO - [server.py:274] - 处理第 2/2 块...
2025-07-13 20:35:39 - INFO - [server.py:274] - 处理第 2/2 块...
2025-07-13 20:35:39 - INFO - [server.py:381] - 生成后GPU内存使用: 16.61GB
2025-07-13 20:35:39 - INFO - [server.py:381] - 生成后GPU内存使用: 16.61GB
2025-07-13 20:35:39 - INFO - [server.py:383] - 生成完成!
2025-07-13 20:35:39 - INFO - [server.py:383] - 生成完成!
2025-07-13 20:35:39 - INFO - [server.py:384] - 响应文本长度: 0
2025-07-13 20:35:39 - INFO - [server.py:384] - 响应文本长度: 0
2025-07-13 20:35:39 - INFO - [server.py:385] - 可视化步骤数: 17
2025-07-13 20:35:39 - INFO - [server.py:385] - 可视化步骤数: 17
2025-07-13 20:35:39 - INFO - [server.py:386] - 生成耗时: 0.57秒
2025-07-13 20:35:39 - INFO - [server.py:386] - 生成耗时: 0.57秒
2025-07-13 20:35:39 - DEBUG - [server.py:387] - 生成的响应文本: 
2025-07-13 20:35:39 - INFO - [server.py:388] - ============================================================
2025-07-13 20:35:39 - INFO - [server.py:388] - ============================================================
2025-07-13 20:35:39 - INFO - [server.py:460] - [req_1752410139070] 生成成功!
2025-07-13 20:35:39 - INFO - [server.py:460] - [req_1752410139070] 生成成功!
2025-07-13 20:35:39 - INFO - [server.py:461] - [req_1752410139070] 响应长度: 0
2025-07-13 20:35:39 - INFO - [server.py:461] - [req_1752410139070] 响应长度: 0
2025-07-13 20:35:39 - INFO - [server.py:462] - [req_1752410139070] 可视化步骤: 17
2025-07-13 20:35:39 - INFO - [server.py:462] - [req_1752410139070] 可视化步骤: 17
2025-07-13 20:35:39 - INFO - [server.py:463] - [req_1752410139070] 总耗时: 0.57秒
2025-07-13 20:35:39 - INFO - [server.py:463] - [req_1752410139070] 总耗时: 0.57秒
2025-07-13 20:35:39 - DEBUG - [server.py:464] - [req_1752410139070] 响应文本: 
2025-07-13 20:35:39 - INFO - [server.py:92] - 发送响应: {
  "status_code": 200,
  "content_length": 21336,
  "content_type": "application/json",
  "timestamp": "2025-07-13T20:35:39.644179"
}
2025-07-13 20:35:39 - INFO - [server.py:92] - 发送响应: {
  "status_code": 200,
  "content_length": 21336,
  "content_type": "application/json",
  "timestamp": "2025-07-13T20:35:39.644179"
}
2025-07-13 20:35:39 - INFO - [_internal.py:97] - 127.0.0.1 - - [13/Jul/2025 20:35:39] "POST /generate HTTP/1.1" 200 -
2025-07-13 20:35:39 - INFO - [_internal.py:97] - 127.0.0.1 - - [13/Jul/2025 20:35:39] "POST /generate HTTP/1.1" 200 -
2025-07-13 20:35:53 - INFO - [server.py:73] - 收到请求: {
  "method": "GET",
  "url": "http://localhost:9000/health",
  "remote_addr": "127.0.0.1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36 Edg/138.0.0.0",
  "timestamp": "2025-07-13T20:35:53.746536"
}
2025-07-13 20:35:53 - INFO - [server.py:73] - 收到请求: {
  "method": "GET",
  "url": "http://localhost:9000/health",
  "remote_addr": "127.0.0.1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36 Edg/138.0.0.0",
  "timestamp": "2025-07-13T20:35:53.746536"
}
2025-07-13 20:35:53 - INFO - [server.py:92] - 发送响应: {
  "status_code": 200,
  "content_length": 37,
  "content_type": "application/json",
  "timestamp": "2025-07-13T20:35:53.746931",
  "response_body": "{\"device\":\"cuda\",\"status\":\"healthy\"}\n"
}
2025-07-13 20:35:53 - INFO - [server.py:92] - 发送响应: {
  "status_code": 200,
  "content_length": 37,
  "content_type": "application/json",
  "timestamp": "2025-07-13T20:35:53.746931",
  "response_body": "{\"device\":\"cuda\",\"status\":\"healthy\"}\n"
}
2025-07-13 20:35:53 - INFO - [_internal.py:97] - 127.0.0.1 - - [13/Jul/2025 20:35:53] "GET /health HTTP/1.1" 200 -
2025-07-13 20:35:53 - INFO - [_internal.py:97] - 127.0.0.1 - - [13/Jul/2025 20:35:53] "GET /health HTTP/1.1" 200 -
2025-07-13 20:36:13 - INFO - [server.py:73] - 收到请求: {
  "method": "OPTIONS",
  "url": "http://localhost:9000/generate",
  "remote_addr": "127.0.0.1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36 Edg/138.0.0.0",
  "timestamp": "2025-07-13T20:36:13.000474"
}
2025-07-13 20:36:13 - INFO - [server.py:73] - 收到请求: {
  "method": "OPTIONS",
  "url": "http://localhost:9000/generate",
  "remote_addr": "127.0.0.1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36 Edg/138.0.0.0",
  "timestamp": "2025-07-13T20:36:13.000474"
}
2025-07-13 20:36:13 - INFO - [server.py:92] - 发送响应: {
  "status_code": 200,
  "content_length": null,
  "content_type": "text/html; charset=utf-8",
  "timestamp": "2025-07-13T20:36:13.001369"
}
2025-07-13 20:36:13 - INFO - [server.py:92] - 发送响应: {
  "status_code": 200,
  "content_length": null,
  "content_type": "text/html; charset=utf-8",
  "timestamp": "2025-07-13T20:36:13.001369"
}
2025-07-13 20:36:13 - INFO - [_internal.py:97] - 127.0.0.1 - - [13/Jul/2025 20:36:13] "OPTIONS /generate HTTP/1.1" 200 -
2025-07-13 20:36:13 - INFO - [_internal.py:97] - 127.0.0.1 - - [13/Jul/2025 20:36:13] "OPTIONS /generate HTTP/1.1" 200 -
2025-07-13 20:36:13 - INFO - [server.py:73] - 收到请求: {
  "method": "POST",
  "url": "http://localhost:9000/generate",
  "remote_addr": "127.0.0.1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36 Edg/138.0.0.0",
  "timestamp": "2025-07-13T20:36:13.137909",
  "json_data": {
    "messages": [
      {
        "role": "user",
        "content": "你好"
      },
      {
        "role": "assistant",
        "content": "兴趣爱好\n* 学业\n* 工作\n* 旅行\n* 兴趣爱好\n* 编程\n* 技术\n* 其他话题"
      },
      {
        "role": "user",
        "content": "你好"
      },
      {
        "role": "assistant",
        "content": ""
      },
      {
        "role": "user",
        "content": "你好"
      }
    ],
    "settings": {
      "temperature": 0,
      "top_p": 0.15,
      "gen_length": 64,
      "num_beams": 2,
      "steps": 32,
      "cfg_scale": 0,
      "constraints": "0:我不好"
    }
  }
}
2025-07-13 20:36:13 - INFO - [server.py:73] - 收到请求: {
  "method": "POST",
  "url": "http://localhost:9000/generate",
  "remote_addr": "127.0.0.1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36 Edg/138.0.0.0",
  "timestamp": "2025-07-13T20:36:13.137909",
  "json_data": {
    "messages": [
      {
        "role": "user",
        "content": "你好"
      },
      {
        "role": "assistant",
        "content": "兴趣爱好\n* 学业\n* 工作\n* 旅行\n* 兴趣爱好\n* 编程\n* 技术\n* 其他话题"
      },
      {
        "role": "user",
        "content": "你好"
      },
      {
        "role": "assistant",
        "content": ""
      },
      {
        "role": "user",
        "content": "你好"
      }
    ],
    "settings": {
      "temperature": 0,
      "top_p": 0.15,
      "gen_length": 64,
      "num_beams": 2,
      "steps": 32,
      "cfg_scale": 0,
      "constraints": "0:我不好"
    }
  }
}
2025-07-13 20:36:13 - INFO - [server.py:429] - [req_1752410173138] 收到生成请求
2025-07-13 20:36:13 - INFO - [server.py:429] - [req_1752410173138] 收到生成请求
2025-07-13 20:36:13 - INFO - [server.py:437] - [req_1752410173138] 请求数据详情:
2025-07-13 20:36:13 - INFO - [server.py:437] - [req_1752410173138] 请求数据详情:
2025-07-13 20:36:13 - INFO - [server.py:438] - [req_1752410173138] - 消息数量: 5
2025-07-13 20:36:13 - INFO - [server.py:438] - [req_1752410173138] - 消息数量: 5
2025-07-13 20:36:13 - INFO - [server.py:439] - [req_1752410173138] - 设置参数: {
  "temperature": 0,
  "top_p": 0.15,
  "gen_length": 64,
  "num_beams": 2,
  "steps": 32,
  "cfg_scale": 0,
  "constraints": "0:我不好"
}
2025-07-13 20:36:13 - INFO - [server.py:439] - [req_1752410173138] - 设置参数: {
  "temperature": 0,
  "top_p": 0.15,
  "gen_length": 64,
  "num_beams": 2,
  "steps": 32,
  "cfg_scale": 0,
  "constraints": "0:我不好"
}
2025-07-13 20:36:13 - DEBUG - [server.py:440] - [req_1752410173138] - 完整消息列表: [
  {
    "role": "user",
    "content": "你好"
  },
  {
    "role": "assistant",
    "content": "兴趣爱好\n* 学业\n* 工作\n* 旅行\n* 兴趣爱好\n* 编程\n* 技术\n* 其他话题"
  },
  {
    "role": "user",
    "content": "你好"
  },
  {
    "role": "assistant",
    "content": ""
  },
  {
    "role": "user",
    "content": "你好"
  }
]
2025-07-13 20:36:13 - INFO - [server.py:451] - [req_1752410173138] 开始生成响应...
2025-07-13 20:36:13 - INFO - [server.py:451] - [req_1752410173138] 开始生成响应...
2025-07-13 20:36:13 - INFO - [server.py:201] - ============================================================
2025-07-13 20:36:13 - INFO - [server.py:201] - ============================================================
2025-07-13 20:36:13 - INFO - [server.py:202] - 开始生成响应
2025-07-13 20:36:13 - INFO - [server.py:202] - 开始生成响应
2025-07-13 20:36:13 - INFO - [server.py:203] - 输入消息数量: 5
2025-07-13 20:36:13 - INFO - [server.py:203] - 输入消息数量: 5
2025-07-13 20:36:13 - INFO - [server.py:205] - 消息 1: 角色=user, 内容长度=2
2025-07-13 20:36:13 - INFO - [server.py:205] - 消息 1: 角色=user, 内容长度=2
2025-07-13 20:36:13 - DEBUG - [server.py:206] - 消息 1 内容: 你好
2025-07-13 20:36:13 - INFO - [server.py:205] - 消息 2: 角色=assistant, 内容长度=43
2025-07-13 20:36:13 - INFO - [server.py:205] - 消息 2: 角色=assistant, 内容长度=43
2025-07-13 20:36:13 - DEBUG - [server.py:206] - 消息 2 内容: 兴趣爱好
* 学业
* 工作
* 旅行
* 兴趣爱好
* 编程
* 技术
* 其他话题
2025-07-13 20:36:13 - INFO - [server.py:205] - 消息 3: 角色=user, 内容长度=2
2025-07-13 20:36:13 - INFO - [server.py:205] - 消息 3: 角色=user, 内容长度=2
2025-07-13 20:36:13 - DEBUG - [server.py:206] - 消息 3 内容: 你好
2025-07-13 20:36:13 - INFO - [server.py:205] - 消息 4: 角色=assistant, 内容长度=0
2025-07-13 20:36:13 - INFO - [server.py:205] - 消息 4: 角色=assistant, 内容长度=0
2025-07-13 20:36:13 - DEBUG - [server.py:206] - 消息 4 内容: 
2025-07-13 20:36:13 - INFO - [server.py:205] - 消息 5: 角色=user, 内容长度=2
2025-07-13 20:36:13 - INFO - [server.py:205] - 消息 5: 角色=user, 内容长度=2
2025-07-13 20:36:13 - DEBUG - [server.py:206] - 消息 5 内容: 你好
2025-07-13 20:36:13 - INFO - [server.py:208] - 设置参数: {
  "temperature": 0,
  "top_p": 0.15,
  "gen_length": 64,
  "num_beams": 2,
  "steps": 32,
  "cfg_scale": 0,
  "constraints": "0:我不好"
}
2025-07-13 20:36:13 - INFO - [server.py:208] - 设置参数: {
  "temperature": 0,
  "top_p": 0.15,
  "gen_length": 64,
  "num_beams": 2,
  "steps": 32,
  "cfg_scale": 0,
  "constraints": "0:我不好"
}
2025-07-13 20:36:13 - INFO - [server.py:220] - 解析后的约束: {0: '我不好'}
2025-07-13 20:36:13 - INFO - [server.py:220] - 解析后的约束: {0: '我不好'}
2025-07-13 20:36:13 - INFO - [server.py:225] - 生成前GPU内存使用: 14.94GB
2025-07-13 20:36:13 - INFO - [server.py:225] - 生成前GPU内存使用: 14.94GB
2025-07-13 20:36:13 - INFO - [server.py:228] - 准备输入prompt...
2025-07-13 20:36:13 - INFO - [server.py:228] - 准备输入prompt...
2025-07-13 20:36:13 - DEBUG - [server.py:230] - 格式化后的chat输入: <|startoftext|><|start_header_id|>user<|end_header_id|>

你好<|eot_id|><|start_header_id|>assistant<|end_header_id|>

兴趣爱好
* 学业
* 工作
* 旅行
* 兴趣爱好
* 编程
* 技术
* 其他话题<|eot_id|><|start_header_id|>user<|end_header_id|>

你好<|eot_id|><|start_header_id|>assistant<|end_header_id|>

<|eot_id|><|start_header_id|>user<|end_header_id|>

你好<|eot_id|><|start_header_id|>assistant<|end_header_id|>


2025-07-13 20:36:13 - INFO - [server.py:234] - 输入token数量: 69
2025-07-13 20:36:13 - INFO - [server.py:234] - 输入token数量: 69
2025-07-13 20:36:13 - INFO - [server.py:241] - 序列总长度: 133, prompt长度: 69, 生成长度: 64
2025-07-13 20:36:13 - INFO - [server.py:241] - 序列总长度: 133, prompt长度: 69, 生成长度: 64
2025-07-13 20:36:13 - INFO - [server.py:250] - 应用约束数量: 2
2025-07-13 20:36:13 - INFO - [server.py:250] - 应用约束数量: 2
2025-07-13 20:36:13 - DEBUG - [server.py:255] - 约束位置 0 (绝对位置 69): token_id=5541
2025-07-13 20:36:13 - DEBUG - [server.py:255] - 约束位置 1 (绝对位置 70): token_id=7043
2025-07-13 20:36:13 - INFO - [server.py:270] - 块处理配置: 块长度=32, 块数量=2, 每块步数=16
2025-07-13 20:36:13 - INFO - [server.py:270] - 块处理配置: 块长度=32, 块数量=2, 每块步数=16
2025-07-13 20:36:13 - INFO - [server.py:274] - 处理第 1/2 块...
2025-07-13 20:36:13 - INFO - [server.py:274] - 处理第 1/2 块...
2025-07-13 20:36:13 - INFO - [server.py:274] - 处理第 2/2 块...
2025-07-13 20:36:13 - INFO - [server.py:274] - 处理第 2/2 块...
2025-07-13 20:36:13 - INFO - [server.py:381] - 生成后GPU内存使用: 16.81GB
2025-07-13 20:36:13 - INFO - [server.py:381] - 生成后GPU内存使用: 16.81GB
2025-07-13 20:36:13 - INFO - [server.py:383] - 生成完成!
2025-07-13 20:36:13 - INFO - [server.py:383] - 生成完成!
2025-07-13 20:36:13 - INFO - [server.py:384] - 响应文本长度: 4
2025-07-13 20:36:13 - INFO - [server.py:384] - 响应文本长度: 4
2025-07-13 20:36:13 - INFO - [server.py:385] - 可视化步骤数: 17
2025-07-13 20:36:13 - INFO - [server.py:385] - 可视化步骤数: 17
2025-07-13 20:36:13 - INFO - [server.py:386] - 生成耗时: 0.62秒
2025-07-13 20:36:13 - INFO - [server.py:386] - 生成耗时: 0.62秒
2025-07-13 20:36:13 - DEBUG - [server.py:387] - 生成的响应文本:  我不好
2025-07-13 20:36:13 - INFO - [server.py:388] - ============================================================
2025-07-13 20:36:13 - INFO - [server.py:388] - ============================================================
2025-07-13 20:36:13 - INFO - [server.py:460] - [req_1752410173138] 生成成功!
2025-07-13 20:36:13 - INFO - [server.py:460] - [req_1752410173138] 生成成功!
2025-07-13 20:36:13 - INFO - [server.py:461] - [req_1752410173138] 响应长度: 4
2025-07-13 20:36:13 - INFO - [server.py:461] - [req_1752410173138] 响应长度: 4
2025-07-13 20:36:13 - INFO - [server.py:462] - [req_1752410173138] 可视化步骤: 17
2025-07-13 20:36:13 - INFO - [server.py:462] - [req_1752410173138] 可视化步骤: 17
2025-07-13 20:36:13 - INFO - [server.py:463] - [req_1752410173138] 总耗时: 0.62秒
2025-07-13 20:36:13 - INFO - [server.py:463] - [req_1752410173138] 总耗时: 0.62秒
2025-07-13 20:36:13 - DEBUG - [server.py:464] - [req_1752410173138] 响应文本:  我不好
2025-07-13 20:36:13 - INFO - [server.py:92] - 发送响应: {
  "status_code": 200,
  "content_length": 21468,
  "content_type": "application/json",
  "timestamp": "2025-07-13T20:36:13.761521"
}
2025-07-13 20:36:13 - INFO - [server.py:92] - 发送响应: {
  "status_code": 200,
  "content_length": 21468,
  "content_type": "application/json",
  "timestamp": "2025-07-13T20:36:13.761521"
}
2025-07-13 20:36:13 - INFO - [_internal.py:97] - 127.0.0.1 - - [13/Jul/2025 20:36:13] "POST /generate HTTP/1.1" 200 -
2025-07-13 20:36:13 - INFO - [_internal.py:97] - 127.0.0.1 - - [13/Jul/2025 20:36:13] "POST /generate HTTP/1.1" 200 -
2025-07-13 20:36:24 - INFO - [server.py:73] - 收到请求: {
  "method": "GET",
  "url": "http://localhost:9000/health",
  "remote_addr": "127.0.0.1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36 Edg/138.0.0.0",
  "timestamp": "2025-07-13T20:36:24.188691"
}
2025-07-13 20:36:24 - INFO - [server.py:73] - 收到请求: {
  "method": "GET",
  "url": "http://localhost:9000/health",
  "remote_addr": "127.0.0.1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36 Edg/138.0.0.0",
  "timestamp": "2025-07-13T20:36:24.188691"
}
2025-07-13 20:36:24 - INFO - [server.py:92] - 发送响应: {
  "status_code": 200,
  "content_length": 37,
  "content_type": "application/json",
  "timestamp": "2025-07-13T20:36:24.189246",
  "response_body": "{\"device\":\"cuda\",\"status\":\"healthy\"}\n"
}
2025-07-13 20:36:24 - INFO - [server.py:92] - 发送响应: {
  "status_code": 200,
  "content_length": 37,
  "content_type": "application/json",
  "timestamp": "2025-07-13T20:36:24.189246",
  "response_body": "{\"device\":\"cuda\",\"status\":\"healthy\"}\n"
}
2025-07-13 20:36:24 - INFO - [_internal.py:97] - 127.0.0.1 - - [13/Jul/2025 20:36:24] "GET /health HTTP/1.1" 200 -
2025-07-13 20:36:24 - INFO - [_internal.py:97] - 127.0.0.1 - - [13/Jul/2025 20:36:24] "GET /health HTTP/1.1" 200 -
2025-07-13 20:36:32 - INFO - [server.py:73] - 收到请求: {
  "method": "OPTIONS",
  "url": "http://localhost:9000/generate",
  "remote_addr": "127.0.0.1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36 Edg/138.0.0.0",
  "timestamp": "2025-07-13T20:36:32.497755"
}
2025-07-13 20:36:32 - INFO - [server.py:73] - 收到请求: {
  "method": "OPTIONS",
  "url": "http://localhost:9000/generate",
  "remote_addr": "127.0.0.1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36 Edg/138.0.0.0",
  "timestamp": "2025-07-13T20:36:32.497755"
}
2025-07-13 20:36:32 - INFO - [server.py:92] - 发送响应: {
  "status_code": 200,
  "content_length": null,
  "content_type": "text/html; charset=utf-8",
  "timestamp": "2025-07-13T20:36:32.498790"
}
2025-07-13 20:36:32 - INFO - [server.py:92] - 发送响应: {
  "status_code": 200,
  "content_length": null,
  "content_type": "text/html; charset=utf-8",
  "timestamp": "2025-07-13T20:36:32.498790"
}
2025-07-13 20:36:32 - INFO - [_internal.py:97] - 127.0.0.1 - - [13/Jul/2025 20:36:32] "OPTIONS /generate HTTP/1.1" 200 -
2025-07-13 20:36:32 - INFO - [_internal.py:97] - 127.0.0.1 - - [13/Jul/2025 20:36:32] "OPTIONS /generate HTTP/1.1" 200 -
2025-07-13 20:36:33 - INFO - [server.py:73] - 收到请求: {
  "method": "POST",
  "url": "http://localhost:9000/generate",
  "remote_addr": "127.0.0.1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36 Edg/138.0.0.0",
  "timestamp": "2025-07-13T20:36:33.176068",
  "json_data": {
    "messages": [
      {
        "role": "user",
        "content": "你好"
      },
      {
        "role": "assistant",
        "content": "兴趣爱好\n* 学业\n* 工作\n* 旅行\n* 兴趣爱好\n* 编程\n* 技术\n* 其他话题"
      },
      {
        "role": "user",
        "content": "你好"
      },
      {
        "role": "assistant",
        "content": ""
      },
      {
        "role": "user",
        "content": "你好"
      },
      {
        "role": "assistant",
        "content": " 我不好"
      },
      {
        "role": "user",
        "content": "你好"
      }
    ],
    "settings": {
      "temperature": 0,
      "top_p": 0.5,
      "gen_length": 64,
      "num_beams": 2,
      "steps": 32,
      "cfg_scale": 0,
      "constraints": "0:我不好"
    }
  }
}
2025-07-13 20:36:33 - INFO - [server.py:73] - 收到请求: {
  "method": "POST",
  "url": "http://localhost:9000/generate",
  "remote_addr": "127.0.0.1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36 Edg/138.0.0.0",
  "timestamp": "2025-07-13T20:36:33.176068",
  "json_data": {
    "messages": [
      {
        "role": "user",
        "content": "你好"
      },
      {
        "role": "assistant",
        "content": "兴趣爱好\n* 学业\n* 工作\n* 旅行\n* 兴趣爱好\n* 编程\n* 技术\n* 其他话题"
      },
      {
        "role": "user",
        "content": "你好"
      },
      {
        "role": "assistant",
        "content": ""
      },
      {
        "role": "user",
        "content": "你好"
      },
      {
        "role": "assistant",
        "content": " 我不好"
      },
      {
        "role": "user",
        "content": "你好"
      }
    ],
    "settings": {
      "temperature": 0,
      "top_p": 0.5,
      "gen_length": 64,
      "num_beams": 2,
      "steps": 32,
      "cfg_scale": 0,
      "constraints": "0:我不好"
    }
  }
}
2025-07-13 20:36:33 - INFO - [server.py:429] - [req_1752410193176] 收到生成请求
2025-07-13 20:36:33 - INFO - [server.py:429] - [req_1752410193176] 收到生成请求
2025-07-13 20:36:33 - INFO - [server.py:437] - [req_1752410193176] 请求数据详情:
2025-07-13 20:36:33 - INFO - [server.py:437] - [req_1752410193176] 请求数据详情:
2025-07-13 20:36:33 - INFO - [server.py:438] - [req_1752410193176] - 消息数量: 7
2025-07-13 20:36:33 - INFO - [server.py:438] - [req_1752410193176] - 消息数量: 7
2025-07-13 20:36:33 - INFO - [server.py:439] - [req_1752410193176] - 设置参数: {
  "temperature": 0,
  "top_p": 0.5,
  "gen_length": 64,
  "num_beams": 2,
  "steps": 32,
  "cfg_scale": 0,
  "constraints": "0:我不好"
}
2025-07-13 20:36:33 - INFO - [server.py:439] - [req_1752410193176] - 设置参数: {
  "temperature": 0,
  "top_p": 0.5,
  "gen_length": 64,
  "num_beams": 2,
  "steps": 32,
  "cfg_scale": 0,
  "constraints": "0:我不好"
}
2025-07-13 20:36:33 - DEBUG - [server.py:440] - [req_1752410193176] - 完整消息列表: [
  {
    "role": "user",
    "content": "你好"
  },
  {
    "role": "assistant",
    "content": "兴趣爱好\n* 学业\n* 工作\n* 旅行\n* 兴趣爱好\n* 编程\n* 技术\n* 其他话题"
  },
  {
    "role": "user",
    "content": "你好"
  },
  {
    "role": "assistant",
    "content": ""
  },
  {
    "role": "user",
    "content": "你好"
  },
  {
    "role": "assistant",
    "content": " 我不好"
  },
  {
    "role": "user",
    "content": "你好"
  }
]
2025-07-13 20:36:33 - INFO - [server.py:451] - [req_1752410193176] 开始生成响应...
2025-07-13 20:36:33 - INFO - [server.py:451] - [req_1752410193176] 开始生成响应...
2025-07-13 20:36:33 - INFO - [server.py:201] - ============================================================
2025-07-13 20:36:33 - INFO - [server.py:201] - ============================================================
2025-07-13 20:36:33 - INFO - [server.py:202] - 开始生成响应
2025-07-13 20:36:33 - INFO - [server.py:202] - 开始生成响应
2025-07-13 20:36:33 - INFO - [server.py:203] - 输入消息数量: 7
2025-07-13 20:36:33 - INFO - [server.py:203] - 输入消息数量: 7
2025-07-13 20:36:33 - INFO - [server.py:205] - 消息 1: 角色=user, 内容长度=2
2025-07-13 20:36:33 - INFO - [server.py:205] - 消息 1: 角色=user, 内容长度=2
2025-07-13 20:36:33 - DEBUG - [server.py:206] - 消息 1 内容: 你好
2025-07-13 20:36:33 - INFO - [server.py:205] - 消息 2: 角色=assistant, 内容长度=43
2025-07-13 20:36:33 - INFO - [server.py:205] - 消息 2: 角色=assistant, 内容长度=43
2025-07-13 20:36:33 - DEBUG - [server.py:206] - 消息 2 内容: 兴趣爱好
* 学业
* 工作
* 旅行
* 兴趣爱好
* 编程
* 技术
* 其他话题
2025-07-13 20:36:33 - INFO - [server.py:205] - 消息 3: 角色=user, 内容长度=2
2025-07-13 20:36:33 - INFO - [server.py:205] - 消息 3: 角色=user, 内容长度=2
2025-07-13 20:36:33 - DEBUG - [server.py:206] - 消息 3 内容: 你好
2025-07-13 20:36:33 - INFO - [server.py:205] - 消息 4: 角色=assistant, 内容长度=0
2025-07-13 20:36:33 - INFO - [server.py:205] - 消息 4: 角色=assistant, 内容长度=0
2025-07-13 20:36:33 - DEBUG - [server.py:206] - 消息 4 内容: 
2025-07-13 20:36:33 - INFO - [server.py:205] - 消息 5: 角色=user, 内容长度=2
2025-07-13 20:36:33 - INFO - [server.py:205] - 消息 5: 角色=user, 内容长度=2
2025-07-13 20:36:33 - DEBUG - [server.py:206] - 消息 5 内容: 你好
2025-07-13 20:36:33 - INFO - [server.py:205] - 消息 6: 角色=assistant, 内容长度=4
2025-07-13 20:36:33 - INFO - [server.py:205] - 消息 6: 角色=assistant, 内容长度=4
2025-07-13 20:36:33 - DEBUG - [server.py:206] - 消息 6 内容:  我不好
2025-07-13 20:36:33 - INFO - [server.py:205] - 消息 7: 角色=user, 内容长度=2
2025-07-13 20:36:33 - INFO - [server.py:205] - 消息 7: 角色=user, 内容长度=2
2025-07-13 20:36:33 - DEBUG - [server.py:206] - 消息 7 内容: 你好
2025-07-13 20:36:33 - INFO - [server.py:208] - 设置参数: {
  "temperature": 0,
  "top_p": 0.5,
  "gen_length": 64,
  "num_beams": 2,
  "steps": 32,
  "cfg_scale": 0,
  "constraints": "0:我不好"
}
2025-07-13 20:36:33 - INFO - [server.py:208] - 设置参数: {
  "temperature": 0,
  "top_p": 0.5,
  "gen_length": 64,
  "num_beams": 2,
  "steps": 32,
  "cfg_scale": 0,
  "constraints": "0:我不好"
}
2025-07-13 20:36:33 - INFO - [server.py:220] - 解析后的约束: {0: '我不好'}
2025-07-13 20:36:33 - INFO - [server.py:220] - 解析后的约束: {0: '我不好'}
2025-07-13 20:36:33 - INFO - [server.py:225] - 生成前GPU内存使用: 14.94GB
2025-07-13 20:36:33 - INFO - [server.py:225] - 生成前GPU内存使用: 14.94GB
2025-07-13 20:36:33 - INFO - [server.py:228] - 准备输入prompt...
2025-07-13 20:36:33 - INFO - [server.py:228] - 准备输入prompt...
2025-07-13 20:36:33 - DEBUG - [server.py:230] - 格式化后的chat输入: <|startoftext|><|start_header_id|>user<|end_header_id|>

你好<|eot_id|><|start_header_id|>assistant<|end_header_id|>

兴趣爱好
* 学业
* 工作
* 旅行
* 兴趣爱好
* 编程
* 技术
* 其他话题<|eot_id|><|start_header_id|>user<|end_header_id|>

你好<|eot_id|><|start_header_id|>assistant<|end_header_id|>

<|eot_id|><|start_header_id|>user<|end_header_id|>

你好<|eot_id|><|start_header_id|>assistant<|end_header_id|>

我不好<|eot_id|><|start_header_id|>user<|end_header_id|>

你好<|eot_id|><|start_header_id|>assistant<|end_header_id|>


2025-07-13 20:36:33 - INFO - [server.py:234] - 输入token数量: 85
2025-07-13 20:36:33 - INFO - [server.py:234] - 输入token数量: 85
2025-07-13 20:36:33 - INFO - [server.py:241] - 序列总长度: 149, prompt长度: 85, 生成长度: 64
2025-07-13 20:36:33 - INFO - [server.py:241] - 序列总长度: 149, prompt长度: 85, 生成长度: 64
2025-07-13 20:36:33 - INFO - [server.py:250] - 应用约束数量: 2
2025-07-13 20:36:33 - INFO - [server.py:250] - 应用约束数量: 2
2025-07-13 20:36:33 - DEBUG - [server.py:255] - 约束位置 0 (绝对位置 85): token_id=5541
2025-07-13 20:36:33 - DEBUG - [server.py:255] - 约束位置 1 (绝对位置 86): token_id=7043
2025-07-13 20:36:33 - INFO - [server.py:270] - 块处理配置: 块长度=32, 块数量=2, 每块步数=16
2025-07-13 20:36:33 - INFO - [server.py:270] - 块处理配置: 块长度=32, 块数量=2, 每块步数=16
2025-07-13 20:36:33 - INFO - [server.py:274] - 处理第 1/2 块...
2025-07-13 20:36:33 - INFO - [server.py:274] - 处理第 1/2 块...
2025-07-13 20:36:33 - INFO - [server.py:274] - 处理第 2/2 块...
2025-07-13 20:36:33 - INFO - [server.py:274] - 处理第 2/2 块...
2025-07-13 20:36:33 - INFO - [server.py:381] - 生成后GPU内存使用: 17.04GB
2025-07-13 20:36:33 - INFO - [server.py:381] - 生成后GPU内存使用: 17.04GB
2025-07-13 20:36:33 - INFO - [server.py:383] - 生成完成!
2025-07-13 20:36:33 - INFO - [server.py:383] - 生成完成!
2025-07-13 20:36:33 - INFO - [server.py:384] - 响应文本长度: 4
2025-07-13 20:36:33 - INFO - [server.py:384] - 响应文本长度: 4
2025-07-13 20:36:33 - INFO - [server.py:385] - 可视化步骤数: 17
2025-07-13 20:36:33 - INFO - [server.py:385] - 可视化步骤数: 17
2025-07-13 20:36:33 - INFO - [server.py:386] - 生成耗时: 0.63秒
2025-07-13 20:36:33 - INFO - [server.py:386] - 生成耗时: 0.63秒
2025-07-13 20:36:33 - DEBUG - [server.py:387] - 生成的响应文本:  我不好
2025-07-13 20:36:33 - INFO - [server.py:388] - ============================================================
2025-07-13 20:36:33 - INFO - [server.py:388] - ============================================================
2025-07-13 20:36:33 - INFO - [server.py:460] - [req_1752410193176] 生成成功!
2025-07-13 20:36:33 - INFO - [server.py:460] - [req_1752410193176] 生成成功!
2025-07-13 20:36:33 - INFO - [server.py:461] - [req_1752410193176] 响应长度: 4
2025-07-13 20:36:33 - INFO - [server.py:461] - [req_1752410193176] 响应长度: 4
2025-07-13 20:36:33 - INFO - [server.py:462] - [req_1752410193176] 可视化步骤: 17
2025-07-13 20:36:33 - INFO - [server.py:462] - [req_1752410193176] 可视化步骤: 17
2025-07-13 20:36:33 - INFO - [server.py:463] - [req_1752410193176] 总耗时: 0.63秒
2025-07-13 20:36:33 - INFO - [server.py:463] - [req_1752410193176] 总耗时: 0.63秒
2025-07-13 20:36:33 - DEBUG - [server.py:464] - [req_1752410193176] 响应文本:  我不好
2025-07-13 20:36:33 - INFO - [server.py:92] - 发送响应: {
  "status_code": 200,
  "content_length": 21468,
  "content_type": "application/json",
  "timestamp": "2025-07-13T20:36:33.809457"
}
2025-07-13 20:36:33 - INFO - [server.py:92] - 发送响应: {
  "status_code": 200,
  "content_length": 21468,
  "content_type": "application/json",
  "timestamp": "2025-07-13T20:36:33.809457"
}
2025-07-13 20:36:33 - INFO - [_internal.py:97] - 127.0.0.1 - - [13/Jul/2025 20:36:33] "POST /generate HTTP/1.1" 200 -
2025-07-13 20:36:33 - INFO - [_internal.py:97] - 127.0.0.1 - - [13/Jul/2025 20:36:33] "POST /generate HTTP/1.1" 200 -
2025-07-13 20:36:43 - INFO - [server.py:73] - 收到请求: {
  "method": "OPTIONS",
  "url": "http://localhost:9000/generate",
  "remote_addr": "127.0.0.1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36 Edg/138.0.0.0",
  "timestamp": "2025-07-13T20:36:43.039342"
}
2025-07-13 20:36:43 - INFO - [server.py:73] - 收到请求: {
  "method": "OPTIONS",
  "url": "http://localhost:9000/generate",
  "remote_addr": "127.0.0.1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36 Edg/138.0.0.0",
  "timestamp": "2025-07-13T20:36:43.039342"
}
2025-07-13 20:36:43 - INFO - [server.py:92] - 发送响应: {
  "status_code": 200,
  "content_length": null,
  "content_type": "text/html; charset=utf-8",
  "timestamp": "2025-07-13T20:36:43.040276"
}
2025-07-13 20:36:43 - INFO - [server.py:92] - 发送响应: {
  "status_code": 200,
  "content_length": null,
  "content_type": "text/html; charset=utf-8",
  "timestamp": "2025-07-13T20:36:43.040276"
}
2025-07-13 20:36:43 - INFO - [_internal.py:97] - 127.0.0.1 - - [13/Jul/2025 20:36:43] "OPTIONS /generate HTTP/1.1" 200 -
2025-07-13 20:36:43 - INFO - [_internal.py:97] - 127.0.0.1 - - [13/Jul/2025 20:36:43] "OPTIONS /generate HTTP/1.1" 200 -
2025-07-13 20:36:43 - INFO - [server.py:73] - 收到请求: {
  "method": "POST",
  "url": "http://localhost:9000/generate",
  "remote_addr": "127.0.0.1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36 Edg/138.0.0.0",
  "timestamp": "2025-07-13T20:36:43.518237",
  "json_data": {
    "messages": [
      {
        "role": "user",
        "content": "你好"
      },
      {
        "role": "assistant",
        "content": "兴趣爱好\n* 学业\n* 工作\n* 旅行\n* 兴趣爱好\n* 编程\n* 技术\n* 其他话题"
      },
      {
        "role": "user",
        "content": "你好"
      },
      {
        "role": "assistant",
        "content": ""
      },
      {
        "role": "user",
        "content": "你好"
      },
      {
        "role": "assistant",
        "content": " 我不好"
      },
      {
        "role": "user",
        "content": "你好"
      },
      {
        "role": "assistant",
        "content": " 我不好"
      },
      {
        "role": "user",
        "content": "你好"
      }
    ],
    "settings": {
      "temperature": 0,
      "top_p": 0.5,
      "gen_length": 64,
      "num_beams": 2,
      "steps": 32,
      "cfg_scale": 0.6,
      "constraints": "0:我不好"
    }
  }
}
2025-07-13 20:36:43 - INFO - [server.py:73] - 收到请求: {
  "method": "POST",
  "url": "http://localhost:9000/generate",
  "remote_addr": "127.0.0.1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36 Edg/138.0.0.0",
  "timestamp": "2025-07-13T20:36:43.518237",
  "json_data": {
    "messages": [
      {
        "role": "user",
        "content": "你好"
      },
      {
        "role": "assistant",
        "content": "兴趣爱好\n* 学业\n* 工作\n* 旅行\n* 兴趣爱好\n* 编程\n* 技术\n* 其他话题"
      },
      {
        "role": "user",
        "content": "你好"
      },
      {
        "role": "assistant",
        "content": ""
      },
      {
        "role": "user",
        "content": "你好"
      },
      {
        "role": "assistant",
        "content": " 我不好"
      },
      {
        "role": "user",
        "content": "你好"
      },
      {
        "role": "assistant",
        "content": " 我不好"
      },
      {
        "role": "user",
        "content": "你好"
      }
    ],
    "settings": {
      "temperature": 0,
      "top_p": 0.5,
      "gen_length": 64,
      "num_beams": 2,
      "steps": 32,
      "cfg_scale": 0.6,
      "constraints": "0:我不好"
    }
  }
}
2025-07-13 20:36:43 - INFO - [server.py:429] - [req_1752410203519] 收到生成请求
2025-07-13 20:36:43 - INFO - [server.py:429] - [req_1752410203519] 收到生成请求
2025-07-13 20:36:43 - INFO - [server.py:437] - [req_1752410203519] 请求数据详情:
2025-07-13 20:36:43 - INFO - [server.py:437] - [req_1752410203519] 请求数据详情:
2025-07-13 20:36:43 - INFO - [server.py:438] - [req_1752410203519] - 消息数量: 9
2025-07-13 20:36:43 - INFO - [server.py:438] - [req_1752410203519] - 消息数量: 9
2025-07-13 20:36:43 - INFO - [server.py:439] - [req_1752410203519] - 设置参数: {
  "temperature": 0,
  "top_p": 0.5,
  "gen_length": 64,
  "num_beams": 2,
  "steps": 32,
  "cfg_scale": 0.6,
  "constraints": "0:我不好"
}
2025-07-13 20:36:43 - INFO - [server.py:439] - [req_1752410203519] - 设置参数: {
  "temperature": 0,
  "top_p": 0.5,
  "gen_length": 64,
  "num_beams": 2,
  "steps": 32,
  "cfg_scale": 0.6,
  "constraints": "0:我不好"
}
2025-07-13 20:36:43 - DEBUG - [server.py:440] - [req_1752410203519] - 完整消息列表: [
  {
    "role": "user",
    "content": "你好"
  },
  {
    "role": "assistant",
    "content": "兴趣爱好\n* 学业\n* 工作\n* 旅行\n* 兴趣爱好\n* 编程\n* 技术\n* 其他话题"
  },
  {
    "role": "user",
    "content": "你好"
  },
  {
    "role": "assistant",
    "content": ""
  },
  {
    "role": "user",
    "content": "你好"
  },
  {
    "role": "assistant",
    "content": " 我不好"
  },
  {
    "role": "user",
    "content": "你好"
  },
  {
    "role": "assistant",
    "content": " 我不好"
  },
  {
    "role": "user",
    "content": "你好"
  }
]
2025-07-13 20:36:43 - INFO - [server.py:451] - [req_1752410203519] 开始生成响应...
2025-07-13 20:36:43 - INFO - [server.py:451] - [req_1752410203519] 开始生成响应...
2025-07-13 20:36:43 - INFO - [server.py:201] - ============================================================
2025-07-13 20:36:43 - INFO - [server.py:201] - ============================================================
2025-07-13 20:36:43 - INFO - [server.py:202] - 开始生成响应
2025-07-13 20:36:43 - INFO - [server.py:202] - 开始生成响应
2025-07-13 20:36:43 - INFO - [server.py:203] - 输入消息数量: 9
2025-07-13 20:36:43 - INFO - [server.py:203] - 输入消息数量: 9
2025-07-13 20:36:43 - INFO - [server.py:205] - 消息 1: 角色=user, 内容长度=2
2025-07-13 20:36:43 - INFO - [server.py:205] - 消息 1: 角色=user, 内容长度=2
2025-07-13 20:36:43 - DEBUG - [server.py:206] - 消息 1 内容: 你好
2025-07-13 20:36:43 - INFO - [server.py:205] - 消息 2: 角色=assistant, 内容长度=43
2025-07-13 20:36:43 - INFO - [server.py:205] - 消息 2: 角色=assistant, 内容长度=43
2025-07-13 20:36:43 - DEBUG - [server.py:206] - 消息 2 内容: 兴趣爱好
* 学业
* 工作
* 旅行
* 兴趣爱好
* 编程
* 技术
* 其他话题
2025-07-13 20:36:43 - INFO - [server.py:205] - 消息 3: 角色=user, 内容长度=2
2025-07-13 20:36:43 - INFO - [server.py:205] - 消息 3: 角色=user, 内容长度=2
2025-07-13 20:36:43 - DEBUG - [server.py:206] - 消息 3 内容: 你好
2025-07-13 20:36:43 - INFO - [server.py:205] - 消息 4: 角色=assistant, 内容长度=0
2025-07-13 20:36:43 - INFO - [server.py:205] - 消息 4: 角色=assistant, 内容长度=0
2025-07-13 20:36:43 - DEBUG - [server.py:206] - 消息 4 内容: 
2025-07-13 20:36:43 - INFO - [server.py:205] - 消息 5: 角色=user, 内容长度=2
2025-07-13 20:36:43 - INFO - [server.py:205] - 消息 5: 角色=user, 内容长度=2
2025-07-13 20:36:43 - DEBUG - [server.py:206] - 消息 5 内容: 你好
2025-07-13 20:36:43 - INFO - [server.py:205] - 消息 6: 角色=assistant, 内容长度=4
2025-07-13 20:36:43 - INFO - [server.py:205] - 消息 6: 角色=assistant, 内容长度=4
2025-07-13 20:36:43 - DEBUG - [server.py:206] - 消息 6 内容:  我不好
2025-07-13 20:36:43 - INFO - [server.py:205] - 消息 7: 角色=user, 内容长度=2
2025-07-13 20:36:43 - INFO - [server.py:205] - 消息 7: 角色=user, 内容长度=2
2025-07-13 20:36:43 - DEBUG - [server.py:206] - 消息 7 内容: 你好
2025-07-13 20:36:43 - INFO - [server.py:205] - 消息 8: 角色=assistant, 内容长度=4
2025-07-13 20:36:43 - INFO - [server.py:205] - 消息 8: 角色=assistant, 内容长度=4
2025-07-13 20:36:43 - DEBUG - [server.py:206] - 消息 8 内容:  我不好
2025-07-13 20:36:43 - INFO - [server.py:205] - 消息 9: 角色=user, 内容长度=2
2025-07-13 20:36:43 - INFO - [server.py:205] - 消息 9: 角色=user, 内容长度=2
2025-07-13 20:36:43 - DEBUG - [server.py:206] - 消息 9 内容: 你好
2025-07-13 20:36:43 - INFO - [server.py:208] - 设置参数: {
  "temperature": 0,
  "top_p": 0.5,
  "gen_length": 64,
  "num_beams": 2,
  "steps": 32,
  "cfg_scale": 0.6,
  "constraints": "0:我不好"
}
2025-07-13 20:36:43 - INFO - [server.py:208] - 设置参数: {
  "temperature": 0,
  "top_p": 0.5,
  "gen_length": 64,
  "num_beams": 2,
  "steps": 32,
  "cfg_scale": 0.6,
  "constraints": "0:我不好"
}
2025-07-13 20:36:43 - INFO - [server.py:220] - 解析后的约束: {0: '我不好'}
2025-07-13 20:36:43 - INFO - [server.py:220] - 解析后的约束: {0: '我不好'}
2025-07-13 20:36:43 - INFO - [server.py:225] - 生成前GPU内存使用: 14.94GB
2025-07-13 20:36:43 - INFO - [server.py:225] - 生成前GPU内存使用: 14.94GB
2025-07-13 20:36:43 - INFO - [server.py:228] - 准备输入prompt...
2025-07-13 20:36:43 - INFO - [server.py:228] - 准备输入prompt...
2025-07-13 20:36:43 - DEBUG - [server.py:230] - 格式化后的chat输入: <|startoftext|><|start_header_id|>user<|end_header_id|>

你好<|eot_id|><|start_header_id|>assistant<|end_header_id|>

兴趣爱好
* 学业
* 工作
* 旅行
* 兴趣爱好
* 编程
* 技术
* 其他话题<|eot_id|><|start_header_id|>user<|end_header_id|>

你好<|eot_id|><|start_header_id|>assistant<|end_header_id|>

<|eot_id|><|start_header_id|>user<|end_header_id|>

你好<|eot_id|><|start_header_id|>assistant<|end_header_id|>

我不好<|eot_id|><|start_header_id|>user<|end_header_id|>

你好<|eot_id|><|start_header_id|>assistant<|end_header_id|>

我不好<|eot_id|><|start_header_id|>user<|end_header_id|>

你好<|eot_id|><|start_header_id|>assistant<|end_header_id|>


2025-07-13 20:36:43 - INFO - [server.py:234] - 输入token数量: 101
2025-07-13 20:36:43 - INFO - [server.py:234] - 输入token数量: 101
2025-07-13 20:36:43 - INFO - [server.py:241] - 序列总长度: 165, prompt长度: 101, 生成长度: 64
2025-07-13 20:36:43 - INFO - [server.py:241] - 序列总长度: 165, prompt长度: 101, 生成长度: 64
2025-07-13 20:36:43 - INFO - [server.py:250] - 应用约束数量: 2
2025-07-13 20:36:43 - INFO - [server.py:250] - 应用约束数量: 2
2025-07-13 20:36:43 - DEBUG - [server.py:255] - 约束位置 0 (绝对位置 101): token_id=5541
2025-07-13 20:36:43 - DEBUG - [server.py:255] - 约束位置 1 (绝对位置 102): token_id=7043
2025-07-13 20:36:43 - INFO - [server.py:270] - 块处理配置: 块长度=32, 块数量=2, 每块步数=16
2025-07-13 20:36:43 - INFO - [server.py:270] - 块处理配置: 块长度=32, 块数量=2, 每块步数=16
2025-07-13 20:36:43 - INFO - [server.py:274] - 处理第 1/2 块...
2025-07-13 20:36:43 - INFO - [server.py:274] - 处理第 1/2 块...
2025-07-13 20:36:43 - INFO - [server.py:274] - 处理第 2/2 块...
2025-07-13 20:36:43 - INFO - [server.py:274] - 处理第 2/2 块...
2025-07-13 20:36:44 - INFO - [server.py:381] - 生成后GPU内存使用: 19.26GB
2025-07-13 20:36:44 - INFO - [server.py:381] - 生成后GPU内存使用: 19.26GB
2025-07-13 20:36:44 - INFO - [server.py:383] - 生成完成!
2025-07-13 20:36:44 - INFO - [server.py:383] - 生成完成!
2025-07-13 20:36:44 - INFO - [server.py:384] - 响应文本长度: 4
2025-07-13 20:36:44 - INFO - [server.py:384] - 响应文本长度: 4
2025-07-13 20:36:44 - INFO - [server.py:385] - 可视化步骤数: 17
2025-07-13 20:36:44 - INFO - [server.py:385] - 可视化步骤数: 17
2025-07-13 20:36:44 - INFO - [server.py:386] - 生成耗时: 0.93秒
2025-07-13 20:36:44 - INFO - [server.py:386] - 生成耗时: 0.93秒
2025-07-13 20:36:44 - DEBUG - [server.py:387] - 生成的响应文本:  我不好
2025-07-13 20:36:44 - INFO - [server.py:388] - ============================================================
2025-07-13 20:36:44 - INFO - [server.py:388] - ============================================================
2025-07-13 20:36:44 - INFO - [server.py:460] - [req_1752410203519] 生成成功!
2025-07-13 20:36:44 - INFO - [server.py:460] - [req_1752410203519] 生成成功!
2025-07-13 20:36:44 - INFO - [server.py:461] - [req_1752410203519] 响应长度: 4
2025-07-13 20:36:44 - INFO - [server.py:461] - [req_1752410203519] 响应长度: 4
2025-07-13 20:36:44 - INFO - [server.py:462] - [req_1752410203519] 可视化步骤: 17
2025-07-13 20:36:44 - INFO - [server.py:462] - [req_1752410203519] 可视化步骤: 17
2025-07-13 20:36:44 - INFO - [server.py:463] - [req_1752410203519] 总耗时: 0.94秒
2025-07-13 20:36:44 - INFO - [server.py:463] - [req_1752410203519] 总耗时: 0.94秒
2025-07-13 20:36:44 - DEBUG - [server.py:464] - [req_1752410203519] 响应文本:  我不好
2025-07-13 20:36:44 - INFO - [server.py:92] - 发送响应: {
  "status_code": 200,
  "content_length": 21468,
  "content_type": "application/json",
  "timestamp": "2025-07-13T20:36:44.458314"
}
2025-07-13 20:36:44 - INFO - [server.py:92] - 发送响应: {
  "status_code": 200,
  "content_length": 21468,
  "content_type": "application/json",
  "timestamp": "2025-07-13T20:36:44.458314"
}
2025-07-13 20:36:44 - INFO - [_internal.py:97] - 127.0.0.1 - - [13/Jul/2025 20:36:44] "POST /generate HTTP/1.1" 200 -
2025-07-13 20:36:44 - INFO - [_internal.py:97] - 127.0.0.1 - - [13/Jul/2025 20:36:44] "POST /generate HTTP/1.1" 200 -
2025-07-13 20:36:53 - INFO - [server.py:73] - 收到请求: {
  "method": "GET",
  "url": "http://localhost:9000/health",
  "remote_addr": "127.0.0.1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36 Edg/138.0.0.0",
  "timestamp": "2025-07-13T20:36:53.756142"
}
2025-07-13 20:36:53 - INFO - [server.py:73] - 收到请求: {
  "method": "GET",
  "url": "http://localhost:9000/health",
  "remote_addr": "127.0.0.1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36 Edg/138.0.0.0",
  "timestamp": "2025-07-13T20:36:53.756142"
}
2025-07-13 20:36:53 - INFO - [server.py:92] - 发送响应: {
  "status_code": 200,
  "content_length": 37,
  "content_type": "application/json",
  "timestamp": "2025-07-13T20:36:53.756962",
  "response_body": "{\"device\":\"cuda\",\"status\":\"healthy\"}\n"
}
2025-07-13 20:36:53 - INFO - [server.py:92] - 发送响应: {
  "status_code": 200,
  "content_length": 37,
  "content_type": "application/json",
  "timestamp": "2025-07-13T20:36:53.756962",
  "response_body": "{\"device\":\"cuda\",\"status\":\"healthy\"}\n"
}
2025-07-13 20:36:53 - INFO - [_internal.py:97] - 127.0.0.1 - - [13/Jul/2025 20:36:53] "GET /health HTTP/1.1" 200 -
2025-07-13 20:36:53 - INFO - [_internal.py:97] - 127.0.0.1 - - [13/Jul/2025 20:36:53] "GET /health HTTP/1.1" 200 -
2025-07-13 20:37:01 - INFO - [server.py:73] - 收到请求: {
  "method": "OPTIONS",
  "url": "http://localhost:9000/generate",
  "remote_addr": "127.0.0.1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36 Edg/138.0.0.0",
  "timestamp": "2025-07-13T20:37:01.216492"
}
2025-07-13 20:37:01 - INFO - [server.py:73] - 收到请求: {
  "method": "OPTIONS",
  "url": "http://localhost:9000/generate",
  "remote_addr": "127.0.0.1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36 Edg/138.0.0.0",
  "timestamp": "2025-07-13T20:37:01.216492"
}
2025-07-13 20:37:01 - INFO - [server.py:92] - 发送响应: {
  "status_code": 200,
  "content_length": null,
  "content_type": "text/html; charset=utf-8",
  "timestamp": "2025-07-13T20:37:01.217373"
}
2025-07-13 20:37:01 - INFO - [server.py:92] - 发送响应: {
  "status_code": 200,
  "content_length": null,
  "content_type": "text/html; charset=utf-8",
  "timestamp": "2025-07-13T20:37:01.217373"
}
2025-07-13 20:37:01 - INFO - [_internal.py:97] - 127.0.0.1 - - [13/Jul/2025 20:37:01] "OPTIONS /generate HTTP/1.1" 200 -
2025-07-13 20:37:01 - INFO - [_internal.py:97] - 127.0.0.1 - - [13/Jul/2025 20:37:01] "OPTIONS /generate HTTP/1.1" 200 -
2025-07-13 20:37:01 - INFO - [server.py:73] - 收到请求: {
  "method": "POST",
  "url": "http://localhost:9000/generate",
  "remote_addr": "127.0.0.1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36 Edg/138.0.0.0",
  "timestamp": "2025-07-13T20:37:01.531163",
  "json_data": {
    "messages": [
      {
        "role": "user",
        "content": "你好"
      },
      {
        "role": "assistant",
        "content": "兴趣爱好\n* 学业\n* 工作\n* 旅行\n* 兴趣爱好\n* 编程\n* 技术\n* 其他话题"
      },
      {
        "role": "user",
        "content": "你好"
      },
      {
        "role": "assistant",
        "content": ""
      },
      {
        "role": "user",
        "content": "你好"
      },
      {
        "role": "assistant",
        "content": " 我不好"
      },
      {
        "role": "user",
        "content": "你好"
      },
      {
        "role": "assistant",
        "content": " 我不好"
      },
      {
        "role": "user",
        "content": "你好"
      },
      {
        "role": "assistant",
        "content": " 我不好"
      },
      {
        "role": "user",
        "content": "你好"
      }
    ],
    "settings": {
      "temperature": 0,
      "top_p": 0.5,
      "gen_length": 64,
      "num_beams": 4,
      "steps": 32,
      "cfg_scale": 0.3,
      "constraints": "0:我不好"
    }
  }
}
2025-07-13 20:37:01 - INFO - [server.py:73] - 收到请求: {
  "method": "POST",
  "url": "http://localhost:9000/generate",
  "remote_addr": "127.0.0.1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36 Edg/138.0.0.0",
  "timestamp": "2025-07-13T20:37:01.531163",
  "json_data": {
    "messages": [
      {
        "role": "user",
        "content": "你好"
      },
      {
        "role": "assistant",
        "content": "兴趣爱好\n* 学业\n* 工作\n* 旅行\n* 兴趣爱好\n* 编程\n* 技术\n* 其他话题"
      },
      {
        "role": "user",
        "content": "你好"
      },
      {
        "role": "assistant",
        "content": ""
      },
      {
        "role": "user",
        "content": "你好"
      },
      {
        "role": "assistant",
        "content": " 我不好"
      },
      {
        "role": "user",
        "content": "你好"
      },
      {
        "role": "assistant",
        "content": " 我不好"
      },
      {
        "role": "user",
        "content": "你好"
      },
      {
        "role": "assistant",
        "content": " 我不好"
      },
      {
        "role": "user",
        "content": "你好"
      }
    ],
    "settings": {
      "temperature": 0,
      "top_p": 0.5,
      "gen_length": 64,
      "num_beams": 4,
      "steps": 32,
      "cfg_scale": 0.3,
      "constraints": "0:我不好"
    }
  }
}
2025-07-13 20:37:01 - INFO - [server.py:429] - [req_1752410221532] 收到生成请求
2025-07-13 20:37:01 - INFO - [server.py:429] - [req_1752410221532] 收到生成请求
2025-07-13 20:37:01 - INFO - [server.py:437] - [req_1752410221532] 请求数据详情:
2025-07-13 20:37:01 - INFO - [server.py:437] - [req_1752410221532] 请求数据详情:
2025-07-13 20:37:01 - INFO - [server.py:438] - [req_1752410221532] - 消息数量: 11
2025-07-13 20:37:01 - INFO - [server.py:438] - [req_1752410221532] - 消息数量: 11
2025-07-13 20:37:01 - INFO - [server.py:439] - [req_1752410221532] - 设置参数: {
  "temperature": 0,
  "top_p": 0.5,
  "gen_length": 64,
  "num_beams": 4,
  "steps": 32,
  "cfg_scale": 0.3,
  "constraints": "0:我不好"
}
2025-07-13 20:37:01 - INFO - [server.py:439] - [req_1752410221532] - 设置参数: {
  "temperature": 0,
  "top_p": 0.5,
  "gen_length": 64,
  "num_beams": 4,
  "steps": 32,
  "cfg_scale": 0.3,
  "constraints": "0:我不好"
}
2025-07-13 20:37:01 - DEBUG - [server.py:440] - [req_1752410221532] - 完整消息列表: [
  {
    "role": "user",
    "content": "你好"
  },
  {
    "role": "assistant",
    "content": "兴趣爱好\n* 学业\n* 工作\n* 旅行\n* 兴趣爱好\n* 编程\n* 技术\n* 其他话题"
  },
  {
    "role": "user",
    "content": "你好"
  },
  {
    "role": "assistant",
    "content": ""
  },
  {
    "role": "user",
    "content": "你好"
  },
  {
    "role": "assistant",
    "content": " 我不好"
  },
  {
    "role": "user",
    "content": "你好"
  },
  {
    "role": "assistant",
    "content": " 我不好"
  },
  {
    "role": "user",
    "content": "你好"
  },
  {
    "role": "assistant",
    "content": " 我不好"
  },
  {
    "role": "user",
    "content": "你好"
  }
]
2025-07-13 20:37:01 - INFO - [server.py:451] - [req_1752410221532] 开始生成响应...
2025-07-13 20:37:01 - INFO - [server.py:451] - [req_1752410221532] 开始生成响应...
2025-07-13 20:37:01 - INFO - [server.py:201] - ============================================================
2025-07-13 20:37:01 - INFO - [server.py:201] - ============================================================
2025-07-13 20:37:01 - INFO - [server.py:202] - 开始生成响应
2025-07-13 20:37:01 - INFO - [server.py:202] - 开始生成响应
2025-07-13 20:37:01 - INFO - [server.py:203] - 输入消息数量: 11
2025-07-13 20:37:01 - INFO - [server.py:203] - 输入消息数量: 11
2025-07-13 20:37:01 - INFO - [server.py:205] - 消息 1: 角色=user, 内容长度=2
2025-07-13 20:37:01 - INFO - [server.py:205] - 消息 1: 角色=user, 内容长度=2
2025-07-13 20:37:01 - DEBUG - [server.py:206] - 消息 1 内容: 你好
2025-07-13 20:37:01 - INFO - [server.py:205] - 消息 2: 角色=assistant, 内容长度=43
2025-07-13 20:37:01 - INFO - [server.py:205] - 消息 2: 角色=assistant, 内容长度=43
2025-07-13 20:37:01 - DEBUG - [server.py:206] - 消息 2 内容: 兴趣爱好
* 学业
* 工作
* 旅行
* 兴趣爱好
* 编程
* 技术
* 其他话题
2025-07-13 20:37:01 - INFO - [server.py:205] - 消息 3: 角色=user, 内容长度=2
2025-07-13 20:37:01 - INFO - [server.py:205] - 消息 3: 角色=user, 内容长度=2
2025-07-13 20:37:01 - DEBUG - [server.py:206] - 消息 3 内容: 你好
2025-07-13 20:37:01 - INFO - [server.py:205] - 消息 4: 角色=assistant, 内容长度=0
2025-07-13 20:37:01 - INFO - [server.py:205] - 消息 4: 角色=assistant, 内容长度=0
2025-07-13 20:37:01 - DEBUG - [server.py:206] - 消息 4 内容: 
2025-07-13 20:37:01 - INFO - [server.py:205] - 消息 5: 角色=user, 内容长度=2
2025-07-13 20:37:01 - INFO - [server.py:205] - 消息 5: 角色=user, 内容长度=2
2025-07-13 20:37:01 - DEBUG - [server.py:206] - 消息 5 内容: 你好
2025-07-13 20:37:01 - INFO - [server.py:205] - 消息 6: 角色=assistant, 内容长度=4
2025-07-13 20:37:01 - INFO - [server.py:205] - 消息 6: 角色=assistant, 内容长度=4
2025-07-13 20:37:01 - DEBUG - [server.py:206] - 消息 6 内容:  我不好
2025-07-13 20:37:01 - INFO - [server.py:205] - 消息 7: 角色=user, 内容长度=2
2025-07-13 20:37:01 - INFO - [server.py:205] - 消息 7: 角色=user, 内容长度=2
2025-07-13 20:37:01 - DEBUG - [server.py:206] - 消息 7 内容: 你好
2025-07-13 20:37:01 - INFO - [server.py:205] - 消息 8: 角色=assistant, 内容长度=4
2025-07-13 20:37:01 - INFO - [server.py:205] - 消息 8: 角色=assistant, 内容长度=4
2025-07-13 20:37:01 - DEBUG - [server.py:206] - 消息 8 内容:  我不好
2025-07-13 20:37:01 - INFO - [server.py:205] - 消息 9: 角色=user, 内容长度=2
2025-07-13 20:37:01 - INFO - [server.py:205] - 消息 9: 角色=user, 内容长度=2
2025-07-13 20:37:01 - DEBUG - [server.py:206] - 消息 9 内容: 你好
2025-07-13 20:37:01 - INFO - [server.py:205] - 消息 10: 角色=assistant, 内容长度=4
2025-07-13 20:37:01 - INFO - [server.py:205] - 消息 10: 角色=assistant, 内容长度=4
2025-07-13 20:37:01 - DEBUG - [server.py:206] - 消息 10 内容:  我不好
2025-07-13 20:37:01 - INFO - [server.py:205] - 消息 11: 角色=user, 内容长度=2
2025-07-13 20:37:01 - INFO - [server.py:205] - 消息 11: 角色=user, 内容长度=2
2025-07-13 20:37:01 - DEBUG - [server.py:206] - 消息 11 内容: 你好
2025-07-13 20:37:01 - INFO - [server.py:208] - 设置参数: {
  "temperature": 0,
  "top_p": 0.5,
  "gen_length": 64,
  "num_beams": 4,
  "steps": 32,
  "cfg_scale": 0.3,
  "constraints": "0:我不好"
}
2025-07-13 20:37:01 - INFO - [server.py:208] - 设置参数: {
  "temperature": 0,
  "top_p": 0.5,
  "gen_length": 64,
  "num_beams": 4,
  "steps": 32,
  "cfg_scale": 0.3,
  "constraints": "0:我不好"
}
2025-07-13 20:37:01 - INFO - [server.py:220] - 解析后的约束: {0: '我不好'}
2025-07-13 20:37:01 - INFO - [server.py:220] - 解析后的约束: {0: '我不好'}
2025-07-13 20:37:01 - INFO - [server.py:225] - 生成前GPU内存使用: 14.94GB
2025-07-13 20:37:01 - INFO - [server.py:225] - 生成前GPU内存使用: 14.94GB
2025-07-13 20:37:01 - INFO - [server.py:228] - 准备输入prompt...
2025-07-13 20:37:01 - INFO - [server.py:228] - 准备输入prompt...
2025-07-13 20:37:01 - DEBUG - [server.py:230] - 格式化后的chat输入: <|startoftext|><|start_header_id|>user<|end_header_id|>

你好<|eot_id|><|start_header_id|>assistant<|end_header_id|>

兴趣爱好
* 学业
* 工作
* 旅行
* 兴趣爱好
* 编程
* 技术
* 其他话题<|eot_id|><|start_header_id|>user<|end_header_id|>

你好<|eot_id|><|start_header_id|>assistant<|end_header_id|>

<|eot_id|><|start_header_id|>user<|end_header_id|>

你好<|eot_id|><|start_header_id|>assistant<|end_header_id|>

我不好<|eot_id|><|start_header_id|>user<|end_header_id|>

你好<|eot_id|><|start_header_id|>assistant<|end_header_id|>

我不好<|eot_id|><|start_header_id|>user<|end_header_id|>

你好<|eot_id|><|start_header_id|>assistant<|end_header_id|>

我不好<|eot_id|><|start_header_id|>user<|end_header_id|>

你好<|eot_id|><|start_header_id|>assistant<|end_header_id|>


2025-07-13 20:37:01 - INFO - [server.py:234] - 输入token数量: 117
2025-07-13 20:37:01 - INFO - [server.py:234] - 输入token数量: 117
2025-07-13 20:37:01 - INFO - [server.py:241] - 序列总长度: 181, prompt长度: 117, 生成长度: 64
2025-07-13 20:37:01 - INFO - [server.py:241] - 序列总长度: 181, prompt长度: 117, 生成长度: 64
2025-07-13 20:37:01 - INFO - [server.py:250] - 应用约束数量: 2
2025-07-13 20:37:01 - INFO - [server.py:250] - 应用约束数量: 2
2025-07-13 20:37:01 - DEBUG - [server.py:255] - 约束位置 0 (绝对位置 117): token_id=5541
2025-07-13 20:37:01 - DEBUG - [server.py:255] - 约束位置 1 (绝对位置 118): token_id=7043
2025-07-13 20:37:01 - INFO - [server.py:270] - 块处理配置: 块长度=32, 块数量=2, 每块步数=16
2025-07-13 20:37:01 - INFO - [server.py:270] - 块处理配置: 块长度=32, 块数量=2, 每块步数=16
2025-07-13 20:37:01 - INFO - [server.py:274] - 处理第 1/2 块...
2025-07-13 20:37:01 - INFO - [server.py:274] - 处理第 1/2 块...
2025-07-13 20:37:01 - INFO - [server.py:274] - 处理第 2/2 块...
2025-07-13 20:37:01 - INFO - [server.py:274] - 处理第 2/2 块...
2025-07-13 20:37:02 - INFO - [server.py:381] - 生成后GPU内存使用: 19.70GB
2025-07-13 20:37:02 - INFO - [server.py:381] - 生成后GPU内存使用: 19.70GB
2025-07-13 20:37:02 - INFO - [server.py:383] - 生成完成!
2025-07-13 20:37:02 - INFO - [server.py:383] - 生成完成!
2025-07-13 20:37:02 - INFO - [server.py:384] - 响应文本长度: 4
2025-07-13 20:37:02 - INFO - [server.py:384] - 响应文本长度: 4
2025-07-13 20:37:02 - INFO - [server.py:385] - 可视化步骤数: 17
2025-07-13 20:37:02 - INFO - [server.py:385] - 可视化步骤数: 17
2025-07-13 20:37:02 - INFO - [server.py:386] - 生成耗时: 0.95秒
2025-07-13 20:37:02 - INFO - [server.py:386] - 生成耗时: 0.95秒
2025-07-13 20:37:02 - DEBUG - [server.py:387] - 生成的响应文本:  我不好
2025-07-13 20:37:02 - INFO - [server.py:388] - ============================================================
2025-07-13 20:37:02 - INFO - [server.py:388] - ============================================================
2025-07-13 20:37:02 - INFO - [server.py:460] - [req_1752410221532] 生成成功!
2025-07-13 20:37:02 - INFO - [server.py:460] - [req_1752410221532] 生成成功!
2025-07-13 20:37:02 - INFO - [server.py:461] - [req_1752410221532] 响应长度: 4
2025-07-13 20:37:02 - INFO - [server.py:461] - [req_1752410221532] 响应长度: 4
2025-07-13 20:37:02 - INFO - [server.py:462] - [req_1752410221532] 可视化步骤: 17
2025-07-13 20:37:02 - INFO - [server.py:462] - [req_1752410221532] 可视化步骤: 17
2025-07-13 20:37:02 - INFO - [server.py:463] - [req_1752410221532] 总耗时: 0.95秒
2025-07-13 20:37:02 - INFO - [server.py:463] - [req_1752410221532] 总耗时: 0.95秒
2025-07-13 20:37:02 - DEBUG - [server.py:464] - [req_1752410221532] 响应文本:  我不好
2025-07-13 20:37:02 - INFO - [server.py:92] - 发送响应: {
  "status_code": 200,
  "content_length": 21468,
  "content_type": "application/json",
  "timestamp": "2025-07-13T20:37:02.487054"
}
2025-07-13 20:37:02 - INFO - [server.py:92] - 发送响应: {
  "status_code": 200,
  "content_length": 21468,
  "content_type": "application/json",
  "timestamp": "2025-07-13T20:37:02.487054"
}
2025-07-13 20:37:02 - INFO - [_internal.py:97] - 127.0.0.1 - - [13/Jul/2025 20:37:02] "POST /generate HTTP/1.1" 200 -
2025-07-13 20:37:02 - INFO - [_internal.py:97] - 127.0.0.1 - - [13/Jul/2025 20:37:02] "POST /generate HTTP/1.1" 200 -
2025-07-13 20:37:24 - INFO - [server.py:73] - 收到请求: {
  "method": "GET",
  "url": "http://localhost:9000/health",
  "remote_addr": "127.0.0.1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36 Edg/138.0.0.0",
  "timestamp": "2025-07-13T20:37:24.153612"
}
2025-07-13 20:37:24 - INFO - [server.py:73] - 收到请求: {
  "method": "GET",
  "url": "http://localhost:9000/health",
  "remote_addr": "127.0.0.1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36 Edg/138.0.0.0",
  "timestamp": "2025-07-13T20:37:24.153612"
}
2025-07-13 20:37:24 - INFO - [server.py:92] - 发送响应: {
  "status_code": 200,
  "content_length": 37,
  "content_type": "application/json",
  "timestamp": "2025-07-13T20:37:24.154032",
  "response_body": "{\"device\":\"cuda\",\"status\":\"healthy\"}\n"
}
2025-07-13 20:37:24 - INFO - [server.py:92] - 发送响应: {
  "status_code": 200,
  "content_length": 37,
  "content_type": "application/json",
  "timestamp": "2025-07-13T20:37:24.154032",
  "response_body": "{\"device\":\"cuda\",\"status\":\"healthy\"}\n"
}
2025-07-13 20:37:24 - INFO - [_internal.py:97] - 127.0.0.1 - - [13/Jul/2025 20:37:24] "GET /health HTTP/1.1" 200 -
2025-07-13 20:37:24 - INFO - [_internal.py:97] - 127.0.0.1 - - [13/Jul/2025 20:37:24] "GET /health HTTP/1.1" 200 -
2025-07-13 20:37:54 - INFO - [server.py:73] - 收到请求: {
  "method": "GET",
  "url": "http://localhost:9000/health",
  "remote_addr": "127.0.0.1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36 Edg/138.0.0.0",
  "timestamp": "2025-07-13T20:37:54.570929"
}
2025-07-13 20:37:54 - INFO - [server.py:73] - 收到请求: {
  "method": "GET",
  "url": "http://localhost:9000/health",
  "remote_addr": "127.0.0.1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36 Edg/138.0.0.0",
  "timestamp": "2025-07-13T20:37:54.570929"
}
2025-07-13 20:37:54 - INFO - [server.py:92] - 发送响应: {
  "status_code": 200,
  "content_length": 37,
  "content_type": "application/json",
  "timestamp": "2025-07-13T20:37:54.571739",
  "response_body": "{\"device\":\"cuda\",\"status\":\"healthy\"}\n"
}
2025-07-13 20:37:54 - INFO - [server.py:92] - 发送响应: {
  "status_code": 200,
  "content_length": 37,
  "content_type": "application/json",
  "timestamp": "2025-07-13T20:37:54.571739",
  "response_body": "{\"device\":\"cuda\",\"status\":\"healthy\"}\n"
}
2025-07-13 20:37:54 - INFO - [_internal.py:97] - 127.0.0.1 - - [13/Jul/2025 20:37:54] "GET /health HTTP/1.1" 200 -
2025-07-13 20:37:54 - INFO - [_internal.py:97] - 127.0.0.1 - - [13/Jul/2025 20:37:54] "GET /health HTTP/1.1" 200 -
2025-07-13 20:38:55 - INFO - [server.py:73] - 收到请求: {
  "method": "GET",
  "url": "http://localhost:9000/health",
  "remote_addr": "127.0.0.1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36 Edg/138.0.0.0",
  "timestamp": "2025-07-13T20:38:55.831450"
}
2025-07-13 20:38:55 - INFO - [server.py:73] - 收到请求: {
  "method": "GET",
  "url": "http://localhost:9000/health",
  "remote_addr": "127.0.0.1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36 Edg/138.0.0.0",
  "timestamp": "2025-07-13T20:38:55.831450"
}
2025-07-13 20:38:55 - INFO - [server.py:92] - 发送响应: {
  "status_code": 200,
  "content_length": 37,
  "content_type": "application/json",
  "timestamp": "2025-07-13T20:38:55.832294",
  "response_body": "{\"device\":\"cuda\",\"status\":\"healthy\"}\n"
}
2025-07-13 20:38:55 - INFO - [server.py:92] - 发送响应: {
  "status_code": 200,
  "content_length": 37,
  "content_type": "application/json",
  "timestamp": "2025-07-13T20:38:55.832294",
  "response_body": "{\"device\":\"cuda\",\"status\":\"healthy\"}\n"
}
2025-07-13 20:38:55 - INFO - [_internal.py:97] - 127.0.0.1 - - [13/Jul/2025 20:38:55] "GET /health HTTP/1.1" 200 -
2025-07-13 20:38:55 - INFO - [_internal.py:97] - 127.0.0.1 - - [13/Jul/2025 20:38:55] "GET /health HTTP/1.1" 200 -
2025-07-13 20:39:05 - INFO - [server.py:73] - 收到请求: {
  "method": "OPTIONS",
  "url": "http://localhost:9000/generate",
  "remote_addr": "127.0.0.1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36 Edg/138.0.0.0",
  "timestamp": "2025-07-13T20:39:05.141356"
}
2025-07-13 20:39:05 - INFO - [server.py:73] - 收到请求: {
  "method": "OPTIONS",
  "url": "http://localhost:9000/generate",
  "remote_addr": "127.0.0.1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36 Edg/138.0.0.0",
  "timestamp": "2025-07-13T20:39:05.141356"
}
2025-07-13 20:39:05 - INFO - [server.py:92] - 发送响应: {
  "status_code": 200,
  "content_length": null,
  "content_type": "text/html; charset=utf-8",
  "timestamp": "2025-07-13T20:39:05.142274"
}
2025-07-13 20:39:05 - INFO - [server.py:92] - 发送响应: {
  "status_code": 200,
  "content_length": null,
  "content_type": "text/html; charset=utf-8",
  "timestamp": "2025-07-13T20:39:05.142274"
}
2025-07-13 20:39:05 - INFO - [_internal.py:97] - 127.0.0.1 - - [13/Jul/2025 20:39:05] "OPTIONS /generate HTTP/1.1" 200 -
2025-07-13 20:39:05 - INFO - [_internal.py:97] - 127.0.0.1 - - [13/Jul/2025 20:39:05] "OPTIONS /generate HTTP/1.1" 200 -
2025-07-13 20:39:05 - INFO - [server.py:73] - 收到请求: {
  "method": "POST",
  "url": "http://localhost:9000/generate",
  "remote_addr": "127.0.0.1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36 Edg/138.0.0.0",
  "timestamp": "2025-07-13T20:39:05.618591",
  "json_data": {
    "messages": [
      {
        "role": "user",
        "content": "你好"
      },
      {
        "role": "assistant",
        "content": "兴趣爱好\n* 学业\n* 工作\n* 旅行\n* 兴趣爱好\n* 编程\n* 技术\n* 其他话题"
      },
      {
        "role": "user",
        "content": "你好"
      },
      {
        "role": "assistant",
        "content": ""
      },
      {
        "role": "user",
        "content": "你好"
      },
      {
        "role": "assistant",
        "content": " 我不好"
      },
      {
        "role": "user",
        "content": "你好"
      },
      {
        "role": "assistant",
        "content": " 我不好"
      },
      {
        "role": "user",
        "content": "你好"
      },
      {
        "role": "assistant",
        "content": " 我不好"
      },
      {
        "role": "user",
        "content": "你好"
      },
      {
        "role": "assistant",
        "content": " 我不好"
      },
      {
        "role": "user",
        "content": "你好"
      }
    ],
    "settings": {
      "temperature": 0.2,
      "top_p": 0.5,
      "gen_length": 64,
      "num_beams": 4,
      "steps": 32,
      "cfg_scale": 0.3,
      "constraints": "0:我不好"
    }
  }
}
2025-07-13 20:39:05 - INFO - [server.py:73] - 收到请求: {
  "method": "POST",
  "url": "http://localhost:9000/generate",
  "remote_addr": "127.0.0.1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36 Edg/138.0.0.0",
  "timestamp": "2025-07-13T20:39:05.618591",
  "json_data": {
    "messages": [
      {
        "role": "user",
        "content": "你好"
      },
      {
        "role": "assistant",
        "content": "兴趣爱好\n* 学业\n* 工作\n* 旅行\n* 兴趣爱好\n* 编程\n* 技术\n* 其他话题"
      },
      {
        "role": "user",
        "content": "你好"
      },
      {
        "role": "assistant",
        "content": ""
      },
      {
        "role": "user",
        "content": "你好"
      },
      {
        "role": "assistant",
        "content": " 我不好"
      },
      {
        "role": "user",
        "content": "你好"
      },
      {
        "role": "assistant",
        "content": " 我不好"
      },
      {
        "role": "user",
        "content": "你好"
      },
      {
        "role": "assistant",
        "content": " 我不好"
      },
      {
        "role": "user",
        "content": "你好"
      },
      {
        "role": "assistant",
        "content": " 我不好"
      },
      {
        "role": "user",
        "content": "你好"
      }
    ],
    "settings": {
      "temperature": 0.2,
      "top_p": 0.5,
      "gen_length": 64,
      "num_beams": 4,
      "steps": 32,
      "cfg_scale": 0.3,
      "constraints": "0:我不好"
    }
  }
}
2025-07-13 20:39:05 - INFO - [server.py:429] - [req_1752410345619] 收到生成请求
2025-07-13 20:39:05 - INFO - [server.py:429] - [req_1752410345619] 收到生成请求
2025-07-13 20:39:05 - INFO - [server.py:437] - [req_1752410345619] 请求数据详情:
2025-07-13 20:39:05 - INFO - [server.py:437] - [req_1752410345619] 请求数据详情:
2025-07-13 20:39:05 - INFO - [server.py:438] - [req_1752410345619] - 消息数量: 13
2025-07-13 20:39:05 - INFO - [server.py:438] - [req_1752410345619] - 消息数量: 13
2025-07-13 20:39:05 - INFO - [server.py:439] - [req_1752410345619] - 设置参数: {
  "temperature": 0.2,
  "top_p": 0.5,
  "gen_length": 64,
  "num_beams": 4,
  "steps": 32,
  "cfg_scale": 0.3,
  "constraints": "0:我不好"
}
2025-07-13 20:39:05 - INFO - [server.py:439] - [req_1752410345619] - 设置参数: {
  "temperature": 0.2,
  "top_p": 0.5,
  "gen_length": 64,
  "num_beams": 4,
  "steps": 32,
  "cfg_scale": 0.3,
  "constraints": "0:我不好"
}
2025-07-13 20:39:05 - DEBUG - [server.py:440] - [req_1752410345619] - 完整消息列表: [
  {
    "role": "user",
    "content": "你好"
  },
  {
    "role": "assistant",
    "content": "兴趣爱好\n* 学业\n* 工作\n* 旅行\n* 兴趣爱好\n* 编程\n* 技术\n* 其他话题"
  },
  {
    "role": "user",
    "content": "你好"
  },
  {
    "role": "assistant",
    "content": ""
  },
  {
    "role": "user",
    "content": "你好"
  },
  {
    "role": "assistant",
    "content": " 我不好"
  },
  {
    "role": "user",
    "content": "你好"
  },
  {
    "role": "assistant",
    "content": " 我不好"
  },
  {
    "role": "user",
    "content": "你好"
  },
  {
    "role": "assistant",
    "content": " 我不好"
  },
  {
    "role": "user",
    "content": "你好"
  },
  {
    "role": "assistant",
    "content": " 我不好"
  },
  {
    "role": "user",
    "content": "你好"
  }
]
2025-07-13 20:39:05 - INFO - [server.py:451] - [req_1752410345619] 开始生成响应...
2025-07-13 20:39:05 - INFO - [server.py:451] - [req_1752410345619] 开始生成响应...
2025-07-13 20:39:05 - INFO - [server.py:201] - ============================================================
2025-07-13 20:39:05 - INFO - [server.py:201] - ============================================================
2025-07-13 20:39:05 - INFO - [server.py:202] - 开始生成响应
2025-07-13 20:39:05 - INFO - [server.py:202] - 开始生成响应
2025-07-13 20:39:05 - INFO - [server.py:203] - 输入消息数量: 13
2025-07-13 20:39:05 - INFO - [server.py:203] - 输入消息数量: 13
2025-07-13 20:39:05 - INFO - [server.py:205] - 消息 1: 角色=user, 内容长度=2
2025-07-13 20:39:05 - INFO - [server.py:205] - 消息 1: 角色=user, 内容长度=2
2025-07-13 20:39:05 - DEBUG - [server.py:206] - 消息 1 内容: 你好
2025-07-13 20:39:05 - INFO - [server.py:205] - 消息 2: 角色=assistant, 内容长度=43
2025-07-13 20:39:05 - INFO - [server.py:205] - 消息 2: 角色=assistant, 内容长度=43
2025-07-13 20:39:05 - DEBUG - [server.py:206] - 消息 2 内容: 兴趣爱好
* 学业
* 工作
* 旅行
* 兴趣爱好
* 编程
* 技术
* 其他话题
2025-07-13 20:39:05 - INFO - [server.py:205] - 消息 3: 角色=user, 内容长度=2
2025-07-13 20:39:05 - INFO - [server.py:205] - 消息 3: 角色=user, 内容长度=2
2025-07-13 20:39:05 - DEBUG - [server.py:206] - 消息 3 内容: 你好
2025-07-13 20:39:05 - INFO - [server.py:205] - 消息 4: 角色=assistant, 内容长度=0
2025-07-13 20:39:05 - INFO - [server.py:205] - 消息 4: 角色=assistant, 内容长度=0
2025-07-13 20:39:05 - DEBUG - [server.py:206] - 消息 4 内容: 
2025-07-13 20:39:05 - INFO - [server.py:205] - 消息 5: 角色=user, 内容长度=2
2025-07-13 20:39:05 - INFO - [server.py:205] - 消息 5: 角色=user, 内容长度=2
2025-07-13 20:39:05 - DEBUG - [server.py:206] - 消息 5 内容: 你好
2025-07-13 20:39:05 - INFO - [server.py:205] - 消息 6: 角色=assistant, 内容长度=4
2025-07-13 20:39:05 - INFO - [server.py:205] - 消息 6: 角色=assistant, 内容长度=4
2025-07-13 20:39:05 - DEBUG - [server.py:206] - 消息 6 内容:  我不好
2025-07-13 20:39:05 - INFO - [server.py:205] - 消息 7: 角色=user, 内容长度=2
2025-07-13 20:39:05 - INFO - [server.py:205] - 消息 7: 角色=user, 内容长度=2
2025-07-13 20:39:05 - DEBUG - [server.py:206] - 消息 7 内容: 你好
2025-07-13 20:39:05 - INFO - [server.py:205] - 消息 8: 角色=assistant, 内容长度=4
2025-07-13 20:39:05 - INFO - [server.py:205] - 消息 8: 角色=assistant, 内容长度=4
2025-07-13 20:39:05 - DEBUG - [server.py:206] - 消息 8 内容:  我不好
2025-07-13 20:39:05 - INFO - [server.py:205] - 消息 9: 角色=user, 内容长度=2
2025-07-13 20:39:05 - INFO - [server.py:205] - 消息 9: 角色=user, 内容长度=2
2025-07-13 20:39:05 - DEBUG - [server.py:206] - 消息 9 内容: 你好
2025-07-13 20:39:05 - INFO - [server.py:205] - 消息 10: 角色=assistant, 内容长度=4
2025-07-13 20:39:05 - INFO - [server.py:205] - 消息 10: 角色=assistant, 内容长度=4
2025-07-13 20:39:05 - DEBUG - [server.py:206] - 消息 10 内容:  我不好
2025-07-13 20:39:05 - INFO - [server.py:205] - 消息 11: 角色=user, 内容长度=2
2025-07-13 20:39:05 - INFO - [server.py:205] - 消息 11: 角色=user, 内容长度=2
2025-07-13 20:39:05 - DEBUG - [server.py:206] - 消息 11 内容: 你好
2025-07-13 20:39:05 - INFO - [server.py:205] - 消息 12: 角色=assistant, 内容长度=4
2025-07-13 20:39:05 - INFO - [server.py:205] - 消息 12: 角色=assistant, 内容长度=4
2025-07-13 20:39:05 - DEBUG - [server.py:206] - 消息 12 内容:  我不好
2025-07-13 20:39:05 - INFO - [server.py:205] - 消息 13: 角色=user, 内容长度=2
2025-07-13 20:39:05 - INFO - [server.py:205] - 消息 13: 角色=user, 内容长度=2
2025-07-13 20:39:05 - DEBUG - [server.py:206] - 消息 13 内容: 你好
2025-07-13 20:39:05 - INFO - [server.py:208] - 设置参数: {
  "temperature": 0.2,
  "top_p": 0.5,
  "gen_length": 64,
  "num_beams": 4,
  "steps": 32,
  "cfg_scale": 0.3,
  "constraints": "0:我不好"
}
2025-07-13 20:39:05 - INFO - [server.py:208] - 设置参数: {
  "temperature": 0.2,
  "top_p": 0.5,
  "gen_length": 64,
  "num_beams": 4,
  "steps": 32,
  "cfg_scale": 0.3,
  "constraints": "0:我不好"
}
2025-07-13 20:39:05 - INFO - [server.py:220] - 解析后的约束: {0: '我不好'}
2025-07-13 20:39:05 - INFO - [server.py:220] - 解析后的约束: {0: '我不好'}
2025-07-13 20:39:05 - INFO - [server.py:225] - 生成前GPU内存使用: 14.94GB
2025-07-13 20:39:05 - INFO - [server.py:225] - 生成前GPU内存使用: 14.94GB
2025-07-13 20:39:05 - INFO - [server.py:228] - 准备输入prompt...
2025-07-13 20:39:05 - INFO - [server.py:228] - 准备输入prompt...
2025-07-13 20:39:05 - DEBUG - [server.py:230] - 格式化后的chat输入: <|startoftext|><|start_header_id|>user<|end_header_id|>

你好<|eot_id|><|start_header_id|>assistant<|end_header_id|>

兴趣爱好
* 学业
* 工作
* 旅行
* 兴趣爱好
* 编程
* 技术
* 其他话题<|eot_id|><|start_header_id|>user<|end_header_id|>

你好<|eot_id|><|start_header_id|>assistant<|end_header_id|>

<|eot_id|><|start_header_id|>user<|end_header_id|>

你好<|eot_id|><|start_header_id|>assistant<|end_header_id|>

我不好<|eot_id|><|start_header_id|>user<|end_header_id|>

你好<|eot_id|><|start_header_id|>assistant<|end_header_id|>

我不好<|eot_id|><|start_header_id|>user<|end_header_id|>

你好<|eot_id|><|start_header_id|>assistant<|end_header_id|>

我不好<|eot_id|><|start_header_id|>user<|end_header_id|>

你好<|eot_id|><|start_header_id|>assistant<|end_header_id|>

我不好<|eot_id|><|start_header_id|>user<|end_header_id|>

你好<|eot_id|><|start_header_id|>assistant<|end_header_id|>


2025-07-13 20:39:05 - INFO - [server.py:234] - 输入token数量: 133
2025-07-13 20:39:05 - INFO - [server.py:234] - 输入token数量: 133
2025-07-13 20:39:05 - INFO - [server.py:241] - 序列总长度: 197, prompt长度: 133, 生成长度: 64
2025-07-13 20:39:05 - INFO - [server.py:241] - 序列总长度: 197, prompt长度: 133, 生成长度: 64
2025-07-13 20:39:05 - INFO - [server.py:250] - 应用约束数量: 2
2025-07-13 20:39:05 - INFO - [server.py:250] - 应用约束数量: 2
2025-07-13 20:39:05 - DEBUG - [server.py:255] - 约束位置 0 (绝对位置 133): token_id=5541
2025-07-13 20:39:05 - DEBUG - [server.py:255] - 约束位置 1 (绝对位置 134): token_id=7043
2025-07-13 20:39:05 - INFO - [server.py:270] - 块处理配置: 块长度=32, 块数量=2, 每块步数=16
2025-07-13 20:39:05 - INFO - [server.py:270] - 块处理配置: 块长度=32, 块数量=2, 每块步数=16
2025-07-13 20:39:05 - INFO - [server.py:274] - 处理第 1/2 块...
2025-07-13 20:39:05 - INFO - [server.py:274] - 处理第 1/2 块...
2025-07-13 20:39:05 - INFO - [server.py:274] - 处理第 2/2 块...
2025-07-13 20:39:05 - INFO - [server.py:274] - 处理第 2/2 块...
2025-07-13 20:39:06 - INFO - [server.py:381] - 生成后GPU内存使用: 20.66GB
2025-07-13 20:39:06 - INFO - [server.py:381] - 生成后GPU内存使用: 20.66GB
2025-07-13 20:39:06 - INFO - [server.py:383] - 生成完成!
2025-07-13 20:39:06 - INFO - [server.py:383] - 生成完成!
2025-07-13 20:39:06 - INFO - [server.py:384] - 响应文本长度: 4
2025-07-13 20:39:06 - INFO - [server.py:384] - 响应文本长度: 4
2025-07-13 20:39:06 - INFO - [server.py:385] - 可视化步骤数: 17
2025-07-13 20:39:06 - INFO - [server.py:385] - 可视化步骤数: 17
2025-07-13 20:39:06 - INFO - [server.py:386] - 生成耗时: 1.12秒
2025-07-13 20:39:06 - INFO - [server.py:386] - 生成耗时: 1.12秒
2025-07-13 20:39:06 - DEBUG - [server.py:387] - 生成的响应文本:  我不好
2025-07-13 20:39:06 - INFO - [server.py:388] - ============================================================
2025-07-13 20:39:06 - INFO - [server.py:388] - ============================================================
2025-07-13 20:39:06 - INFO - [server.py:460] - [req_1752410345619] 生成成功!
2025-07-13 20:39:06 - INFO - [server.py:460] - [req_1752410345619] 生成成功!
2025-07-13 20:39:06 - INFO - [server.py:461] - [req_1752410345619] 响应长度: 4
2025-07-13 20:39:06 - INFO - [server.py:461] - [req_1752410345619] 响应长度: 4
2025-07-13 20:39:06 - INFO - [server.py:462] - [req_1752410345619] 可视化步骤: 17
2025-07-13 20:39:06 - INFO - [server.py:462] - [req_1752410345619] 可视化步骤: 17
2025-07-13 20:39:06 - INFO - [server.py:463] - [req_1752410345619] 总耗时: 1.13秒
2025-07-13 20:39:06 - INFO - [server.py:463] - [req_1752410345619] 总耗时: 1.13秒
2025-07-13 20:39:06 - DEBUG - [server.py:464] - [req_1752410345619] 响应文本:  我不好
2025-07-13 20:39:06 - INFO - [server.py:92] - 发送响应: {
  "status_code": 200,
  "content_length": 21468,
  "content_type": "application/json",
  "timestamp": "2025-07-13T20:39:06.750891"
}
2025-07-13 20:39:06 - INFO - [server.py:92] - 发送响应: {
  "status_code": 200,
  "content_length": 21468,
  "content_type": "application/json",
  "timestamp": "2025-07-13T20:39:06.750891"
}
2025-07-13 20:39:06 - INFO - [_internal.py:97] - 127.0.0.1 - - [13/Jul/2025 20:39:06] "POST /generate HTTP/1.1" 200 -
2025-07-13 20:39:06 - INFO - [_internal.py:97] - 127.0.0.1 - - [13/Jul/2025 20:39:06] "POST /generate HTTP/1.1" 200 -
2025-07-13 20:39:23 - INFO - [server.py:73] - 收到请求: {
  "method": "GET",
  "url": "http://localhost:9000/health",
  "remote_addr": "127.0.0.1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36 Edg/138.0.0.0",
  "timestamp": "2025-07-13T20:39:23.749978"
}
2025-07-13 20:39:23 - INFO - [server.py:73] - 收到请求: {
  "method": "GET",
  "url": "http://localhost:9000/health",
  "remote_addr": "127.0.0.1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36 Edg/138.0.0.0",
  "timestamp": "2025-07-13T20:39:23.749978"
}
2025-07-13 20:39:23 - INFO - [server.py:92] - 发送响应: {
  "status_code": 200,
  "content_length": 37,
  "content_type": "application/json",
  "timestamp": "2025-07-13T20:39:23.750819",
  "response_body": "{\"device\":\"cuda\",\"status\":\"healthy\"}\n"
}
2025-07-13 20:39:23 - INFO - [server.py:92] - 发送响应: {
  "status_code": 200,
  "content_length": 37,
  "content_type": "application/json",
  "timestamp": "2025-07-13T20:39:23.750819",
  "response_body": "{\"device\":\"cuda\",\"status\":\"healthy\"}\n"
}
2025-07-13 20:39:23 - INFO - [_internal.py:97] - 127.0.0.1 - - [13/Jul/2025 20:39:23] "GET /health HTTP/1.1" 200 -
2025-07-13 20:39:23 - INFO - [_internal.py:97] - 127.0.0.1 - - [13/Jul/2025 20:39:23] "GET /health HTTP/1.1" 200 -
2025-07-13 20:39:54 - INFO - [server.py:73] - 收到请求: {
  "method": "GET",
  "url": "http://localhost:9000/health",
  "remote_addr": "127.0.0.1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36 Edg/138.0.0.0",
  "timestamp": "2025-07-13T20:39:54.346547"
}
2025-07-13 20:39:54 - INFO - [server.py:73] - 收到请求: {
  "method": "GET",
  "url": "http://localhost:9000/health",
  "remote_addr": "127.0.0.1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36 Edg/138.0.0.0",
  "timestamp": "2025-07-13T20:39:54.346547"
}
2025-07-13 20:39:54 - INFO - [server.py:92] - 发送响应: {
  "status_code": 200,
  "content_length": 37,
  "content_type": "application/json",
  "timestamp": "2025-07-13T20:39:54.347329",
  "response_body": "{\"device\":\"cuda\",\"status\":\"healthy\"}\n"
}
2025-07-13 20:39:54 - INFO - [server.py:92] - 发送响应: {
  "status_code": 200,
  "content_length": 37,
  "content_type": "application/json",
  "timestamp": "2025-07-13T20:39:54.347329",
  "response_body": "{\"device\":\"cuda\",\"status\":\"healthy\"}\n"
}
2025-07-13 20:39:54 - INFO - [_internal.py:97] - 127.0.0.1 - - [13/Jul/2025 20:39:54] "GET /health HTTP/1.1" 200 -
2025-07-13 20:39:54 - INFO - [_internal.py:97] - 127.0.0.1 - - [13/Jul/2025 20:39:54] "GET /health HTTP/1.1" 200 -
2025-07-13 20:40:23 - INFO - [server.py:73] - 收到请求: {
  "method": "GET",
  "url": "http://localhost:9000/health",
  "remote_addr": "127.0.0.1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36 Edg/138.0.0.0",
  "timestamp": "2025-07-13T20:40:23.748910"
}
2025-07-13 20:40:23 - INFO - [server.py:73] - 收到请求: {
  "method": "GET",
  "url": "http://localhost:9000/health",
  "remote_addr": "127.0.0.1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36 Edg/138.0.0.0",
  "timestamp": "2025-07-13T20:40:23.748910"
}
2025-07-13 20:40:23 - INFO - [server.py:92] - 发送响应: {
  "status_code": 200,
  "content_length": 37,
  "content_type": "application/json",
  "timestamp": "2025-07-13T20:40:23.749278",
  "response_body": "{\"device\":\"cuda\",\"status\":\"healthy\"}\n"
}
2025-07-13 20:40:23 - INFO - [server.py:92] - 发送响应: {
  "status_code": 200,
  "content_length": 37,
  "content_type": "application/json",
  "timestamp": "2025-07-13T20:40:23.749278",
  "response_body": "{\"device\":\"cuda\",\"status\":\"healthy\"}\n"
}
2025-07-13 20:40:23 - INFO - [_internal.py:97] - 127.0.0.1 - - [13/Jul/2025 20:40:23] "GET /health HTTP/1.1" 200 -
2025-07-13 20:40:23 - INFO - [_internal.py:97] - 127.0.0.1 - - [13/Jul/2025 20:40:23] "GET /health HTTP/1.1" 200 -
2025-07-13 20:40:34 - INFO - [server.py:73] - 收到请求: {
  "method": "OPTIONS",
  "url": "http://localhost:9000/generate",
  "remote_addr": "127.0.0.1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36 Edg/138.0.0.0",
  "timestamp": "2025-07-13T20:40:34.375156"
}
2025-07-13 20:40:34 - INFO - [server.py:73] - 收到请求: {
  "method": "OPTIONS",
  "url": "http://localhost:9000/generate",
  "remote_addr": "127.0.0.1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36 Edg/138.0.0.0",
  "timestamp": "2025-07-13T20:40:34.375156"
}
2025-07-13 20:40:34 - INFO - [server.py:92] - 发送响应: {
  "status_code": 200,
  "content_length": null,
  "content_type": "text/html; charset=utf-8",
  "timestamp": "2025-07-13T20:40:34.376080"
}
2025-07-13 20:40:34 - INFO - [server.py:92] - 发送响应: {
  "status_code": 200,
  "content_length": null,
  "content_type": "text/html; charset=utf-8",
  "timestamp": "2025-07-13T20:40:34.376080"
}
2025-07-13 20:40:34 - INFO - [_internal.py:97] - 127.0.0.1 - - [13/Jul/2025 20:40:34] "OPTIONS /generate HTTP/1.1" 200 -
2025-07-13 20:40:34 - INFO - [_internal.py:97] - 127.0.0.1 - - [13/Jul/2025 20:40:34] "OPTIONS /generate HTTP/1.1" 200 -
2025-07-13 20:40:34 - INFO - [server.py:73] - 收到请求: {
  "method": "POST",
  "url": "http://localhost:9000/generate",
  "remote_addr": "127.0.0.1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36 Edg/138.0.0.0",
  "timestamp": "2025-07-13T20:40:34.747019",
  "json_data": {
    "messages": [
      {
        "role": "user",
        "content": "你好"
      },
      {
        "role": "assistant",
        "content": "兴趣爱好\n* 学业\n* 工作\n* 旅行\n* 兴趣爱好\n* 编程\n* 技术\n* 其他话题"
      },
      {
        "role": "user",
        "content": "你好"
      },
      {
        "role": "assistant",
        "content": ""
      },
      {
        "role": "user",
        "content": "你好"
      },
      {
        "role": "assistant",
        "content": " 我不好"
      },
      {
        "role": "user",
        "content": "你好"
      },
      {
        "role": "assistant",
        "content": " 我不好"
      },
      {
        "role": "user",
        "content": "你好"
      },
      {
        "role": "assistant",
        "content": " 我不好"
      },
      {
        "role": "user",
        "content": "你好"
      },
      {
        "role": "assistant",
        "content": " 我不好"
      },
      {
        "role": "user",
        "content": "你好"
      },
      {
        "role": "assistant",
        "content": " 我不好"
      },
      {
        "role": "user",
        "content": "不理解"
      }
    ],
    "settings": {
      "temperature": 0.2,
      "top_p": 0.5,
      "gen_length": 64,
      "num_beams": 4,
      "steps": 64,
      "cfg_scale": 0.3,
      "constraints": ""
    }
  }
}
2025-07-13 20:40:34 - INFO - [server.py:73] - 收到请求: {
  "method": "POST",
  "url": "http://localhost:9000/generate",
  "remote_addr": "127.0.0.1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36 Edg/138.0.0.0",
  "timestamp": "2025-07-13T20:40:34.747019",
  "json_data": {
    "messages": [
      {
        "role": "user",
        "content": "你好"
      },
      {
        "role": "assistant",
        "content": "兴趣爱好\n* 学业\n* 工作\n* 旅行\n* 兴趣爱好\n* 编程\n* 技术\n* 其他话题"
      },
      {
        "role": "user",
        "content": "你好"
      },
      {
        "role": "assistant",
        "content": ""
      },
      {
        "role": "user",
        "content": "你好"
      },
      {
        "role": "assistant",
        "content": " 我不好"
      },
      {
        "role": "user",
        "content": "你好"
      },
      {
        "role": "assistant",
        "content": " 我不好"
      },
      {
        "role": "user",
        "content": "你好"
      },
      {
        "role": "assistant",
        "content": " 我不好"
      },
      {
        "role": "user",
        "content": "你好"
      },
      {
        "role": "assistant",
        "content": " 我不好"
      },
      {
        "role": "user",
        "content": "你好"
      },
      {
        "role": "assistant",
        "content": " 我不好"
      },
      {
        "role": "user",
        "content": "不理解"
      }
    ],
    "settings": {
      "temperature": 0.2,
      "top_p": 0.5,
      "gen_length": 64,
      "num_beams": 4,
      "steps": 64,
      "cfg_scale": 0.3,
      "constraints": ""
    }
  }
}
2025-07-13 20:40:34 - INFO - [server.py:429] - [req_1752410434748] 收到生成请求
2025-07-13 20:40:34 - INFO - [server.py:429] - [req_1752410434748] 收到生成请求
2025-07-13 20:40:34 - INFO - [server.py:437] - [req_1752410434748] 请求数据详情:
2025-07-13 20:40:34 - INFO - [server.py:437] - [req_1752410434748] 请求数据详情:
2025-07-13 20:40:34 - INFO - [server.py:438] - [req_1752410434748] - 消息数量: 15
2025-07-13 20:40:34 - INFO - [server.py:438] - [req_1752410434748] - 消息数量: 15
2025-07-13 20:40:34 - INFO - [server.py:439] - [req_1752410434748] - 设置参数: {
  "temperature": 0.2,
  "top_p": 0.5,
  "gen_length": 64,
  "num_beams": 4,
  "steps": 64,
  "cfg_scale": 0.3,
  "constraints": ""
}
2025-07-13 20:40:34 - INFO - [server.py:439] - [req_1752410434748] - 设置参数: {
  "temperature": 0.2,
  "top_p": 0.5,
  "gen_length": 64,
  "num_beams": 4,
  "steps": 64,
  "cfg_scale": 0.3,
  "constraints": ""
}
2025-07-13 20:40:34 - DEBUG - [server.py:440] - [req_1752410434748] - 完整消息列表: [
  {
    "role": "user",
    "content": "你好"
  },
  {
    "role": "assistant",
    "content": "兴趣爱好\n* 学业\n* 工作\n* 旅行\n* 兴趣爱好\n* 编程\n* 技术\n* 其他话题"
  },
  {
    "role": "user",
    "content": "你好"
  },
  {
    "role": "assistant",
    "content": ""
  },
  {
    "role": "user",
    "content": "你好"
  },
  {
    "role": "assistant",
    "content": " 我不好"
  },
  {
    "role": "user",
    "content": "你好"
  },
  {
    "role": "assistant",
    "content": " 我不好"
  },
  {
    "role": "user",
    "content": "你好"
  },
  {
    "role": "assistant",
    "content": " 我不好"
  },
  {
    "role": "user",
    "content": "你好"
  },
  {
    "role": "assistant",
    "content": " 我不好"
  },
  {
    "role": "user",
    "content": "你好"
  },
  {
    "role": "assistant",
    "content": " 我不好"
  },
  {
    "role": "user",
    "content": "不理解"
  }
]
2025-07-13 20:40:34 - INFO - [server.py:451] - [req_1752410434748] 开始生成响应...
2025-07-13 20:40:34 - INFO - [server.py:451] - [req_1752410434748] 开始生成响应...
2025-07-13 20:40:34 - INFO - [server.py:201] - ============================================================
2025-07-13 20:40:34 - INFO - [server.py:201] - ============================================================
2025-07-13 20:40:34 - INFO - [server.py:202] - 开始生成响应
2025-07-13 20:40:34 - INFO - [server.py:202] - 开始生成响应
2025-07-13 20:40:34 - INFO - [server.py:203] - 输入消息数量: 15
2025-07-13 20:40:34 - INFO - [server.py:203] - 输入消息数量: 15
2025-07-13 20:40:34 - INFO - [server.py:205] - 消息 1: 角色=user, 内容长度=2
2025-07-13 20:40:34 - INFO - [server.py:205] - 消息 1: 角色=user, 内容长度=2
2025-07-13 20:40:34 - DEBUG - [server.py:206] - 消息 1 内容: 你好
2025-07-13 20:40:34 - INFO - [server.py:205] - 消息 2: 角色=assistant, 内容长度=43
2025-07-13 20:40:34 - INFO - [server.py:205] - 消息 2: 角色=assistant, 内容长度=43
2025-07-13 20:40:34 - DEBUG - [server.py:206] - 消息 2 内容: 兴趣爱好
* 学业
* 工作
* 旅行
* 兴趣爱好
* 编程
* 技术
* 其他话题
2025-07-13 20:40:34 - INFO - [server.py:205] - 消息 3: 角色=user, 内容长度=2
2025-07-13 20:40:34 - INFO - [server.py:205] - 消息 3: 角色=user, 内容长度=2
2025-07-13 20:40:34 - DEBUG - [server.py:206] - 消息 3 内容: 你好
2025-07-13 20:40:34 - INFO - [server.py:205] - 消息 4: 角色=assistant, 内容长度=0
2025-07-13 20:40:34 - INFO - [server.py:205] - 消息 4: 角色=assistant, 内容长度=0
2025-07-13 20:40:34 - DEBUG - [server.py:206] - 消息 4 内容: 
2025-07-13 20:40:34 - INFO - [server.py:205] - 消息 5: 角色=user, 内容长度=2
2025-07-13 20:40:34 - INFO - [server.py:205] - 消息 5: 角色=user, 内容长度=2
2025-07-13 20:40:34 - DEBUG - [server.py:206] - 消息 5 内容: 你好
2025-07-13 20:40:34 - INFO - [server.py:205] - 消息 6: 角色=assistant, 内容长度=4
2025-07-13 20:40:34 - INFO - [server.py:205] - 消息 6: 角色=assistant, 内容长度=4
2025-07-13 20:40:34 - DEBUG - [server.py:206] - 消息 6 内容:  我不好
2025-07-13 20:40:34 - INFO - [server.py:205] - 消息 7: 角色=user, 内容长度=2
2025-07-13 20:40:34 - INFO - [server.py:205] - 消息 7: 角色=user, 内容长度=2
2025-07-13 20:40:34 - DEBUG - [server.py:206] - 消息 7 内容: 你好
2025-07-13 20:40:34 - INFO - [server.py:205] - 消息 8: 角色=assistant, 内容长度=4
2025-07-13 20:40:34 - INFO - [server.py:205] - 消息 8: 角色=assistant, 内容长度=4
2025-07-13 20:40:34 - DEBUG - [server.py:206] - 消息 8 内容:  我不好
2025-07-13 20:40:34 - INFO - [server.py:205] - 消息 9: 角色=user, 内容长度=2
2025-07-13 20:40:34 - INFO - [server.py:205] - 消息 9: 角色=user, 内容长度=2
2025-07-13 20:40:34 - DEBUG - [server.py:206] - 消息 9 内容: 你好
2025-07-13 20:40:34 - INFO - [server.py:205] - 消息 10: 角色=assistant, 内容长度=4
2025-07-13 20:40:34 - INFO - [server.py:205] - 消息 10: 角色=assistant, 内容长度=4
2025-07-13 20:40:34 - DEBUG - [server.py:206] - 消息 10 内容:  我不好
2025-07-13 20:40:34 - INFO - [server.py:205] - 消息 11: 角色=user, 内容长度=2
2025-07-13 20:40:34 - INFO - [server.py:205] - 消息 11: 角色=user, 内容长度=2
2025-07-13 20:40:34 - DEBUG - [server.py:206] - 消息 11 内容: 你好
2025-07-13 20:40:34 - INFO - [server.py:205] - 消息 12: 角色=assistant, 内容长度=4
2025-07-13 20:40:34 - INFO - [server.py:205] - 消息 12: 角色=assistant, 内容长度=4
2025-07-13 20:40:34 - DEBUG - [server.py:206] - 消息 12 内容:  我不好
2025-07-13 20:40:34 - INFO - [server.py:205] - 消息 13: 角色=user, 内容长度=2
2025-07-13 20:40:34 - INFO - [server.py:205] - 消息 13: 角色=user, 内容长度=2
2025-07-13 20:40:34 - DEBUG - [server.py:206] - 消息 13 内容: 你好
2025-07-13 20:40:34 - INFO - [server.py:205] - 消息 14: 角色=assistant, 内容长度=4
2025-07-13 20:40:34 - INFO - [server.py:205] - 消息 14: 角色=assistant, 内容长度=4
2025-07-13 20:40:34 - DEBUG - [server.py:206] - 消息 14 内容:  我不好
2025-07-13 20:40:34 - INFO - [server.py:205] - 消息 15: 角色=user, 内容长度=3
2025-07-13 20:40:34 - INFO - [server.py:205] - 消息 15: 角色=user, 内容长度=3
2025-07-13 20:40:34 - DEBUG - [server.py:206] - 消息 15 内容: 不理解
2025-07-13 20:40:34 - INFO - [server.py:208] - 设置参数: {
  "temperature": 0.2,
  "top_p": 0.5,
  "gen_length": 64,
  "num_beams": 4,
  "steps": 64,
  "cfg_scale": 0.3,
  "constraints": ""
}
2025-07-13 20:40:34 - INFO - [server.py:208] - 设置参数: {
  "temperature": 0.2,
  "top_p": 0.5,
  "gen_length": 64,
  "num_beams": 4,
  "steps": 64,
  "cfg_scale": 0.3,
  "constraints": ""
}
2025-07-13 20:40:34 - INFO - [server.py:220] - 解析后的约束: {}
2025-07-13 20:40:34 - INFO - [server.py:220] - 解析后的约束: {}
2025-07-13 20:40:34 - INFO - [server.py:225] - 生成前GPU内存使用: 14.94GB
2025-07-13 20:40:34 - INFO - [server.py:225] - 生成前GPU内存使用: 14.94GB
2025-07-13 20:40:34 - INFO - [server.py:228] - 准备输入prompt...
2025-07-13 20:40:34 - INFO - [server.py:228] - 准备输入prompt...
2025-07-13 20:40:34 - DEBUG - [server.py:230] - 格式化后的chat输入: <|startoftext|><|start_header_id|>user<|end_header_id|>

你好<|eot_id|><|start_header_id|>assistant<|end_header_id|>

兴趣爱好
* 学业
* 工作
* 旅行
* 兴趣爱好
* 编程
* 技术
* 其他话题<|eot_id|><|start_header_id|>user<|end_header_id|>

你好<|eot_id|><|start_header_id|>assistant<|end_header_id|>

<|eot_id|><|start_header_id|>user<|end_header_id|>

你好<|eot_id|><|start_header_id|>assistant<|end_header_id|>

我不好<|eot_id|><|start_header_id|>user<|end_header_id|>

你好<|eot_id|><|start_header_id|>assistant<|end_header_id|>

我不好<|eot_id|><|start_header_id|>user<|end_header_id|>

你好<|eot_id|><|start_header_id|>assistant<|end_header_id|>

我不好<|eot_id|><|start_header_id|>user<|end_header_id|>

你好<|eot_id|><|start_header_id|>assistant<|end_header_id|>

我不好<|eot_id|><|start_header_id|>user<|end_header_id|>

你好<|eot_id|><|start_header_id|>assistant<|end_header_id|>

我不好<|eot_id|><|start_header_id|>user<|end_header_id|>

不理解<|eot_id|><|start_header_id|>assistant<|end_header_id|>


2025-07-13 20:40:34 - INFO - [server.py:234] - 输入token数量: 149
2025-07-13 20:40:34 - INFO - [server.py:234] - 输入token数量: 149
2025-07-13 20:40:34 - INFO - [server.py:241] - 序列总长度: 213, prompt长度: 149, 生成长度: 64
2025-07-13 20:40:34 - INFO - [server.py:241] - 序列总长度: 213, prompt长度: 149, 生成长度: 64
2025-07-13 20:40:34 - INFO - [server.py:250] - 应用约束数量: 0
2025-07-13 20:40:34 - INFO - [server.py:250] - 应用约束数量: 0
2025-07-13 20:40:34 - INFO - [server.py:270] - 块处理配置: 块长度=32, 块数量=2, 每块步数=32
2025-07-13 20:40:34 - INFO - [server.py:270] - 块处理配置: 块长度=32, 块数量=2, 每块步数=32
2025-07-13 20:40:34 - INFO - [server.py:274] - 处理第 1/2 块...
2025-07-13 20:40:34 - INFO - [server.py:274] - 处理第 1/2 块...
2025-07-13 20:40:34 - INFO - [server.py:274] - 处理第 2/2 块...
2025-07-13 20:40:34 - INFO - [server.py:274] - 处理第 2/2 块...
2025-07-13 20:40:37 - INFO - [server.py:381] - 生成后GPU内存使用: 21.13GB
2025-07-13 20:40:37 - INFO - [server.py:381] - 生成后GPU内存使用: 21.13GB
2025-07-13 20:40:37 - INFO - [server.py:383] - 生成完成!
2025-07-13 20:40:37 - INFO - [server.py:383] - 生成完成!
2025-07-13 20:40:37 - INFO - [server.py:384] - 响应文本长度: 0
2025-07-13 20:40:37 - INFO - [server.py:384] - 响应文本长度: 0
2025-07-13 20:40:37 - INFO - [server.py:385] - 可视化步骤数: 33
2025-07-13 20:40:37 - INFO - [server.py:385] - 可视化步骤数: 33
2025-07-13 20:40:37 - INFO - [server.py:386] - 生成耗时: 2.54秒
2025-07-13 20:40:37 - INFO - [server.py:386] - 生成耗时: 2.54秒
2025-07-13 20:40:37 - DEBUG - [server.py:387] - 生成的响应文本: 
2025-07-13 20:40:37 - INFO - [server.py:388] - ============================================================
2025-07-13 20:40:37 - INFO - [server.py:388] - ============================================================
2025-07-13 20:40:37 - INFO - [server.py:460] - [req_1752410434748] 生成成功!
2025-07-13 20:40:37 - INFO - [server.py:460] - [req_1752410434748] 生成成功!
2025-07-13 20:40:37 - INFO - [server.py:461] - [req_1752410434748] 响应长度: 0
2025-07-13 20:40:37 - INFO - [server.py:461] - [req_1752410434748] 响应长度: 0
2025-07-13 20:40:37 - INFO - [server.py:462] - [req_1752410434748] 可视化步骤: 33
2025-07-13 20:40:37 - INFO - [server.py:462] - [req_1752410434748] 可视化步骤: 33
2025-07-13 20:40:37 - INFO - [server.py:463] - [req_1752410434748] 总耗时: 2.54秒
2025-07-13 20:40:37 - INFO - [server.py:463] - [req_1752410434748] 总耗时: 2.54秒
2025-07-13 20:40:37 - DEBUG - [server.py:464] - [req_1752410434748] 响应文本: 
2025-07-13 20:40:37 - INFO - [server.py:92] - 发送响应: {
  "status_code": 200,
  "content_length": 41337,
  "content_type": "application/json",
  "timestamp": "2025-07-13T20:40:37.293237"
}
2025-07-13 20:40:37 - INFO - [server.py:92] - 发送响应: {
  "status_code": 200,
  "content_length": 41337,
  "content_type": "application/json",
  "timestamp": "2025-07-13T20:40:37.293237"
}
2025-07-13 20:40:37 - INFO - [_internal.py:97] - 127.0.0.1 - - [13/Jul/2025 20:40:37] "POST /generate HTTP/1.1" 200 -
2025-07-13 20:40:37 - INFO - [_internal.py:97] - 127.0.0.1 - - [13/Jul/2025 20:40:37] "POST /generate HTTP/1.1" 200 -
2025-07-13 20:40:53 - INFO - [server.py:73] - 收到请求: {
  "method": "GET",
  "url": "http://localhost:9000/health",
  "remote_addr": "127.0.0.1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36 Edg/138.0.0.0",
  "timestamp": "2025-07-13T20:40:53.811099"
}
2025-07-13 20:40:53 - INFO - [server.py:73] - 收到请求: {
  "method": "GET",
  "url": "http://localhost:9000/health",
  "remote_addr": "127.0.0.1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36 Edg/138.0.0.0",
  "timestamp": "2025-07-13T20:40:53.811099"
}
2025-07-13 20:40:53 - INFO - [server.py:92] - 发送响应: {
  "status_code": 200,
  "content_length": 37,
  "content_type": "application/json",
  "timestamp": "2025-07-13T20:40:53.812106",
  "response_body": "{\"device\":\"cuda\",\"status\":\"healthy\"}\n"
}
2025-07-13 20:40:53 - INFO - [server.py:92] - 发送响应: {
  "status_code": 200,
  "content_length": 37,
  "content_type": "application/json",
  "timestamp": "2025-07-13T20:40:53.812106",
  "response_body": "{\"device\":\"cuda\",\"status\":\"healthy\"}\n"
}
2025-07-13 20:40:53 - INFO - [_internal.py:97] - 127.0.0.1 - - [13/Jul/2025 20:40:53] "GET /health HTTP/1.1" 200 -
2025-07-13 20:40:53 - INFO - [_internal.py:97] - 127.0.0.1 - - [13/Jul/2025 20:40:53] "GET /health HTTP/1.1" 200 -
2025-07-13 20:41:24 - INFO - [server.py:73] - 收到请求: {
  "method": "GET",
  "url": "http://localhost:9000/health",
  "remote_addr": "127.0.0.1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36 Edg/138.0.0.0",
  "timestamp": "2025-07-13T20:41:24.329371"
}
2025-07-13 20:41:24 - INFO - [server.py:73] - 收到请求: {
  "method": "GET",
  "url": "http://localhost:9000/health",
  "remote_addr": "127.0.0.1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36 Edg/138.0.0.0",
  "timestamp": "2025-07-13T20:41:24.329371"
}
2025-07-13 20:41:24 - INFO - [server.py:92] - 发送响应: {
  "status_code": 200,
  "content_length": 37,
  "content_type": "application/json",
  "timestamp": "2025-07-13T20:41:24.329850",
  "response_body": "{\"device\":\"cuda\",\"status\":\"healthy\"}\n"
}
2025-07-13 20:41:24 - INFO - [server.py:92] - 发送响应: {
  "status_code": 200,
  "content_length": 37,
  "content_type": "application/json",
  "timestamp": "2025-07-13T20:41:24.329850",
  "response_body": "{\"device\":\"cuda\",\"status\":\"healthy\"}\n"
}
2025-07-13 20:41:24 - INFO - [_internal.py:97] - 127.0.0.1 - - [13/Jul/2025 20:41:24] "GET /health HTTP/1.1" 200 -
2025-07-13 20:41:24 - INFO - [_internal.py:97] - 127.0.0.1 - - [13/Jul/2025 20:41:24] "GET /health HTTP/1.1" 200 -
2025-07-13 20:41:53 - INFO - [server.py:73] - 收到请求: {
  "method": "GET",
  "url": "http://localhost:9000/health",
  "remote_addr": "127.0.0.1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36 Edg/138.0.0.0",
  "timestamp": "2025-07-13T20:41:53.749432"
}
2025-07-13 20:41:53 - INFO - [server.py:73] - 收到请求: {
  "method": "GET",
  "url": "http://localhost:9000/health",
  "remote_addr": "127.0.0.1",
  "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36 Edg/138.0.0.0",
  "timestamp": "2025-07-13T20:41:53.749432"
}
2025-07-13 20:41:53 - INFO - [server.py:92] - 发送响应: {
  "status_code": 200,
  "content_length": 37,
  "content_type": "application/json",
  "timestamp": "2025-07-13T20:41:53.750260",
  "response_body": "{\"device\":\"cuda\",\"status\":\"healthy\"}\n"
}
2025-07-13 20:41:53 - INFO - [server.py:92] - 发送响应: {
  "status_code": 200,
  "content_length": 37,
  "content_type": "application/json",
  "timestamp": "2025-07-13T20:41:53.750260",
  "response_body": "{\"device\":\"cuda\",\"status\":\"healthy\"}\n"
}
2025-07-13 20:41:53 - INFO - [_internal.py:97] - 127.0.0.1 - - [13/Jul/2025 20:41:53] "GET /health HTTP/1.1" 200 -
2025-07-13 20:41:53 - INFO - [_internal.py:97] - 127.0.0.1 - - [13/Jul/2025 20:41:53] "GET /health HTTP/1.1" 200 -
2025-07-13 20:42:30 - INFO - [server.py:97] - 初始化设备: cuda
2025-07-13 20:42:30 - INFO - [server.py:104] - GPU总内存: 23.5GB
2025-07-13 20:42:30 - INFO - [server.py:107] - 开始加载tokenizer...
2025-07-13 20:42:30 - INFO - [server.py:109] - Tokenizer加载成功
2025-07-13 20:42:30 - INFO - [server.py:111] - 开始加载模型...
2025-07-13 20:42:31 - INFO - [modeling.py:991] - We will use 90% of the memory on device 0 for storing the model, and 10% for the buffer to avoid OOM. You can set `max_memory` in to a higher value to use more memory (at your own risk).
2025-07-13 20:42:31 - WARNING - [modeling.py:1114] - The model weights are not tied. Please use the `tie_weights` method before using the `infer_auto_device` function.
2025-07-13 20:42:35 - INFO - [server.py:129] - 模型加载成功，设备: cuda
2025-07-13 20:42:35 - INFO - [server.py:132] - GPU已分配内存: 14.9GB
2025-07-13 20:42:35 - INFO - [_internal.py:97] - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:9000
 * Running on http://172.17.0.3:9000
2025-07-13 20:42:35 - INFO - [_internal.py:97] - [33mPress CTRL+C to quit[0m
