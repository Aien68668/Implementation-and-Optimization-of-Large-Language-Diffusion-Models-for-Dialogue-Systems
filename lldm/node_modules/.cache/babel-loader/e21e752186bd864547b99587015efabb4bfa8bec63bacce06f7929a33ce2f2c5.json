{"ast":null,"code":"var _jsxFileName = \"/root/LLaDA-main/lldm/src/components/ConfidenceIndicator.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\nimport '../styles/ConfidenceIndicator.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ConfidenceIndicator = ({\n  isVisible,\n  onClose,\n  position,\n  onPositionChange\n}) => {\n  _s();\n  const [isDragging, setIsDragging] = useState(false);\n  const [dragOffset, setDragOffset] = useState({\n    x: 0,\n    y: 0\n  });\n  const [isClosing, setIsClosing] = useState(false);\n  const indicatorRef = useRef(null);\n  const confidenceLevels = [{\n    level: 0,\n    color: '#666',\n    label: '[MASK]'\n  }, {\n    level: 0.25,\n    color: 'rgb(191, 64, 0)',\n    label: '低置信度'\n  }, {\n    level: 0.5,\n    color: 'rgb(128, 128, 0)',\n    label: '中置信度'\n  }, {\n    level: 0.75,\n    color: 'rgb(64, 191, 0)',\n    label: '高置信度'\n  }, {\n    level: 1.0,\n    color: 'rgb(0, 255, 0)',\n    label: '确定'\n  }];\n  const handleMouseDown = e => {\n    if (e.target.closest('.close-button')) return;\n    setIsDragging(true);\n    const rect = indicatorRef.current.getBoundingClientRect();\n    setDragOffset({\n      x: e.clientX - rect.left,\n      y: e.clientY - rect.top\n    });\n    e.preventDefault();\n    document.body.style.userSelect = 'none';\n    document.body.style.cursor = 'grabbing';\n    document.body.classList.add('dragging-indicator');\n  };\n  const handleMouseMove = useCallback(e => {\n    if (!isDragging) return;\n    const newX = e.clientX - dragOffset.x;\n    const newY = e.clientY - dragOffset.y;\n    const maxX = window.innerWidth - 280;\n    const maxY = window.innerHeight - 300;\n    const constrainedX = Math.max(0, Math.min(newX, maxX));\n    const constrainedY = Math.max(0, Math.min(newY, maxY));\n    onPositionChange({\n      x: constrainedX,\n      y: constrainedY\n    });\n  }, [isDragging, dragOffset.x, dragOffset.y, onPositionChange]);\n  const handleMouseUp = useCallback(() => {\n    setIsDragging(false);\n    document.body.style.userSelect = '';\n    document.body.style.cursor = '';\n    document.body.classList.remove('dragging-indicator');\n  }, []);\n  const handleClose = () => {\n    setIsClosing(true);\n    setTimeout(() => {\n      onClose();\n      setIsClosing(false);\n    }, 300);\n  };\n  useEffect(() => {\n    if (isDragging) {\n      document.addEventListener('mousemove', handleMouseMove);\n      document.addEventListener('mouseup', handleMouseUp);\n      return () => {\n        document.removeEventListener('mousemove', handleMouseMove);\n        document.removeEventListener('mouseup', handleMouseUp);\n      };\n    }\n  }, [isDragging, handleMouseMove, handleMouseUp]);\n  useEffect(() => {\n    return () => {\n      document.body.style.userSelect = '';\n      document.body.style.cursor = '';\n    };\n  }, []);\n  if (!isVisible && !isClosing) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: indicatorRef,\n    className: `confidence-indicator ${isDragging ? 'dragging' : ''} ${isClosing ? 'closing' : ''}`,\n    style: {\n      left: position.x,\n      top: position.y,\n      cursor: isDragging ? 'grabbing' : 'grab'\n    },\n    onMouseDown: handleMouseDown,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"indicator-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        children: \"\\u7F6E\\u4FE1\\u5EA6\\u6307\\u793A\\u5668\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"close-button\",\n        onClick: handleClose,\n        title: \"\\u5173\\u95ED\",\n        children: \"\\xD7\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }, this), confidenceLevels.map((item, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"confidence-scale\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"color-box\",\n        style: {\n          backgroundColor: item.color\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: item.label\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 11\n      }, this)]\n    }, index, true, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 9\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 88,\n    columnNumber: 5\n  }, this);\n};\n_s(ConfidenceIndicator, \"9BzqoF7y2YdJMOJp4h8i0/EOpIA=\");\n_c = ConfidenceIndicator;\nexport default ConfidenceIndicator;\nvar _c;\n$RefreshReg$(_c, \"ConfidenceIndicator\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","jsxDEV","_jsxDEV","ConfidenceIndicator","isVisible","onClose","position","onPositionChange","_s","isDragging","setIsDragging","dragOffset","setDragOffset","x","y","isClosing","setIsClosing","indicatorRef","confidenceLevels","level","color","label","handleMouseDown","e","target","closest","rect","current","getBoundingClientRect","clientX","left","clientY","top","preventDefault","document","body","style","userSelect","cursor","classList","add","handleMouseMove","newX","newY","maxX","window","innerWidth","maxY","innerHeight","constrainedX","Math","max","min","constrainedY","handleMouseUp","remove","handleClose","setTimeout","addEventListener","removeEventListener","ref","className","onMouseDown","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","title","map","item","index","backgroundColor","_c","$RefreshReg$"],"sources":["/root/LLaDA-main/lldm/src/components/ConfidenceIndicator.js"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from 'react';\nimport '../styles/ConfidenceIndicator.css';\n\nconst ConfidenceIndicator = ({ isVisible, onClose, position, onPositionChange }) => {\n  const [isDragging, setIsDragging] = useState(false);\n  const [dragOffset, setDragOffset] = useState({ x: 0, y: 0 });\n  const [isClosing, setIsClosing] = useState(false);\n  const indicatorRef = useRef(null);\n\n  const confidenceLevels = [\n    { level: 0, color: '#666', label: '[MASK]' },\n    { level: 0.25, color: 'rgb(191, 64, 0)', label: '低置信度' },\n    { level: 0.5, color: 'rgb(128, 128, 0)', label: '中置信度' },\n    { level: 0.75, color: 'rgb(64, 191, 0)', label: '高置信度' },\n    { level: 1.0, color: 'rgb(0, 255, 0)', label: '确定' }\n  ];\n\n  const handleMouseDown = (e) => {\n    if (e.target.closest('.close-button')) return;\n    \n    setIsDragging(true);\n    const rect = indicatorRef.current.getBoundingClientRect();\n    setDragOffset({\n      x: e.clientX - rect.left,\n      y: e.clientY - rect.top\n    });\n    e.preventDefault();\n    \n    document.body.style.userSelect = 'none';\n    document.body.style.cursor = 'grabbing';\n    document.body.classList.add('dragging-indicator');\n  };\n\n  const handleMouseMove = useCallback((e) => {\n    if (!isDragging) return;\n    \n    const newX = e.clientX - dragOffset.x;\n    const newY = e.clientY - dragOffset.y;\n    \n    const maxX = window.innerWidth - 280;\n    const maxY = window.innerHeight - 300;\n    \n    const constrainedX = Math.max(0, Math.min(newX, maxX));\n    const constrainedY = Math.max(0, Math.min(newY, maxY));\n    \n    onPositionChange({\n      x: constrainedX,\n      y: constrainedY\n    });\n  }, [isDragging, dragOffset.x, dragOffset.y, onPositionChange]);\n\n  const handleMouseUp = useCallback(() => {\n    setIsDragging(false);\n    document.body.style.userSelect = '';\n    document.body.style.cursor = '';\n    document.body.classList.remove('dragging-indicator');\n  }, []);\n\n  const handleClose = () => {\n    setIsClosing(true);\n    setTimeout(() => {\n      onClose();\n      setIsClosing(false);\n    }, 300);\n  };\n\n  useEffect(() => {\n    if (isDragging) {\n      document.addEventListener('mousemove', handleMouseMove);\n      document.addEventListener('mouseup', handleMouseUp);\n      return () => {\n        document.removeEventListener('mousemove', handleMouseMove);\n        document.removeEventListener('mouseup', handleMouseUp);\n      };\n    }\n  }, [isDragging, handleMouseMove, handleMouseUp]);\n\n  useEffect(() => {\n    return () => {\n      document.body.style.userSelect = '';\n      document.body.style.cursor = '';\n    };\n  }, []);\n\n  if (!isVisible && !isClosing) return null;\n\n  return (\n    <div \n      ref={indicatorRef}\n      className={`confidence-indicator ${isDragging ? 'dragging' : ''} ${isClosing ? 'closing' : ''}`}\n      style={{\n        left: position.x,\n        top: position.y,\n        cursor: isDragging ? 'grabbing' : 'grab'\n      }}\n      onMouseDown={handleMouseDown}\n    >\n      <div className=\"indicator-header\">\n        <h4>置信度指示器</h4>\n        <button \n          className=\"close-button\"\n          onClick={handleClose}\n          title=\"关闭\"\n        >\n          ×\n        </button>\n      </div>\n      {confidenceLevels.map((item, index) => (\n        <div key={index} className=\"confidence-scale\">\n          <div \n            className=\"color-box\" \n            style={{ backgroundColor: item.color }}\n          ></div>\n          <span>{item.label}</span>\n        </div>\n      ))}\n    </div>\n  );\n};\n\nexport default ConfidenceIndicator;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}