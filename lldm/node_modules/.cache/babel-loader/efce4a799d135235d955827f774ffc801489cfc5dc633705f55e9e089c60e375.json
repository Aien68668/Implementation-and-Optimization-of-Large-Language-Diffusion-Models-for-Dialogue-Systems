{"ast":null,"code":"var _jsxFileName = \"/root/LLaDA-main/lldm/src/DiffusionModel.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { generateText } from './api';\nimport './DiffusionModel.css';\n\n// 置信度指示器组件\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ConfidenceIndicator = ({\n  isVisible,\n  onClose,\n  position,\n  onPositionChange\n}) => {\n  _s();\n  const [isDragging, setIsDragging] = useState(false);\n  const [dragOffset, setDragOffset] = useState({\n    x: 0,\n    y: 0\n  });\n  const [isClosing, setIsClosing] = useState(false);\n  const indicatorRef = useRef(null);\n  const confidenceLevels = [{\n    level: 0,\n    color: '#666',\n    label: '[MASK]'\n  }, {\n    level: 0.25,\n    color: 'rgb(191, 64, 0)',\n    label: '低置信度'\n  }, {\n    level: 0.5,\n    color: 'rgb(128, 128, 0)',\n    label: '中置信度'\n  }, {\n    level: 0.75,\n    color: 'rgb(64, 191, 0)',\n    label: '高置信度'\n  }, {\n    level: 1.0,\n    color: 'rgb(0, 255, 0)',\n    label: '确定'\n  }];\n  const handleMouseDown = e => {\n    if (e.target.closest('.close-button')) return;\n    setIsDragging(true);\n    const rect = indicatorRef.current.getBoundingClientRect();\n    setDragOffset({\n      x: e.clientX - rect.left,\n      y: e.clientY - rect.top\n    });\n    e.preventDefault();\n\n    // 添加全局样式防止文本选择\n    document.body.style.userSelect = 'none';\n    document.body.style.cursor = 'grabbing';\n    document.body.classList.add('dragging-indicator');\n  };\n  const handleMouseMove = useCallback(e => {\n    if (!isDragging) return;\n    const newX = e.clientX - dragOffset.x;\n    const newY = e.clientY - dragOffset.y;\n\n    // 限制在视窗内\n    const maxX = window.innerWidth - 280;\n    const maxY = window.innerHeight - 300;\n    const constrainedX = Math.max(0, Math.min(newX, maxX));\n    const constrainedY = Math.max(0, Math.min(newY, maxY));\n    onPositionChange({\n      x: constrainedX,\n      y: constrainedY\n    });\n  }, [isDragging, dragOffset.x, dragOffset.y, onPositionChange]);\n  const handleMouseUp = useCallback(() => {\n    setIsDragging(false);\n    document.body.style.userSelect = '';\n    document.body.style.cursor = '';\n    document.body.classList.remove('dragging-indicator');\n  }, []);\n  const handleClose = () => {\n    setIsClosing(true);\n    // 延迟关闭以显示动画\n    setTimeout(() => {\n      onClose();\n      setIsClosing(false);\n    }, 300);\n  };\n  useEffect(() => {\n    if (isDragging) {\n      document.addEventListener('mousemove', handleMouseMove);\n      document.addEventListener('mouseup', handleMouseUp);\n      return () => {\n        document.removeEventListener('mousemove', handleMouseMove);\n        document.removeEventListener('mouseup', handleMouseUp);\n      };\n    }\n  }, [isDragging, handleMouseMove, handleMouseUp]);\n\n  // 清理拖动状态\n  useEffect(() => {\n    return () => {\n      document.body.style.userSelect = '';\n      document.body.style.cursor = '';\n    };\n  }, []);\n  if (!isVisible && !isClosing) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: indicatorRef,\n    className: `confidence-indicator ${isDragging ? 'dragging' : ''} ${isClosing ? 'closing' : ''}`,\n    style: {\n      left: position.x,\n      top: position.y,\n      cursor: isDragging ? 'grabbing' : 'grab'\n    },\n    onMouseDown: handleMouseDown,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"indicator-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        children: \"\\u7F6E\\u4FE1\\u5EA6\\u6307\\u793A\\u5668\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"close-button\",\n        onClick: handleClose,\n        title: \"\\u5173\\u95ED\",\n        children: \"\\xD7\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }, this), confidenceLevels.map((item, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"confidence-scale\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"color-box\",\n        style: {\n          backgroundColor: item.color\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: item.label\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 11\n      }, this)]\n    }, index, true, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 9\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 94,\n    columnNumber: 5\n  }, this);\n};\n_s(ConfidenceIndicator, \"9BzqoF7y2YdJMOJp4h8i0/EOpIA=\");\n_c = ConfidenceIndicator;\nconst DiffusionModel = () => {\n  _s2();\n  const [messages, setMessages] = useState([{\n    id: 1,\n    text: \"欢迎使用LLaDA扩散语言模型可视化系统！\",\n    sender: 'bot',\n    timestamp: new Date(),\n    isGenerated: true\n  }]);\n  const [inputValue, setInputValue] = useState('');\n  const [isGenerating, setIsGenerating] = useState(false);\n  const [showIndicator, setShowIndicator] = useState(false);\n  const [indicatorPosition, setIndicatorPosition] = useState({\n    x: 20,\n    y: 100\n  });\n  const [chatHistory, setChatHistory] = useState([]);\n  const [constraints, setConstraints] = useState('');\n  const [serverError, setServerError] = useState(null);\n  const messagesEndRef = useRef(null);\n\n  // 生成设置\n  const [settings, setSettings] = useState({\n    gen_length: 64,\n    steps: 32,\n    temperature: 0.0,\n    cfg_scale: 0.0,\n    block_length: 32,\n    remasking: 'low_confidence',\n    constraints: ''\n  });\n  const scrollToBottom = () => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: \"smooth\"\n    });\n  };\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  // 根据置信度获取颜色\n  const getConfidenceColor = confidence => {\n    if (confidence === 0) return '#666'; // 灰色表示MASK\n    if (confidence < 0.3) return '#FF6666'; // 红色表示低置信度\n    if (confidence < 0.7) return '#FFAA33'; // 橙色表示中置信度\n    return '#66CC66'; // 绿色表示高置信度\n  };\n\n  // 将可视化状态转换为token数组\n  const parseVisualizationState = visualizationState => {\n    return visualizationState.map((item, index) => ({\n      id: index,\n      char: item[0],\n      confidence: item[0] === '[MASK]' ? 0 : 1.0,\n      color: item[1],\n      isGenerated: item[0] !== '[MASK]'\n    }));\n  };\n\n  // 生成完整的回复\n  const generateResponse = async userMessage => {\n    setIsGenerating(true);\n    setServerError(null);\n    try {\n      // 添加用户消息\n      const userMsg = {\n        id: Date.now(),\n        text: userMessage,\n        sender: 'user',\n        timestamp: new Date(),\n        isGenerated: true\n      };\n      setMessages(prev => [...prev, userMsg]);\n\n      // 准备聊天历史\n      const newChatHistory = [...chatHistory, {\n        role: 'user',\n        content: userMessage\n      }];\n\n      // 创建初始的掩码消息\n      const initialTokens = Array(settings.gen_length).fill(null).map((_, index) => ({\n        id: index,\n        char: '[MASK]',\n        confidence: 0,\n        color: '#444444',\n        isGenerated: false\n      }));\n      const botMessage = {\n        id: Date.now() + 1,\n        text: '',\n        sender: 'bot',\n        timestamp: new Date(),\n        tokens: initialTokens,\n        isGenerated: false\n      };\n      setMessages(prev => [...prev, botMessage]);\n\n      // 调用后端API生成响应\n      const requestSettings = {\n        ...settings,\n        constraints: constraints\n      };\n      const response = await generateText(newChatHistory, requestSettings);\n      if (response.error) {\n        throw new Error(response.error);\n      }\n\n      // 更新聊天历史\n      setChatHistory([...newChatHistory, {\n        role: 'assistant',\n        content: response.response\n      }]);\n\n      // 逐步显示可视化过程\n      const visualizationSteps = response.visualization || [];\n      for (let stepIndex = 0; stepIndex < visualizationSteps.length; stepIndex++) {\n        const step = visualizationSteps[stepIndex];\n        const tokens = parseVisualizationState(step);\n\n        // 更新消息中的tokens\n        setMessages(prev => prev.map(msg => {\n          if (msg.id === botMessage.id) {\n            return {\n              ...msg,\n              tokens\n            };\n          }\n          return msg;\n        }));\n\n        // 如果不是最后一步，等待一段时间再显示下一步\n        if (stepIndex < visualizationSteps.length - 1) {\n          await new Promise(resolve => setTimeout(resolve, 200));\n        }\n      }\n\n      // 生成完成，设置最终文本\n      setMessages(prev => prev.map(msg => {\n        if (msg.id === botMessage.id) {\n          return {\n            ...msg,\n            text: response.response,\n            isGenerated: true\n          };\n        }\n        return msg;\n      }));\n    } catch (error) {\n      console.error('生成响应时出错:', error);\n      setServerError(error.message || '服务器连接失败');\n\n      // 移除未完成的bot消息\n      setMessages(prev => prev.filter(msg => msg.id !== Date.now() + 1));\n    } finally {\n      setIsGenerating(false);\n    }\n  };\n  const handleSend = () => {\n    if (inputValue.trim() === '' || isGenerating) return;\n    const message = inputValue.trim();\n    setInputValue('');\n    generateResponse(message);\n  };\n  const handleKeyPress = e => {\n    if (e.key === 'Enter' && !e.shiftKey && !isGenerating) {\n      e.preventDefault();\n      handleSend();\n    }\n  };\n  const formatTime = timestamp => {\n    return timestamp.toLocaleTimeString('zh-CN', {\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"diffusion-model\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"app-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"LLaDA\\u6269\\u6563\\u8BED\\u8A00\\u6A21\\u578B\\u53EF\\u89C6\\u5316\\u7CFB\\u7EDF\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 308,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\u89C2\\u5BDF\\u4ECE [MASK] \\u5230\\u6700\\u7EC8\\u6587\\u672C\\u7684\\u751F\\u6210\\u8FC7\\u7A0B\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"toggle-indicator-btn\",\n        onClick: () => setShowIndicator(!showIndicator),\n        title: showIndicator ? \"隐藏置信度指示器\" : \"显示置信度指示器\",\n        children: showIndicator ? \"隐藏指示器\" : \"显示指示器\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 307,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ConfidenceIndicator, {\n      isVisible: showIndicator,\n      onClose: () => setShowIndicator(false),\n      position: indicatorPosition,\n      onPositionChange: setIndicatorPosition\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 319,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"messages-container\",\n        children: [messages.map(message => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `message ${message.sender}`,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"message-content\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"message-text\",\n              children: message.sender === 'bot' && message.tokens ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"token-container\",\n                children: message.tokens.map((token, index) => /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: `token ${token.isGenerated ? 'generated' : 'generating'}`,\n                  style: {\n                    color: token.color || getConfidenceColor(token.confidence),\n                    backgroundColor: token.confidence > 0 ? `rgba(${255 * (1 - token.confidence)}, ${255 * token.confidence}, 0, 0.1)` : 'transparent'\n                  },\n                  children: token.char\n                }, index, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 335,\n                  columnNumber: 25\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 333,\n                columnNumber: 21\n              }, this) : message.text\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 331,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"message-time\",\n              children: formatTime(message.timestamp)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 351,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 330,\n            columnNumber: 15\n          }, this)\n        }, message.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 13\n        }, this)), isGenerating && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"generating-indicator\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"generating-dots\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 358,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 359,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 360,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 357,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"\\u6B63\\u5728\\u751F\\u6210\\u4E2D...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 362,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 356,\n          columnNumber: 13\n        }, this), serverError && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"error-message\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"error-content\",\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"\\u9519\\u8BEF\\uFF1A\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 368,\n              columnNumber: 17\n            }, this), \" \", serverError]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 367,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 366,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          ref: messagesEndRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 372,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 327,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"constraints-container\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: constraints,\n          onChange: e => setConstraints(e.target.value),\n          placeholder: \"\\u4F4D\\u7F6E\\u7EA6\\u675F (\\u4F8B\\u5982: 0:Once, 5:upon, 10:time)\",\n          className: \"constraints-input\",\n          disabled: isGenerating\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 377,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 376,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"settings-panel\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"settings-row\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: [\"\\u751F\\u6210\\u957F\\u5EA6: \", settings.gen_length]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 390,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"range\",\n            min: \"16\",\n            max: \"128\",\n            step: \"8\",\n            value: settings.gen_length,\n            onChange: e => setSettings({\n              ...settings,\n              gen_length: parseInt(e.target.value)\n            }),\n            disabled: isGenerating\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 391,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 389,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"settings-row\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: [\"\\u53BB\\u566A\\u6B65\\u6570: \", settings.steps]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 402,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"range\",\n            min: \"8\",\n            max: \"64\",\n            step: \"4\",\n            value: settings.steps,\n            onChange: e => setSettings({\n              ...settings,\n              steps: parseInt(e.target.value)\n            }),\n            disabled: isGenerating\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 403,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 401,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"settings-row\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: [\"\\u6E29\\u5EA6: \", settings.temperature.toFixed(1)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 414,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"range\",\n            min: \"0.0\",\n            max: \"1.0\",\n            step: \"0.1\",\n            value: settings.temperature,\n            onChange: e => setSettings({\n              ...settings,\n              temperature: parseFloat(e.target.value)\n            }),\n            disabled: isGenerating\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 415,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 413,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"settings-row\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: [\"CFG\\u6BD4\\u4F8B: \", settings.cfg_scale.toFixed(1)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 426,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"range\",\n            min: \"0.0\",\n            max: \"2.0\",\n            step: \"0.1\",\n            value: settings.cfg_scale,\n            onChange: e => setSettings({\n              ...settings,\n              cfg_scale: parseFloat(e.target.value)\n            }),\n            disabled: isGenerating\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 427,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 425,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 388,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"input-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n          value: inputValue,\n          onChange: e => setInputValue(e.target.value),\n          onKeyPress: handleKeyPress,\n          placeholder: \"\\u8F93\\u5165\\u60A8\\u7684\\u6D88\\u606F\\u6765\\u89E6\\u53D1LLaDA\\u6269\\u6563\\u751F\\u6210\\u8FC7\\u7A0B...\",\n          className: \"message-input\",\n          rows: \"1\",\n          disabled: isGenerating\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 440,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleSend,\n          className: \"send-button\",\n          disabled: inputValue.trim() === '' || isGenerating,\n          children: isGenerating ? '生成中...' : '发送'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 449,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 439,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 326,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 306,\n    columnNumber: 5\n  }, this);\n};\n_s2(DiffusionModel, \"W4I/7TZWSNx3o8D/XCPbAGBOqlg=\");\n_c2 = DiffusionModel;\nexport default DiffusionModel;\nvar _c, _c2;\n$RefreshReg$(_c, \"ConfidenceIndicator\");\n$RefreshReg$(_c2, \"DiffusionModel\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","generateText","jsxDEV","_jsxDEV","ConfidenceIndicator","isVisible","onClose","position","onPositionChange","_s","isDragging","setIsDragging","dragOffset","setDragOffset","x","y","isClosing","setIsClosing","indicatorRef","confidenceLevels","level","color","label","handleMouseDown","e","target","closest","rect","current","getBoundingClientRect","clientX","left","clientY","top","preventDefault","document","body","style","userSelect","cursor","classList","add","handleMouseMove","newX","newY","maxX","window","innerWidth","maxY","innerHeight","constrainedX","Math","max","min","constrainedY","handleMouseUp","remove","handleClose","setTimeout","addEventListener","removeEventListener","ref","className","onMouseDown","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","title","map","item","index","backgroundColor","_c","DiffusionModel","_s2","messages","setMessages","id","text","sender","timestamp","Date","isGenerated","inputValue","setInputValue","isGenerating","setIsGenerating","showIndicator","setShowIndicator","indicatorPosition","setIndicatorPosition","chatHistory","setChatHistory","constraints","setConstraints","serverError","setServerError","messagesEndRef","settings","setSettings","gen_length","steps","temperature","cfg_scale","block_length","remasking","scrollToBottom","_messagesEndRef$curre","scrollIntoView","behavior","getConfidenceColor","confidence","parseVisualizationState","visualizationState","char","generateResponse","userMessage","userMsg","now","prev","newChatHistory","role","content","initialTokens","Array","fill","_","botMessage","tokens","requestSettings","response","error","Error","visualizationSteps","visualization","stepIndex","length","step","msg","Promise","resolve","console","message","filter","handleSend","trim","handleKeyPress","key","shiftKey","formatTime","toLocaleTimeString","hour","minute","token","type","value","onChange","placeholder","disabled","parseInt","toFixed","parseFloat","onKeyPress","rows","_c2","$RefreshReg$"],"sources":["/root/LLaDA-main/lldm/src/DiffusionModel.js"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from 'react';\r\nimport { generateText } from './api';\r\nimport './DiffusionModel.css';\r\n\r\n// 置信度指示器组件\r\nconst ConfidenceIndicator = ({ isVisible, onClose, position, onPositionChange }) => {\r\n  const [isDragging, setIsDragging] = useState(false);\r\n  const [dragOffset, setDragOffset] = useState({ x: 0, y: 0 });\r\n  const [isClosing, setIsClosing] = useState(false);\r\n  const indicatorRef = useRef(null);\r\n\r\n  const confidenceLevels = [\r\n    { level: 0, color: '#666', label: '[MASK]' },\r\n    { level: 0.25, color: 'rgb(191, 64, 0)', label: '低置信度' },\r\n    { level: 0.5, color: 'rgb(128, 128, 0)', label: '中置信度' },\r\n    { level: 0.75, color: 'rgb(64, 191, 0)', label: '高置信度' },\r\n    { level: 1.0, color: 'rgb(0, 255, 0)', label: '确定' }\r\n  ];\r\n\r\n  const handleMouseDown = (e) => {\r\n    if (e.target.closest('.close-button')) return;\r\n    \r\n    setIsDragging(true);\r\n    const rect = indicatorRef.current.getBoundingClientRect();\r\n    setDragOffset({\r\n      x: e.clientX - rect.left,\r\n      y: e.clientY - rect.top\r\n    });\r\n    e.preventDefault();\r\n    \r\n    // 添加全局样式防止文本选择\r\n    document.body.style.userSelect = 'none';\r\n    document.body.style.cursor = 'grabbing';\r\n    document.body.classList.add('dragging-indicator');\r\n  };\r\n\r\n  const handleMouseMove = useCallback((e) => {\r\n    if (!isDragging) return;\r\n    \r\n    const newX = e.clientX - dragOffset.x;\r\n    const newY = e.clientY - dragOffset.y;\r\n    \r\n    // 限制在视窗内\r\n    const maxX = window.innerWidth - 280;\r\n    const maxY = window.innerHeight - 300;\r\n    \r\n    const constrainedX = Math.max(0, Math.min(newX, maxX));\r\n    const constrainedY = Math.max(0, Math.min(newY, maxY));\r\n    \r\n    onPositionChange({\r\n      x: constrainedX,\r\n      y: constrainedY\r\n    });\r\n  }, [isDragging, dragOffset.x, dragOffset.y, onPositionChange]);\r\n\r\n  const handleMouseUp = useCallback(() => {\r\n    setIsDragging(false);\r\n    document.body.style.userSelect = '';\r\n    document.body.style.cursor = '';\r\n    document.body.classList.remove('dragging-indicator');\r\n  }, []);\r\n\r\n  const handleClose = () => {\r\n    setIsClosing(true);\r\n    // 延迟关闭以显示动画\r\n    setTimeout(() => {\r\n      onClose();\r\n      setIsClosing(false);\r\n    }, 300);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (isDragging) {\r\n      document.addEventListener('mousemove', handleMouseMove);\r\n      document.addEventListener('mouseup', handleMouseUp);\r\n      return () => {\r\n        document.removeEventListener('mousemove', handleMouseMove);\r\n        document.removeEventListener('mouseup', handleMouseUp);\r\n      };\r\n    }\r\n  }, [isDragging, handleMouseMove, handleMouseUp]);\r\n\r\n  // 清理拖动状态\r\n  useEffect(() => {\r\n    return () => {\r\n      document.body.style.userSelect = '';\r\n      document.body.style.cursor = '';\r\n    };\r\n  }, []);\r\n\r\n  if (!isVisible && !isClosing) return null;\r\n\r\n  return (\r\n    <div \r\n      ref={indicatorRef}\r\n      className={`confidence-indicator ${isDragging ? 'dragging' : ''} ${isClosing ? 'closing' : ''}`}\r\n      style={{\r\n        left: position.x,\r\n        top: position.y,\r\n        cursor: isDragging ? 'grabbing' : 'grab'\r\n      }}\r\n      onMouseDown={handleMouseDown}\r\n    >\r\n      <div className=\"indicator-header\">\r\n        <h4>置信度指示器</h4>\r\n        <button \r\n          className=\"close-button\"\r\n          onClick={handleClose}\r\n          title=\"关闭\"\r\n        >\r\n          ×\r\n        </button>\r\n      </div>\r\n      {confidenceLevels.map((item, index) => (\r\n        <div key={index} className=\"confidence-scale\">\r\n          <div \r\n            className=\"color-box\" \r\n            style={{ backgroundColor: item.color }}\r\n          ></div>\r\n          <span>{item.label}</span>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst DiffusionModel = () => {\r\n  const [messages, setMessages] = useState([\r\n    { id: 1, text: \"欢迎使用LLaDA扩散语言模型可视化系统！\", sender: 'bot', timestamp: new Date(), isGenerated: true }\r\n  ]);\r\n  const [inputValue, setInputValue] = useState('');\r\n  const [isGenerating, setIsGenerating] = useState(false);\r\n  const [showIndicator, setShowIndicator] = useState(false);\r\n  const [indicatorPosition, setIndicatorPosition] = useState({ x: 20, y: 100 });\r\n  const [chatHistory, setChatHistory] = useState([]);\r\n  const [constraints, setConstraints] = useState('');\r\n  const [serverError, setServerError] = useState(null);\r\n  const messagesEndRef = useRef(null);\r\n\r\n  // 生成设置\r\n  const [settings, setSettings] = useState({\r\n    gen_length: 64,\r\n    steps: 32,\r\n    temperature: 0.0,\r\n    cfg_scale: 0.0,\r\n    block_length: 32,\r\n    remasking: 'low_confidence',\r\n    constraints: ''\r\n  });\r\n\r\n  const scrollToBottom = () => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n  };\r\n\r\n  useEffect(() => {\r\n    scrollToBottom();\r\n  }, [messages]);\r\n\r\n  // 根据置信度获取颜色\r\n  const getConfidenceColor = (confidence) => {\r\n    if (confidence === 0) return '#666'; // 灰色表示MASK\r\n    if (confidence < 0.3) return '#FF6666'; // 红色表示低置信度\r\n    if (confidence < 0.7) return '#FFAA33'; // 橙色表示中置信度\r\n    return '#66CC66'; // 绿色表示高置信度\r\n  };\r\n\r\n  // 将可视化状态转换为token数组\r\n  const parseVisualizationState = (visualizationState) => {\r\n    return visualizationState.map((item, index) => ({\r\n      id: index,\r\n      char: item[0],\r\n      confidence: item[0] === '[MASK]' ? 0 : 1.0,\r\n      color: item[1],\r\n      isGenerated: item[0] !== '[MASK]'\r\n    }));\r\n  };\r\n\r\n  // 生成完整的回复\r\n  const generateResponse = async (userMessage) => {\r\n    setIsGenerating(true);\r\n    setServerError(null);\r\n    \r\n    try {\r\n      // 添加用户消息\r\n      const userMsg = {\r\n        id: Date.now(),\r\n        text: userMessage,\r\n        sender: 'user',\r\n        timestamp: new Date(),\r\n        isGenerated: true\r\n      };\r\n      \r\n      setMessages(prev => [...prev, userMsg]);\r\n\r\n      // 准备聊天历史\r\n      const newChatHistory = [\r\n        ...chatHistory,\r\n        { role: 'user', content: userMessage }\r\n      ];\r\n\r\n      // 创建初始的掩码消息\r\n      const initialTokens = Array(settings.gen_length).fill(null).map((_, index) => ({\r\n        id: index,\r\n        char: '[MASK]',\r\n        confidence: 0,\r\n        color: '#444444',\r\n        isGenerated: false\r\n      }));\r\n\r\n      const botMessage = {\r\n        id: Date.now() + 1,\r\n        text: '',\r\n        sender: 'bot',\r\n        timestamp: new Date(),\r\n        tokens: initialTokens,\r\n        isGenerated: false\r\n      };\r\n\r\n      setMessages(prev => [...prev, botMessage]);\r\n\r\n      // 调用后端API生成响应\r\n      const requestSettings = {\r\n        ...settings,\r\n        constraints: constraints\r\n      };\r\n\r\n      const response = await generateText(newChatHistory, requestSettings);\r\n      \r\n      if (response.error) {\r\n        throw new Error(response.error);\r\n      }\r\n\r\n      // 更新聊天历史\r\n      setChatHistory([\r\n        ...newChatHistory,\r\n        { role: 'assistant', content: response.response }\r\n      ]);\r\n\r\n      // 逐步显示可视化过程\r\n      const visualizationSteps = response.visualization || [];\r\n      \r\n      for (let stepIndex = 0; stepIndex < visualizationSteps.length; stepIndex++) {\r\n        const step = visualizationSteps[stepIndex];\r\n        const tokens = parseVisualizationState(step);\r\n        \r\n        // 更新消息中的tokens\r\n        setMessages(prev => prev.map(msg => {\r\n          if (msg.id === botMessage.id) {\r\n            return { ...msg, tokens };\r\n          }\r\n          return msg;\r\n        }));\r\n        \r\n        // 如果不是最后一步，等待一段时间再显示下一步\r\n        if (stepIndex < visualizationSteps.length - 1) {\r\n          await new Promise(resolve => setTimeout(resolve, 200));\r\n        }\r\n      }\r\n\r\n      // 生成完成，设置最终文本\r\n      setMessages(prev => prev.map(msg => {\r\n        if (msg.id === botMessage.id) {\r\n          return { \r\n            ...msg, \r\n            text: response.response,\r\n            isGenerated: true \r\n          };\r\n        }\r\n        return msg;\r\n      }));\r\n\r\n    } catch (error) {\r\n      console.error('生成响应时出错:', error);\r\n      setServerError(error.message || '服务器连接失败');\r\n      \r\n      // 移除未完成的bot消息\r\n      setMessages(prev => prev.filter(msg => msg.id !== Date.now() + 1));\r\n    } finally {\r\n      setIsGenerating(false);\r\n    }\r\n  };\r\n\r\n  const handleSend = () => {\r\n    if (inputValue.trim() === '' || isGenerating) return;\r\n    \r\n    const message = inputValue.trim();\r\n    setInputValue('');\r\n    generateResponse(message);\r\n  };\r\n\r\n  const handleKeyPress = (e) => {\r\n    if (e.key === 'Enter' && !e.shiftKey && !isGenerating) {\r\n      e.preventDefault();\r\n      handleSend();\r\n    }\r\n  };\r\n\r\n  const formatTime = (timestamp) => {\r\n    return timestamp.toLocaleTimeString('zh-CN', { \r\n      hour: '2-digit', \r\n      minute: '2-digit' \r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"diffusion-model\">\r\n      <header className=\"app-header\">\r\n        <h1>LLaDA扩散语言模型可视化系统</h1>\r\n        <p>观察从 [MASK] 到最终文本的生成过程</p>\r\n        <button \r\n          className=\"toggle-indicator-btn\"\r\n          onClick={() => setShowIndicator(!showIndicator)}\r\n          title={showIndicator ? \"隐藏置信度指示器\" : \"显示置信度指示器\"}\r\n        >\r\n          {showIndicator ? \"隐藏指示器\" : \"显示指示器\"}\r\n        </button>\r\n      </header>\r\n      \r\n      <ConfidenceIndicator \r\n        isVisible={showIndicator}\r\n        onClose={() => setShowIndicator(false)}\r\n        position={indicatorPosition}\r\n        onPositionChange={setIndicatorPosition}\r\n      />\r\n      \r\n      <div className=\"chat-container\">\r\n        <div className=\"messages-container\">\r\n          {messages.map((message) => (\r\n            <div key={message.id} className={`message ${message.sender}`}>\r\n              <div className=\"message-content\">\r\n                <div className=\"message-text\">\r\n                  {message.sender === 'bot' && message.tokens ? (\r\n                    <div className=\"token-container\">\r\n                      {message.tokens.map((token, index) => (\r\n                        <span\r\n                          key={index}\r\n                          className={`token ${token.isGenerated ? 'generated' : 'generating'}`}\r\n                          style={{ \r\n                            color: token.color || getConfidenceColor(token.confidence),\r\n                            backgroundColor: token.confidence > 0 ? `rgba(${255 * (1 - token.confidence)}, ${255 * token.confidence}, 0, 0.1)` : 'transparent'\r\n                          }}\r\n                        >\r\n                          {token.char}\r\n                        </span>\r\n                      ))}\r\n                    </div>\r\n                  ) : (\r\n                    message.text\r\n                  )}\r\n                </div>\r\n                <div className=\"message-time\">{formatTime(message.timestamp)}</div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n          {isGenerating && (\r\n            <div className=\"generating-indicator\">\r\n              <div className=\"generating-dots\">\r\n                <span></span>\r\n                <span></span>\r\n                <span></span>\r\n              </div>\r\n              <span>正在生成中...</span>\r\n            </div>\r\n          )}\r\n          {serverError && (\r\n            <div className=\"error-message\">\r\n              <div className=\"error-content\">\r\n                <strong>错误：</strong> {serverError}\r\n              </div>\r\n            </div>\r\n          )}\r\n          <div ref={messagesEndRef} />\r\n        </div>\r\n        \r\n        {/* 约束输入 */}\r\n        <div className=\"constraints-container\">\r\n          <input\r\n            type=\"text\"\r\n            value={constraints}\r\n            onChange={(e) => setConstraints(e.target.value)}\r\n            placeholder=\"位置约束 (例如: 0:Once, 5:upon, 10:time)\"\r\n            className=\"constraints-input\"\r\n            disabled={isGenerating}\r\n          />\r\n        </div>\r\n        \r\n        {/* 设置面板 */}\r\n        <div className=\"settings-panel\">\r\n          <div className=\"settings-row\">\r\n            <label>生成长度: {settings.gen_length}</label>\r\n            <input\r\n              type=\"range\"\r\n              min=\"16\"\r\n              max=\"128\"\r\n              step=\"8\"\r\n              value={settings.gen_length}\r\n              onChange={(e) => setSettings({...settings, gen_length: parseInt(e.target.value)})}\r\n              disabled={isGenerating}\r\n            />\r\n          </div>\r\n          <div className=\"settings-row\">\r\n            <label>去噪步数: {settings.steps}</label>\r\n            <input\r\n              type=\"range\"\r\n              min=\"8\"\r\n              max=\"64\"\r\n              step=\"4\"\r\n              value={settings.steps}\r\n              onChange={(e) => setSettings({...settings, steps: parseInt(e.target.value)})}\r\n              disabled={isGenerating}\r\n            />\r\n          </div>\r\n          <div className=\"settings-row\">\r\n            <label>温度: {settings.temperature.toFixed(1)}</label>\r\n            <input\r\n              type=\"range\"\r\n              min=\"0.0\"\r\n              max=\"1.0\"\r\n              step=\"0.1\"\r\n              value={settings.temperature}\r\n              onChange={(e) => setSettings({...settings, temperature: parseFloat(e.target.value)})}\r\n              disabled={isGenerating}\r\n            />\r\n          </div>\r\n          <div className=\"settings-row\">\r\n            <label>CFG比例: {settings.cfg_scale.toFixed(1)}</label>\r\n            <input\r\n              type=\"range\"\r\n              min=\"0.0\"\r\n              max=\"2.0\"\r\n              step=\"0.1\"\r\n              value={settings.cfg_scale}\r\n              onChange={(e) => setSettings({...settings, cfg_scale: parseFloat(e.target.value)})}\r\n              disabled={isGenerating}\r\n            />\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"input-container\">\r\n          <textarea\r\n            value={inputValue}\r\n            onChange={(e) => setInputValue(e.target.value)}\r\n            onKeyPress={handleKeyPress}\r\n            placeholder=\"输入您的消息来触发LLaDA扩散生成过程...\"\r\n            className=\"message-input\"\r\n            rows=\"1\"\r\n            disabled={isGenerating}\r\n          />\r\n          <button \r\n            onClick={handleSend}\r\n            className=\"send-button\"\r\n            disabled={inputValue.trim() === '' || isGenerating}\r\n          >\r\n            {isGenerating ? '生成中...' : '发送'}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DiffusionModel;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}