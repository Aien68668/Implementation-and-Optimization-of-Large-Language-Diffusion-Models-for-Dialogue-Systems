{"ast":null,"code":"import React,{useState}from'react';import'../styles/Sidebar.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Sidebar=_ref=>{let{conversations,activeConversationId,onNewConversation,onSelectConversation,onDeleteConversation,showIndicator,onToggleIndicator,systemInfo}=_ref;const[isCollapsed,setIsCollapsed]=useState(false);const formatConversationTitle=conversation=>{var _conversation$message;if(conversation.title){return conversation.title;}// 从第一条用户消息生成标题\nconst firstUserMessage=(_conversation$message=conversation.messages)===null||_conversation$message===void 0?void 0:_conversation$message.find(m=>m.sender==='user');if(firstUserMessage){return firstUserMessage.text.slice(0,20)+(firstUserMessage.text.length>20?'...':'');}return`对话 ${conversation.id}`;};const formatTime=timestamp=>{const now=new Date();const time=new Date(timestamp);const diffInHours=(now-time)/(1000*60*60);if(diffInHours<1){return'刚刚';}else if(diffInHours<24){return`${Math.floor(diffInHours)}小时前`;}else if(diffInHours<24*7){return`${Math.floor(diffInHours/24)}天前`;}else{return time.toLocaleDateString('zh-CN');}};return/*#__PURE__*/_jsxs(\"div\",{className:`sidebar ${isCollapsed?'collapsed':''}`,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"sidebar-header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"system-title\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\uD83D\\uDE80 LLaDA\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u6269\\u6563\\u8BED\\u8A00\\u6A21\\u578B\\u53EF\\u89C6\\u5316\\u7CFB\\u7EDF\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"collapse-btn\",onClick:()=>setIsCollapsed(!isCollapsed),title:isCollapsed?\"展开\":\"收起\",children:isCollapsed?'▶':'◀'})]}),!isCollapsed&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"sidebar-controls\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"control-btn new-chat-btn\",onClick:onNewConversation,title:\"\\u65B0\\u5EFA\\u5BF9\\u8BDD\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"btn-icon\",children:\"\\u2795\"}),/*#__PURE__*/_jsx(\"span\",{className:\"btn-text\",children:\"\\u65B0\\u5EFA\\u5BF9\\u8BDD\"})]}),/*#__PURE__*/_jsxs(\"button\",{className:`control-btn indicator-btn ${showIndicator?'active':''}`,onClick:onToggleIndicator,title:showIndicator?\"隐藏置信度指示器\":\"显示置信度指示器\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"btn-icon\",children:\"\\uD83C\\uDFA8\"}),/*#__PURE__*/_jsx(\"span\",{className:\"btn-text\",children:showIndicator?\"隐藏指示器\":\"显示指示器\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"conversations-section\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"section-title\",children:\"\\u5BF9\\u8BDD\\u5386\\u53F2\"}),/*#__PURE__*/_jsx(\"div\",{className:\"conversations-list\",children:conversations.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"empty-conversations\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\u6682\\u65E0\\u5BF9\\u8BDD\\u8BB0\\u5F55\"}),/*#__PURE__*/_jsx(\"small\",{children:\"\\u70B9\\u51FB\\\"\\u65B0\\u5EFA\\u5BF9\\u8BDD\\\"\\u5F00\\u59CB\"})]}):conversations.map(conversation=>{var _conversation$message2;return/*#__PURE__*/_jsxs(\"div\",{className:`conversation-item ${activeConversationId===conversation.id?'active':''}`,onClick:()=>onSelectConversation(conversation.id),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"conversation-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"conversation-title\",children:formatConversationTitle(conversation)}),/*#__PURE__*/_jsxs(\"div\",{className:\"conversation-meta\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"conversation-time\",children:formatTime(conversation.updatedAt)}),/*#__PURE__*/_jsxs(\"span\",{className:\"conversation-count\",children:[((_conversation$message2=conversation.messages)===null||_conversation$message2===void 0?void 0:_conversation$message2.filter(m=>m.sender==='user').length)||0,\" \\u6D88\\u606F\"]})]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"delete-conversation-btn\",onClick:e=>{e.stopPropagation();onDeleteConversation(conversation.id);},title:\"\\u5220\\u9664\\u5BF9\\u8BDD\",children:\"\\uD83D\\uDDD1\\uFE0F\"})]},conversation.id);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"system-info\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"info-label\",children:\"\\u8BBE\\u5907\\uFF1A\"}),/*#__PURE__*/_jsx(\"span\",{className:\"info-value\",children:(systemInfo===null||systemInfo===void 0?void 0:systemInfo.device)||'unknown'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"info-label\",children:\"\\u72B6\\u6001\\uFF1A\"}),/*#__PURE__*/_jsx(\"span\",{className:`status-indicator ${(systemInfo===null||systemInfo===void 0?void 0:systemInfo.status)==='healthy'?'healthy':'error'}`,children:(systemInfo===null||systemInfo===void 0?void 0:systemInfo.status)==='healthy'?'🟢 正常':'🔴 异常'})]})]})]})]});};export default Sidebar;","map":{"version":3,"names":["React","useState","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Sidebar","_ref","conversations","activeConversationId","onNewConversation","onSelectConversation","onDeleteConversation","showIndicator","onToggleIndicator","systemInfo","isCollapsed","setIsCollapsed","formatConversationTitle","conversation","_conversation$message","title","firstUserMessage","messages","find","m","sender","text","slice","length","id","formatTime","timestamp","now","Date","time","diffInHours","Math","floor","toLocaleDateString","className","children","onClick","map","_conversation$message2","updatedAt","filter","e","stopPropagation","device","status"],"sources":["/root/LLaDA-main/lldm/src/components/Sidebar.js"],"sourcesContent":["import React, { useState } from 'react';\nimport '../styles/Sidebar.css';\n\nconst Sidebar = ({\n  conversations,\n  activeConversationId,\n  onNewConversation,\n  onSelectConversation,\n  onDeleteConversation,\n  showIndicator,\n  onToggleIndicator,\n  systemInfo\n}) => {\n  const [isCollapsed, setIsCollapsed] = useState(false);\n\n  const formatConversationTitle = (conversation) => {\n    if (conversation.title) {\n      return conversation.title;\n    }\n    // 从第一条用户消息生成标题\n    const firstUserMessage = conversation.messages?.find(m => m.sender === 'user');\n    if (firstUserMessage) {\n      return firstUserMessage.text.slice(0, 20) + (firstUserMessage.text.length > 20 ? '...' : '');\n    }\n    return `对话 ${conversation.id}`;\n  };\n\n  const formatTime = (timestamp) => {\n    const now = new Date();\n    const time = new Date(timestamp);\n    const diffInHours = (now - time) / (1000 * 60 * 60);\n    \n    if (diffInHours < 1) {\n      return '刚刚';\n    } else if (diffInHours < 24) {\n      return `${Math.floor(diffInHours)}小时前`;\n    } else if (diffInHours < 24 * 7) {\n      return `${Math.floor(diffInHours / 24)}天前`;\n    } else {\n      return time.toLocaleDateString('zh-CN');\n    }\n  };\n\n  return (\n    <div className={`sidebar ${isCollapsed ? 'collapsed' : ''}`}>\n      {/* 顶部标题区域 */}\n      <div className=\"sidebar-header\">\n        <div className=\"system-title\">\n          <h2>🚀 LLaDA</h2>\n          <p>扩散语言模型可视化系统</p>\n        </div>\n        <button \n          className=\"collapse-btn\"\n          onClick={() => setIsCollapsed(!isCollapsed)}\n          title={isCollapsed ? \"展开\" : \"收起\"}\n        >\n          {isCollapsed ? '▶' : '◀'}\n        </button>\n      </div>\n\n      {!isCollapsed && (\n        <>\n          {/* 控制按钮区域 */}\n          <div className=\"sidebar-controls\">\n            <button \n              className=\"control-btn new-chat-btn\"\n              onClick={onNewConversation}\n              title=\"新建对话\"\n            >\n              <span className=\"btn-icon\">➕</span>\n              <span className=\"btn-text\">新建对话</span>\n            </button>\n            \n            <button \n              className={`control-btn indicator-btn ${showIndicator ? 'active' : ''}`}\n              onClick={onToggleIndicator}\n              title={showIndicator ? \"隐藏置信度指示器\" : \"显示置信度指示器\"}\n            >\n              <span className=\"btn-icon\">🎨</span>\n              <span className=\"btn-text\">\n                {showIndicator ? \"隐藏指示器\" : \"显示指示器\"}\n              </span>\n            </button>\n          </div>\n\n          {/* 对话历史列表 */}\n          <div className=\"conversations-section\">\n            <h3 className=\"section-title\">对话历史</h3>\n            <div className=\"conversations-list\">\n              {conversations.length === 0 ? (\n                <div className=\"empty-conversations\">\n                  <p>暂无对话记录</p>\n                  <small>点击\"新建对话\"开始</small>\n                </div>\n              ) : (\n                conversations.map(conversation => (\n                  <div\n                    key={conversation.id}\n                    className={`conversation-item ${\n                      activeConversationId === conversation.id ? 'active' : ''\n                    }`}\n                    onClick={() => onSelectConversation(conversation.id)}\n                  >\n                    <div className=\"conversation-content\">\n                      <div className=\"conversation-title\">\n                        {formatConversationTitle(conversation)}\n                      </div>\n                      <div className=\"conversation-meta\">\n                        <span className=\"conversation-time\">\n                          {formatTime(conversation.updatedAt)}\n                        </span>\n                        <span className=\"conversation-count\">\n                          {conversation.messages?.filter(m => m.sender === 'user').length || 0} 消息\n                        </span>\n                      </div>\n                    </div>\n                    <button\n                      className=\"delete-conversation-btn\"\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        onDeleteConversation(conversation.id);\n                      }}\n                      title=\"删除对话\"\n                    >\n                      🗑️\n                    </button>\n                  </div>\n                ))\n              )}\n            </div>\n          </div>\n\n          {/* 系统信息区域 */}\n          <div className=\"system-info\">\n            <div className=\"info-item\">\n              <span className=\"info-label\">设备：</span>\n              <span className=\"info-value\">{systemInfo?.device || 'unknown'}</span>\n            </div>\n            <div className=\"info-item\">\n              <span className=\"info-label\">状态：</span>\n              <span className={`status-indicator ${systemInfo?.status === 'healthy' ? 'healthy' : 'error'}`}>\n                {systemInfo?.status === 'healthy' ? '🟢 正常' : '🔴 异常'}\n              </span>\n            </div>\n          </div>\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default Sidebar;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}