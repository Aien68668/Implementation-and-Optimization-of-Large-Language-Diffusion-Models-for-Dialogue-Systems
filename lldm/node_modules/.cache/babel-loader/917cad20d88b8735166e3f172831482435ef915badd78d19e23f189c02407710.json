{"ast":null,"code":"var _jsxFileName = \"/root/LLaDA-main/lldm/src/components/InputArea.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useEffect } from 'react';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst InputArea = ({\n  inputValue,\n  setInputValue,\n  constraints,\n  setConstraints,\n  handleSend,\n  handleKeyPress,\n  isGenerating\n}) => {\n  _s();\n  const textareaRef = useRef(null);\n\n  // 自动调整文本框高度\n  const adjustTextareaHeight = () => {\n    const textarea = textareaRef.current;\n    if (textarea) {\n      // 重置高度以计算实际需要的高度\n      textarea.style.height = 'auto';\n\n      // 计算内容高度\n      const scrollHeight = textarea.scrollHeight;\n\n      // 计算行高（大约24px每行）\n      const lineHeight = 24;\n      const maxLines = 6;\n      const maxHeight = lineHeight * maxLines;\n\n      // 设置高度，但不超过最大高度\n      const newHeight = Math.min(scrollHeight, maxHeight);\n      textarea.style.height = `${newHeight}px`;\n    }\n  };\n\n  // 当输入值改变时调整高度\n  useEffect(() => {\n    adjustTextareaHeight();\n  }, [inputValue]);\n\n  // 处理输入变化\n  const handleInputChange = e => {\n    setInputValue(e.target.value);\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"constraints-container\",\n      children: /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: constraints,\n        onChange: e => setConstraints(e.target.value),\n        placeholder: \"\\u4F4D\\u7F6E\\u7EA6\\u675F (\\u4F8B\\u5982: 0:Once, 5:upon, 10:time)\",\n        className: \"constraints-input\",\n        disabled: isGenerating\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"input-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n        ref: textareaRef,\n        value: inputValue,\n        onChange: handleInputChange,\n        onKeyPress: handleKeyPress,\n        placeholder: \"\\u8F93\\u5165\\u60A8\\u7684\\u6D88\\u606F\\u6765\\u89E6\\u53D1LLaDA\\u6269\\u6563\\u751F\\u6210\\u8FC7\\u7A0B...\",\n        className: \"input-field auto-resize\",\n        rows: \"1\",\n        disabled: isGenerating,\n        style: {\n          resize: 'none',\n          overflow: 'auto'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleSend,\n        className: \"send-button\",\n        disabled: inputValue.trim() === '' || isGenerating,\n        children: isGenerating ? '生成中...' : '发送'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_s(InputArea, \"gSWexK8idHTRtbhGpJOt6TRUPko=\");\n_c = InputArea;\nexport default InputArea;\nvar _c;\n$RefreshReg$(_c, \"InputArea\");","map":{"version":3,"names":["React","useRef","useEffect","jsxDEV","_jsxDEV","Fragment","_Fragment","InputArea","inputValue","setInputValue","constraints","setConstraints","handleSend","handleKeyPress","isGenerating","_s","textareaRef","adjustTextareaHeight","textarea","current","style","height","scrollHeight","lineHeight","maxLines","maxHeight","newHeight","Math","min","handleInputChange","e","target","value","children","className","type","onChange","placeholder","disabled","fileName","_jsxFileName","lineNumber","columnNumber","ref","onKeyPress","rows","resize","overflow","onClick","trim","_c","$RefreshReg$"],"sources":["/root/LLaDA-main/lldm/src/components/InputArea.js"],"sourcesContent":["import React, { useRef, useEffect } from 'react';\n\nconst InputArea = ({ \n  inputValue, \n  setInputValue, \n  constraints, \n  setConstraints, \n  handleSend, \n  handleKeyPress, \n  isGenerating \n}) => {\n  const textareaRef = useRef(null);\n\n  // 自动调整文本框高度\n  const adjustTextareaHeight = () => {\n    const textarea = textareaRef.current;\n    if (textarea) {\n      // 重置高度以计算实际需要的高度\n      textarea.style.height = 'auto';\n      \n      // 计算内容高度\n      const scrollHeight = textarea.scrollHeight;\n      \n      // 计算行高（大约24px每行）\n      const lineHeight = 24;\n      const maxLines = 6;\n      const maxHeight = lineHeight * maxLines;\n      \n      // 设置高度，但不超过最大高度\n      const newHeight = Math.min(scrollHeight, maxHeight);\n      textarea.style.height = `${newHeight}px`;\n    }\n  };\n\n  // 当输入值改变时调整高度\n  useEffect(() => {\n    adjustTextareaHeight();\n  }, [inputValue]);\n\n  // 处理输入变化\n  const handleInputChange = (e) => {\n    setInputValue(e.target.value);\n  };\n\n  return (\n    <>\n      {/* 约束输入 */}\n      <div className=\"constraints-container\">\n        <input\n          type=\"text\"\n          value={constraints}\n          onChange={(e) => setConstraints(e.target.value)}\n          placeholder=\"位置约束 (例如: 0:Once, 5:upon, 10:time)\"\n          className=\"constraints-input\"\n          disabled={isGenerating}\n        />\n      </div>\n      \n      {/* 消息输入 */}\n      <div className=\"input-container\">\n        <textarea\n          ref={textareaRef}\n          value={inputValue}\n          onChange={handleInputChange}\n          onKeyPress={handleKeyPress}\n          placeholder=\"输入您的消息来触发LLaDA扩散生成过程...\"\n          className=\"input-field auto-resize\"\n          rows=\"1\"\n          disabled={isGenerating}\n          style={{\n            resize: 'none',\n            overflow: 'auto'\n          }}\n        />\n        <button \n          onClick={handleSend}\n          className=\"send-button\"\n          disabled={inputValue.trim() === '' || isGenerating}\n        >\n          {isGenerating ? '生成中...' : '发送'}\n        </button>\n      </div>\n    </>\n  );\n};\n\nexport default InputArea;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}